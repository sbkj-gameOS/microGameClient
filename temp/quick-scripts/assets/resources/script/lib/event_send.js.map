{"version":3,"sources":["event_send.js"],"names":["WJFCommon","require","cc","Class","extends","properties","onLoad","command","socket","on","result","data","self","getSelf","parse","console","log","route","players","talkOnSay","talk_event","disconnect","weijifen","mjs","find","mj","getComponent","duankai2","active","duankai","sys","localStorage","getItem","director","loadScene"],"mappings":";;;;;;AAAA,IAAIA,YAAYC,QAAQ,WAAR,CAAhB;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASJ,SADJ;;AAGLK,gBAAY,EAHP;;AAOL;AACAC,YAAQ,kBAAY,CAEnB,CAVI;AAWLC,aAAS,mBAAY;AACnB;AACE;;;AAGAC,eAAOC,EAAP,CAAU,SAAV,EAAsB,UAASC,MAAT,EAAgB;AAClC,gBAAIC,OAAOC,KAAKC,OAAL,GAAeC,KAAf,CAAqBJ,MAArB,CAAX;AACAK,oBAAQC,GAAR,CAAYL,KAAKJ,OAAjB;AACAQ,oBAAQC,GAAR,CAAYL,IAAZ;AACAC,iBAAKC,OAAL,GAAeI,KAAf,CAAqBN,KAAKJ,OAA1B,EAAmCI,IAAnC,EAA0CC,IAA1C;AACH,SALD;AAMH,KAtBI;AAuBN;;;AAGCM,aAAS,mBAAY;AACpBV,eAAOC,EAAP,CAAU,SAAV,EAAsB,UAASC,MAAT,EAAgB;AAC/B,gBAAIC,OAAOC,KAAKC,OAAL,GAAeC,KAAf,CAAqBJ,MAArB,CAAX;AACJ;AACA;AACA;AACA;AACA;AACIE,iBAAKC,OAAL,GAAeI,KAAf,CAAqB,SAArB,EAAgCN,IAAhC,EAAsCC,IAAtC;AACH,SARJ;AASA,KApCI;AAqCLO,eAAW,qBAAY;AACnBX,eAAOC,EAAP,CAAU,WAAV,EAAwB,UAASC,MAAT,EAAgB;AACpCE,iBAAKQ,UAAL,CAAgBV,MAAhB,EAAuB,IAAvB;AACH,SAFD;AAGH,KAzCI;AA0CL;;;AAGAW,gBAAY,sBAAY;AACpBnB,WAAGoB,QAAH,CAAYd,MAAZ,CAAmBC,EAAnB,CAAsB,YAAtB,EAAqC,YAAU;AAC3C,gBAAIc,MAAMrB,GAAGsB,IAAH,CAAQ,QAAR,CAAV;AACA,gBAAGD,GAAH,EAAO;AACH,oBAAIE,KAAKF,IAAIG,YAAJ,CAAiB,iBAAjB,CAAT;AACAD,mBAAGE,QAAH,CAAYC,MAAZ,GAAqB,IAArB;AACAH,mBAAGI,OAAH,CAAWD,MAAX,GAAoB,KAApB;AACA,oBAAG1B,GAAG4B,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,KAA5B,KAAoC,MAAvC,EAA8C;AAC1C9B,uBAAG+B,QAAH,CAAYC,SAAZ,CAAsB,SAAtB;AACH;AACJ;AACJ,SAVD;AAWH;;AAzDI,CAAT","file":"event_send.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\resources\\script\\lib","sourcesContent":["var WJFCommon = require(\"WJFCommon\");\r\ncc.Class({\r\n    extends: WJFCommon,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n       \r\n    },\r\n    command: function () {\r\n    \t //this.doSomethingBH({action:'buhua'},this);\r\n        /* 每次操作之后。向后端发送command事件，返回对应的command值，然后去匹配上面的值，并执行对应的事件\r\n            即后端返回的command为’joinroom‘，则执行指令为’joinroom‘的事件---this.joinroom_event\r\n        */\r\n        socket.on(\"command\" , function(result){\r\n            var data = self.getSelf().parse(result);\r\n            console.log(data.command);\r\n            console.log(data);\r\n            self.getSelf().route(data.command)(data , self);\r\n        });\r\n    },\r\n  \t/**\r\n     * 接受传送的 玩家列表（含AI）\r\n     */\r\n    players: function () {\r\n    \tsocket.on(\"players\" , function(result){\r\n            var data = self.getSelf().parse(result) ;\r\n        //     console.log('players');\r\n        //     console.log(data);\r\n        //     /**\r\n        //      * 处理 Players\r\n        //      */\r\n            self.getSelf().route(\"players\")(data, self);\r\n        });\r\n    },\r\n    talkOnSay: function () {\r\n        socket.on(\"talkOnSay\" , function(result){\r\n            self.talk_event(result,null) ;\r\n        });\r\n    },\r\n    /*\r\n    * 断开连接，发送事件\r\n    */\r\n    disconnect: function () {\r\n        cc.weijifen.socket.on(\"disconnect\" , function(){\r\n            let mjs = cc.find('Canvas');   \r\n            if(mjs){\r\n                var mj = mjs.getComponent('MajiangDataBind');\r\n                mj.duankai2.active = true;\r\n                mj.duankai.active = false;                \r\n                if(cc.sys.localStorage.getItem('dis')!='true'){                  \r\n                    cc.director.loadScene('majiang');\r\n                }\r\n            }         \r\n        });\r\n    },\r\n\r\n});\r\n"]}