{"version":3,"sources":["GameStartInit.js"],"names":["WJFCommon","require","cc","Class","extends","properties","right_ready","Node","left_ready","top_ready","current_ready","right_player","left_player","top_player","current_player","ZM","Prefab","FM","godcard","desk_cards","default","type","Label","one_card_panel","cards_panel","right_panel","cards_right","top_panel","cards_top","left_panel","cards_left","buhua_top","buhua_lef","buhua_right","buhua_my","takecards_one","takecards_left","takecards_right","onLoad","statics","players_event","data","context","find","getComponent","gameStartInit","sys","localStorage","setItem","players","length","weijifen","state","collect","killPlayers","readyNoActive","inx","arry","playersarray","i","time","createtime","push","id","user","mytime","playerNum","dong","publicData","peo","j","py","status","readyTrue","tablepos","playType","banker_event","temp","userid","bankers","banker","play_event","gameEvent","starttime","node","parent","active","gameStartInitNode","reinitGame","h","player","played","actions","action","loadding","destroy","bth","x","laizi","children","baopai","roomInfo","quanNum","getChildByName","_components","string","round","maxRound","wanfa","GameBase","gameModel","op","peoNum","moveTo","runAction","removeItem","exchange_state","temp_player","cards","decode","powerCard","csNode","sprite","Sprite","spriteFrame","cs1","width","setPosition","cs2","caishenCard","laiziZM","instantiate","LZH","init","laiziFM","buhua","buHua","console","log","playuser","buhuaModle","setTimeout","calcdesc_cards","deskcards","groupNums","pTimes","times","initMjCards","sabi","card","initPlayerHandCards","ani","Animation","maxvalue","maxvalluecard","playercards","temp_script","value","zIndex","initcardwidth","getItem","istake","ting","playerss","datas","currentting","tingAction","desk_card","deskcards_current_panel","isGang","a","concat","b","cardModle","sortNumber","sort","slice","selectaction_event","touchPlay","exchange_searchlight","deskcardss","initDeskCards","closeloadding","lgdong","playerscript","playerspool","put","splice","count","bankercount","fangwei","OPparent","int","player0","get","playerscript0","Number","match","String","playersss","desk_script","deskcards_left_panel","deskcards_right_panel","deskcards_top_panel","tingnoaction","destroycards","destroyPlayer","tingactivefalse","inintBuHuan","destroybuhuas","button","handCards","cardvalue","color","Color","Button","interactable","array","creator","handcard","deskcard","kong","handcards","csImageTop","target","enabled","reinit","cardpool","leftcards","rightcards","topcards","buhuaList","start","end","group","spec","cardarray","prefab","initOtherCards","cardsarray","height","take","cardNum","y","caishen","sortAllChildren","pid","back","opParent","findCardForKong","resNode","kcards","kaction","cardcolors","parseInt","cardtype","dans","cardUnit","mjvalue","setValue","cardNode"],"mappings":"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","file":"GameStartInit.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js\\gameStartInit","sourcesContent":["var WJFCommon = require(\"WJFCommon\");\r\ncc.Class({\r\n    extends: WJFCommon,\r\n\r\n    properties: {\r\n        right_ready: cc.Node,\r\n        left_ready: cc.Node,\r\n        top_ready:cc.Node,\r\n        current_ready:cc.Node,\r\n        right_player: cc.Node,\r\n        left_player: cc.Node,\r\n        top_player: cc.Node,\r\n        current_player:cc.Node,\r\n        ZM:cc.Prefab,\r\n        FM:cc.Prefab,\r\n        godcard:cc.Node,\r\n        desk_cards:{\r\n            default:null ,\r\n            type : cc.Label\r\n        },\r\n        one_card_panel:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        cards_panel:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        right_panel:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        cards_right:{\r\n            default:null ,\r\n            type : cc.Prefab\r\n        },\r\n        top_panel:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        cards_top:{\r\n            default:null ,\r\n            type : cc.Prefab\r\n        },\r\n        left_panel:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        cards_left:{\r\n            default:null ,\r\n            type : cc.Prefab\r\n        },\r\n        buhua_top:cc.Prefab,\r\n        buhua_lef:cc.Prefab,\r\n        buhua_right:cc.Prefab,\r\n        buhua_my:cc.Prefab,\r\n        takecards_one:{         //我的和 对家出的牌\r\n            default:null ,\r\n            type : cc.Prefab\r\n        },\r\n        takecards_left:{\r\n            default:null ,\r\n            type : cc.Prefab\r\n        },\r\n        takecards_right:{\r\n            default:null ,\r\n            type : cc.Prefab\r\n        },\r\n    },\r\n\r\n    //\r\n    onLoad: function () {\r\n    },\r\n    statics: {\r\n        /**\r\n         * \r\n         *\r\n         * 方位\r\n         *\r\n         *\r\n         * 色子点数\r\n         *\r\n         * 宝牌/财神\r\n         */\r\n        \r\n        //获取所有玩家信息\r\n        players_event:function(data,context){\r\n            context = cc.find(\"Canvas\").getComponent(\"MJDataBind\");\r\n            var gameStartInit = require('GameStartInit');\r\n            cc.sys.localStorage.setItem(players,data.players.length);\r\n            if(cc.weijifen.state =='init' ||cc.weijifen.state == 'ready'){\r\n                gameStartInit.collect(context) ;    //先回收资源，然后再初始化\r\n                gameStartInit.killPlayers(data);\r\n            }\r\n\r\n            //OK手势隐藏\r\n            context.readyNoActive(context);        \r\n            \r\n\r\n            var inx = 0 ;\r\n            context.arry = [];\r\n            var players = context.playersarray; \r\n            // player 是 配合 joinroom  joinroom 加入房间  立即显示  然后 player 记录数据   下一个玩家 根据 player 来完成之前的渲染 用joinroom 完成之后的   一旦完成joinroom  又发起player 进行存储\r\n            for(let i=0 ;i<data.players.length;i++){\r\n                if(data.players[i]!=null){\r\n                    var time = data.players[i].createtime;\r\n                    context.arry.push(time);\r\n                    if(data.players[i].id == cc.weijifen.user.id ){\r\n                        var mytime = context.arry.length;\r\n                    }\r\n                }\r\n            }\r\n            if(cc.weijifen.playerNum==2){\r\n                if(mytime==1){\r\n                    gameStartInit.dong(0);\r\n                    gameStartInit.publicData(0,data,'current',context.current_player,0,0,context);\r\n                    if(data.players.length==2){          \r\n                        gameStartInit.publicData(1,data,'top',context.top_player,1,2,context);\r\n                    }\r\n                }else{\r\n                    gameStartInit.dong(2);\r\n                    gameStartInit.publicData(0,data,'top',context.top_player,1,2,context);\r\n                    gameStartInit.publicData(1,data,'current',context.current_player,0,0,context);\r\n                }       \r\n            }else if(cc.weijifen.playerNum==3){\r\n                if(mytime==1){\r\n                    gameStartInit.dong(0);                \r\n                    gameStartInit.publicData(0,data,'current',context.current_player,0,0,context);\r\n                    if(data.players.length==2){          \r\n                        gameStartInit.publicData(1,data,'right',context.right_player,0,1,context);        \r\n                    }else if(data.players.length==3){\r\n                        gameStartInit.publicData(1,data,'right',context.right_player,0,1,context);        \r\n                        gameStartInit.publicData(2,data,'top',context.top_player,1,2,context);\r\n                    }\r\n                }else if(mytime==2){\r\n                    gameStartInit.dong(1);                \r\n                    gameStartInit.publicData(0,data,'top',context.top_player,1,2,context);\r\n                    gameStartInit.publicData(1,data,'current',context.current_player,0,0,context);\r\n                    if(data.players.length==3){\r\n                        gameStartInit.publicData(2,data,'right',context.right_player,0,1,context);        \r\n                    }\r\n                }else if(mytime==3){\r\n                    gameStartInit.dong(2);                \r\n                    gameStartInit.publicData(0,data,'right',context.right_player,0,1,context);\r\n                    gameStartInit.publicData(1,data,'top',context.top_player,1,2,context);\r\n                    gameStartInit.publicData(2,data,'current',context.current_player,0,0,context);\r\n                }\r\n            }else{\r\n                if(mytime==1){\r\n                    gameStartInit.dong(0);                \r\n                    gameStartInit.publicData(0,data,'current',context.current_player,0,0,context);\r\n                    if(data.players.length==2){          \r\n                        gameStartInit.publicData(1,data,'right',context.right_player,0,1,context);         \r\n                    }else if(data.players.length ==3){\r\n                        gameStartInit.publicData(1,data,'right',context.right_player,0,1,context);\r\n                        gameStartInit.publicData(2,data,'top',context.top_player,1,2,context);                         \r\n                    }else if(data.players.length ==4){\r\n                        gameStartInit.publicData(1,data,'right',context.right_player,0,1,context);    \r\n                        gameStartInit.publicData(2,data,'top',context.top_player,1,2,context);                \r\n                        gameStartInit.publicData(3,data,'left',context.left_player,2,3,context);                                      \r\n                    }\r\n                }else if(mytime == 2){\r\n                    gameStartInit.dong(3);                \r\n                    gameStartInit.publicData(0,data,'left',context.left_player,2,3,context);\r\n                    gameStartInit.publicData(1,data,'current',context.current_player,0,0,context);         \r\n                    if(data.players.length ==3){\r\n                        gameStartInit.publicData(2,data,'right',context.right_player,0,1,context);\r\n                    }else if(data.players.length ==4){\r\n                        gameStartInit.publicData(2,data,'right',context.right_player,0,1,context);          \r\n                        gameStartInit.publicData(3,data,'top',context.top_player,1,2,context);         \r\n                    }\r\n                }else if(mytime ==3){\r\n                    gameStartInit.dong(2);                \r\n                    gameStartInit.publicData(0,data,'top',context.top_player,1,2,context);  \r\n                    gameStartInit.publicData(1,data,'left',context.left_player,2,3,context);\r\n                    gameStartInit.publicData(2,data,'current',context.current_player,0,0,context);                     \r\n                    if(data.players.length ==4){\r\n                        gameStartInit.publicData(3,data,'right',context.right_player,0,1,context);       \r\n                    }\r\n                }else if(mytime == 4){\r\n                    gameStartInit.dong(1);                \r\n                    gameStartInit.publicData(0,data,'right',context.right_player,0,1,context);\r\n                    gameStartInit.publicData(1,data,'top',context.top_player,1,2,context);\r\n                    gameStartInit.publicData(2,data,'left',context.left_player,2,3,context);               \r\n                    gameStartInit.publicData(3,data,'current',context.current_player,0,0,context);\r\n                }\r\n            }     \r\n            var peo = context.playersarray;\r\n            if(cc.weijifen.state =='ready' || cc.weijifen.state =='init'){\r\n                //context.windFW(context);\r\n                for(let i = 0 ; i< data.players.length;i++){\r\n                    \r\n                    for(let j=0; j<peo.length; j++){\r\n                        var py = peo[j].getComponent('MaJiangPlayer');\r\n                        if(data.players[i].id == py.data.id){\r\n                            if(data.players[i].status&&data.players[i].status=='READY'){\r\n                                gameStartInit.readyTrue(py.tablepos,context);                   \r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(cc.weijifen.state !='ready' && cc.weijifen.state !='init'){\r\n                if(cc.weijifen.playType != \"LG\"){\r\n                    // context.windFW(context);\r\n                }\r\n            }\r\n        },\r\n\r\n         /**\r\n         * 接受新的庄家数据\r\n         * @param data\r\n         * @param context\r\n         */\r\n        banker_event:function(data, context){\r\n            context = cc.find('Canvas').getComponent('MJDataBind');\r\n            for(var inx = 0 ; inx<context.playersarray.length ; inx++){\r\n                let temp = context.playersarray[inx].getComponent(\"MaJiangPlayer\") ;\r\n                if(data.userid == cc.weijifen.user.id){\r\n                    cc.weijifen.bankers =true;\r\n                }else{\r\n                    cc.weijifen.bankers =false;\r\n                }\r\n                if(temp.data.id == data.userid){\r\n                    cc.weijifen.banker = data.userid;\r\n                    temp.banker(); \r\n                    break ;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 接收发牌信息，需要根据玩家位置确定是哪家的牌\r\n         * @param data\r\n         * @param context\r\n         */\r\n        play_event:function(data , context){\r\n            context = cc.find('Canvas').getComponent('MJDataBind');\r\n            var gameEvent = require('GameEvent');\r\n            //比赛倒计时设置为隐藏\r\n            if(context.starttime.node.parent.active ==true){\r\n                context.starttime.node.parent.active =false;\r\n            }\r\n            var gameStartInit = require('GameStartInit');\r\n            var gameEvent = require('GameEvent');\r\n            var gameStartInitNode = cc.find('Canvas/js/GameStartInit').getComponent('GameStartInit');\r\n            gameStartInit.reinitGame(context);\r\n            for(let h=0 ;h<data.players.length;h++){\r\n                var players = data.players[h];\r\n                //这里有一个判定 如果是重连的话 就不用setouttime   \r\n                if(data.player.played||players.played||data.player.actions.length>0||players.action){\r\n                    cc.sys.localStorage.setItem('cb','true');\r\n                }\r\n            }\r\n            context.loadding();                                                \r\n            if(cc.find('Canvas/summary')){\r\n                cc.find('Canvas/summary').destroy();\r\n            }\r\n            {\r\n                cc.sys.localStorage.setItem('clear','true');\r\n                var bth = cc.find('Canvas/bg/center/button/readybtn');\r\n                bth.active =true;  \r\n                bth.x= -10;\r\n                var laizi = cc.find('Canvas/cards/tesucards/baocard/card').children\r\n                if(laizi){\r\n                    for(let i =0 ; i < laizi.length ; i ++ ){\r\n                        cc.find('Canvas/cards/tesucards/baocard/card').children[i].destroy();\r\n                    }\r\n                }     \r\n            }\r\n            if(cc.find('Canvas/notice')){\r\n                cc.sys.localStorage.setItem('notice','true');\r\n                cc.find('Canvas/notice').active = false;\r\n            }\r\n            if(cc.weijifen.playType != \"LG\"){\r\n                // context.windFW(context);//显示东南西北\r\n            }\r\n            cc.weijifen.baopai = null;\r\n            context.roomInfo.active = true;    \r\n            let quanNum = cc.find('Canvas/roomNum').getChildByName('quan')._components[0];// quan节点            \r\n            quanNum.string = (data.round+1) +'/'+context.maxRound;//圈数\r\n            let wanfa = cc.find('Canvas/rules').getChildByName('label')._components[0];// quan节点   \r\n            if(cc.weijifen.GameBase.gameModel == 'jx'){\r\n                wanfa.string = '座风 座花 双头子 风字百搭 19百搭 漂百搭';\r\n            }else{\r\n                wanfa.string = data.op;\r\n            }\r\n            cc.weijifen.wanfa = data.op;\r\n            context.readyNoActive(context);   \r\n            /**\r\n             * 改变状态，开始发牌\r\n             * \r\n             */\r\n            if(cc.weijifen.playerNum){\r\n                var peoNum = cc.weijifen.playerNum;\r\n            }\r\n            //开局后  头像位移到相应位置\r\n            {\r\n            var action = cc.moveTo(0.2,570,80);\r\n            context.right_player.runAction(action);\r\n            var action = cc.moveTo(0.2,-570,80);\r\n            context.left_player.runAction(action);\r\n            var action = cc.moveTo(0.2,439,324);\r\n            context.top_player.runAction(action);\r\n            }\r\n            //游戏开始 干掉打牌和听得缓存\r\n            \r\n            cc.sys.localStorage.removeItem('take');\r\n            cc.sys.localStorage.removeItem('ting') ;        \r\n            context.exchange_state(\"begin\" , context);\r\n            var temp_player = data.player ;\r\n            var cards = context.decode(temp_player.cards);\r\n            \r\n\r\n            if(cc.weijifen.GameBase.gameModel == 'wz'){\r\n                if(temp_player.powerCard){\r\n                    var powerCard = context.decode(temp_player.powerCard);\r\n                    cc.weijifen.powerCard = powerCard;\r\n                    context.csNode.active = true;\r\n                    //切换财神图片\r\n                    var sprite = context.csNode.getComponent(cc.Sprite);\r\n                    if(powerCard.length == 1){//财神个数\r\n                        sprite.spriteFrame = context.cs1;\r\n                        context.csNode.width = 65;\r\n                        context.csNode.setPosition(-568,301);\r\n                        gameStartInitNode.godcard.children[1].x = -570;\r\n                        \r\n                    }else{\r\n                        sprite.spriteFrame = context.cs2;\r\n                        context.csNode.width = 110; \r\n                        context.csNode.setPosition(-551,301);\r\n                        gameStartInitNode.godcard.children[1].x = -555;                    \r\n                    }\r\n                    if(powerCard&&powerCard.length>0){\r\n                        for(let i=0 ; i<cc.find('Canvas/cards/tesucards/baocard/card').children.length;i++){\r\n                            cc.find('Canvas/cards/tesucards/baocard/card').children[i].destroy();\r\n                        }\r\n                        cc.weijifen.baopai = powerCard;\r\n                        for(let i= 0 ; i<powerCard.length;i++){\r\n                            cc.weijifen.caishenCard += powerCard[i]+\",\";\r\n                            var laiziZM = cc.instantiate(gameStartInitNode.ZM);\r\n                            laiziZM.parent = gameStartInitNode.godcard.children[0];\r\n                            var LZH  = laiziZM.getComponent('DeskCards');\r\n                            LZH.init(powerCard[i],'B',true);\r\n                        }\r\n                    }\r\n                }\r\n            }else{\r\n                cc.find('Canvas/cards/tesucards/baocard').active =true;\r\n                if(data.player.powerCard){\r\n                    let cards = context.decode(data.player.powerCard);\r\n                    //cc.find('Canvas/cards/tesucards/baocard/baocard/card').children[0].destroy();\r\n                    for(let i= 0 ; i<cards.length;i++){\r\n                        var laiziZM = cc.instantiate(gameStartInitNode.ZM);\r\n                        laiziZM.parent = gameStartInitNode.godcard.children[0];\r\n                        var LZH  = laiziZM.getComponent('DeskCards');\r\n                        LZH.init(cards[i],'B',true);\r\n                    }\r\n                }else{\r\n                    cc.find('Canvas/cards/tesucards/baocard/card').x = -560;                \r\n                    var laiziFM = cc.instantiate(gameStartInitNode.FM);\r\n                    var LZH = laiziFM.getComponent('DeskCards');\r\n                    LZH.init(-3,'Z',true);\r\n                    laiziFM.parent = gameStartInitNode.godcard.children[0];\r\n                }\r\n            }\r\n            //当前玩家补花 data.player\r\n            var buhua;\r\n            if(temp_player.buHua){\r\n                buhua = context.decode(temp_player.buHua);//补花\r\n                // buhua = [-35,-34];\r\n                console.log(buhua);\r\n                let temp = gameStartInit.player(temp_player.playuser, context);\r\n                //console.log(temp.tablepos);\r\n                for(var i = 0;i<buhua.length;i++){\r\n                    gameStartInit.buhuaModle(buhua[i],temp.tablepos,'',temp.tablepos,context,\"\");\r\n                }\r\n            }\r\n\r\n            //其他玩家补花 data.players\r\n            for(var i = 0; i <data.players.length;i++){\r\n                // data.players[i].buHua = 1;\r\n                if(data.players[i].buHua){\r\n                    // buhua = context.decode(data.players[i].buHua);//补花\r\n                    // buhua = [-35,-34];\r\n                    console.log(buhua);\r\n                    let temp = gameStartInit.player(data.players[i].playuser, context);\r\n                    console.log(temp.tablepos);\r\n                    for(var j = 0;j<buhua.length;j++){\r\n                        gameStartInit.buhuaModle(buhua[j],temp.tablepos,'',temp.tablepos,context,\"\");\r\n                    }\r\n                }\r\n            }\r\n            \r\n\r\n            //var cards = temp_player.cards;\r\n            setTimeout(function(){\r\n                gameStartInit.calcdesc_cards(gameStartInitNode , 136 , data.deskcards) ;\r\n            } , 0) ;\r\n            var groupNums = 0 ;\r\n            var pTimes;\r\n            if(cc.weijifen.GameBase.gameModel =='wz'){\r\n                pTimes = 5;\r\n            }else{\r\n                pTimes = 4;\r\n            }\r\n            for(var times = 0 ; times < pTimes ; times++){\r\n                for(let h=0 ;h<data.players.length;h++){\r\n                    var players = data.players[h];\r\n                    //这里有一个判定 如果是重连的话 就不用setouttime   \r\n                    if(data.player.played||players.played||data.player.actions.length>0||players.action){\r\n                        //cc.sys.localStorage.setItem('cb','true');\r\n                        gameStartInit.initMjCards(groupNums , context , cards , temp_player.banker) ;\r\n                        /**\r\n                         * 初始化其他玩家数据\r\n                         */\r\n                        var inx = 0 ;\r\n                        var sabi = 0;\r\n                        for(var i=0 ; i<data.players.length ; i++){\r\n                            if(data.players[i].playuser != cc.weijifen.user.id){               \r\n                                //通过判断 id 来确定位置上的牌的张数\r\n                                var arry = context.playersarray;\r\n                                for(let j =0 ; j< arry.length;j++){\r\n                                    var card = arry[j].getComponent('MaJiangPlayer');                            \r\n                                    if(data.players[i].playuser==card.data.id&&card.tablepos!='current'){\r\n                                        if(card.tablepos=='left'){\r\n                                            sabi = 2;\r\n                                            break;\r\n                                        }else if(card.tablepos=='top'){\r\n                                            sabi = 1;\r\n                                            break;\r\n                                        }   \r\n                                        sabi=0;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                gameStartInit.initPlayerHandCards(groupNums , data.players[inx++].deskcards , sabi,context ,false, data.players[i].banker,peoNum);\r\n                            }\r\n                        }\r\n                        groupNums = groupNums + 1 ;\r\n                    }else{\r\n                        setTimeout(function(){\r\n                            gameStartInit.initMjCards(groupNums , context , cards , temp_player.banker) ;\r\n                            /**\r\n                             * 初始化其他玩家数据\r\n                             */\r\n                            var inx = 0 ;\r\n                            var sabi = 0;\r\n                            for(var i=0 ; i<data.players.length ; i++){\r\n                                if(data.players[i].playuser != cc.weijifen.user.id){\r\n                                    \r\n                                    //通过判断 id 来确定位置上的牌的张数\r\n                                    var arry = context.playersarray;\r\n                                    for(let j =0 ; j< arry.length;j++){\r\n                                        var card = arry[j].getComponent('MaJiangPlayer');                            \r\n                                        if(data.players[i].playuser==card.data.id&&card.tablepos!='current'){\r\n                                            if(card.tablepos=='left'){\r\n                                                sabi = 2;\r\n                                                break;\r\n                                            }else if(card.tablepos=='top'){\r\n                                                sabi = 1;\r\n                                                break;\r\n                                            }   \r\n                                            sabi=0;\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                    gameStartInit.initPlayerHandCards(groupNums , data.players[inx++].deskcards , sabi,context ,false, data.players[i].banker,peoNum);\r\n                                }\r\n                            }\r\n                            groupNums = groupNums + 1 ;\r\n                        } , (times+1) * 200);\r\n                    }    \r\n                }\r\n            }\r\n            setTimeout(function(){\r\n                // cc.weijifen.audio.playSFX('shuffle.mp3');            \r\n                let ani = gameStartInitNode.cards_panel.getComponent(cc.Animation);\r\n                // ani.play(\"majiang_reorder\") ;\r\n                var maxvalue  = -100;\r\n                var maxvalluecard ;\r\n                //排序 \r\n                for(var i=0 ; i<context.playercards.length ; i++ ){\r\n                    if(context.playercards[i].children[1].active == false){\r\n                        let temp_script = context.playercards[i].getComponent(\"HandCards\") ;\r\n                        if(temp_script.value >= 0){\r\n                            context.playercards[i].zIndex = temp_script.value ;\r\n                        }else{\r\n                            context.playercards[i].zIndex = 200+ temp_script.value ;\r\n                        }\r\n                        if(context.playercards[i].zIndex > maxvalue){\r\n                            maxvalue = context.playercards[i].zIndex ;\r\n                            maxvalluecard = context.playercards[i] ;\r\n                        } \r\n                    }\r\n\r\n                }\r\n                gameStartInit.initcardwidth(); \r\n                if(temp_player.banker == true&&!data.player.played){\r\n                    //maxvalluecard.getComponent(\"HandCards\").lastone() ;\r\n                }         \r\n            } , 1000);\r\n            setTimeout(function(){\r\n                if(cc.sys.localStorage.getItem('cb')!='true'){\r\n                    context.exchange_state(\"play\" , context);                \r\n                }\r\n            } , 1500)\r\n\r\n            /**\r\n             * 统一处理排序 的动画\r\n             */\r\n\r\n            /**\r\n             * 初始化状态，首个玩家加入，然后开始等待其他玩家 ， 如果是 恢复数据， 则不会进入\r\n             */\r\n            //gameStartInit.statusbtn.active = true ;\r\n            //ljh改  神牌\r\n            \r\n                \r\n            \r\n            setTimeout(function(){\r\n                //重连判断action\r\n                var istake =false;\r\n                for(let i=0;i<data.players.length;i++){\r\n                    if(data.players[i].played){\r\n                        istake =true;\r\n                    }\r\n                    if(data.players[i].actions.length>0){\r\n                        istake=true;\r\n                    }\r\n                    if(data.players[i].ting){\r\n                        let playerss = gameStartInit.player(data.players[i].playuser , context);\r\n                        context[playerss.tablepos+'ting'].active = true;\r\n                    }\r\n                }\r\n                if(data.player.banker == true){\r\n                    let datas ={};\r\n                    datas.userid = data.player.playuser;\r\n                    gameStartInit.banker_event(datas,context);\r\n                }\r\n                if(data.player.ting){\r\n                    context.currentting.active = true ; \r\n                    cc.sys.localStorage.setItem('alting','true');\r\n                    cc.sys.localStorage.setItem('altings','true');\r\n                    cc.sys.localStorage.setItem('take','true')\r\n                    context.tingAction(true);                \r\n                }\r\n                //如果自己有已经打的牌或者其他人有打牌 或者有action的时候\r\n                if(data.player.played||istake||data.player.actions.length>0){\r\n                    cc.sys.localStorage.setItem('cl','true');\r\n                    //重连判断deskcard\r\n                    if(data.player.played){\r\n                        var deskcards  = context.decode(data.player.played);\r\n                        for(let i=0;i <deskcards.length;i++){\r\n                            let desk_card = cc.instantiate(gameStartInitNode.takecards_one);\r\n                            let temp = desk_card.getComponent(\"DeskCards\");\r\n                            temp.init(deskcards[i],'B');\r\n                            context.deskcards.push(desk_card);\r\n                            desk_card.parent = context.deskcards_current_panel;\r\n                        }\r\n                    }\r\n                    var action = data.player.actions;\r\n                    for(let i = 0;i< action.length;i++){\r\n                        var isGang = false;\r\n                        var cards = context.decode(action[i].card);\r\n                        //console.log(cards);\r\n                        \r\n                        if(action[i].type =='an'){\r\n                            isGang =true;\r\n                        }\r\n                        if(cards.length<4||isGang||action[i].action=='gang'||action[i].action=='peng'||action[i].action=='chi'){\r\n                            if(action[i].action=='gang'&&cards.length==1){\r\n                                let a =cards.concat(cards);\r\n                                let b = a.concat(a)\r\n                                gameEvent.cardModle(b,cc.find('Canvas/cards/handcards/current/kongcards'),isGang,'',context,action[i].action);  \r\n                            }else{\r\n                                function sortNumber(a,b){return a - b}\r\n                                cards.sort(sortNumber);\r\n                                gameEvent.cardModle(cards,cc.find('Canvas/cards/handcards/current/kongcards'),isGang,'',context,action[i].action);  \r\n                            }\r\n                        }else {\r\n                            var a = cards.slice(0,3);\r\n                            gameEvent.cardModle(a,cc.find('Canvas/cards/handcards/current/kongcards'),isGang,'',context,action[i].action);\r\n                            for(let h =3 ; h<cards.length; h++){\r\n                                gameEvent.selectaction_event({userid:cc.weijifen.user.id,cards:[cards[h]],card:-1,action:'dan'},context);            \r\n                            }            \r\n                        }\r\n                    }\r\n                }  \r\n                    //重连判断 其他人的desk和action\r\n                    for(let i=0 ; i< data.players.length;i++){\r\n                        //判断谁是庄家\r\n                    var player = gameStartInit.player(data.players[i].playuser, context);\r\n                    var datas={}\r\n                    if(data.players[i].banker==true){\r\n                        datas.userid = data.players[i].playuser;\r\n                        gameStartInit.banker_event(datas,context);\r\n                    }\r\n                    //其他玩家的kong 牌\r\n                    if(data.touchPlay ){\r\n                        let player = gameStartInit.player(data.touchPlay , context)\r\n                        context.exchange_searchlight(player.tablepos , context);\r\n                        if(data.touchPlay == cc.weijifen.user.id){\r\n                            cc.sys.localStorage.setItem('take','true');\r\n                        }   \r\n                    }\r\n                    if(!data.player.played&&data.player.banker){\r\n                        //cc.sys.localStorage.setItem('take','true');\r\n                    }\r\n                    if(data.players[i].actions.length>0){            \r\n                        var action = data.players[i].actions;                    \r\n                        for(let j =0 ; j< action.length ;j++){\r\n                            var isGang =false;\r\n                            var cards = context.decode(action[j].card);\r\n                            \r\n                            if(action[j].type =='an'){\r\n                                isGang =true;\r\n                            }\r\n                            if(cards<4||isGang||action[j].action=='gang'||action[j].action=='peng'||action[j].action=='chi'){\r\n                                if(action[j].action=='gang'&&cards.length==1){\r\n                                    let a =cards.concat(cards);\r\n                                    let b = a.concat(a)\r\n                                    gameEvent.cardModle(b,cc.find('Canvas/cards/handcards/'+player.tablepos+'/kongcards'),isGang,player.tablepos,context,action[j].action);   \r\n                                }else{\r\n                                    function sortNumber(a,b){return a - b}\r\n                                    cards.sort(sortNumber);\r\n                                    gameEvent.cardModle(cards,cc.find('Canvas/cards/handcards/'+player.tablepos+'/kongcards'),isGang,player.tablepos,context,action[j].action);   \r\n                                }\r\n                                }else {\r\n                                let a = cards.slice(0,3);\r\n                                gameEvent.cardModle(a,cc.find('Canvas/cards/handcards/'+player.tablepos+'/kongcards'),isGang,player.tablepos,context,action[j].action);\r\n                                for(let h =3 ; h<cards.length; h++){\r\n                                    gameEvent.selectaction_event({userid:player.data.id,cards:[cards[h]],card:-1,action:'dan'},context)                             \r\n                                }                        \r\n                            }                \r\n                        }\r\n                    }\r\n                    //其他玩家的桌牌     \r\n                    if(data.players[i].played){\r\n                        var deskcardss = context.decode(data.players[i].played); \r\n                        var player = gameStartInit.player(data.players[i].playuser, context);\r\n                        for(let j =0 ; j< deskcardss.length;j++){\r\n                            gameStartInit.initDeskCards(deskcardss[j],player.tablepos,context)\r\n                        }\r\n                    }\r\n                } \r\n                    context.closeloadding();\r\n                    if(cc.weijifen.playType =='LG'){\r\n                        context.lgdong(data);\r\n                    }\r\n            },2000)      \r\n        },\r\n\r\n        /**\r\n         * 回收系统资源，用于清理资源\r\n         * @param context\r\n         */\r\n        collect:function(context){\r\n            for(var i=0 ; i<context.playersarray.length ; ){\r\n                let player = context.playersarray[i] ;\r\n                var playerscript = player.getComponent(\"MaJiangPlayer\");\r\n                if(playerscript.data.id != cc.weijifen.user.id){       //当前 玩家不回收，最终 Destroy 的时候会被回收\r\n                    context.playerspool.put(player);\r\n                    context.playersarray.splice(i,1) ;\r\n                }else{\r\n                    i++ ;\r\n                }\r\n            }\r\n        },\r\n        dong: function(count){\r\n            cc.weijifen.bankercount = count;         \r\n        },\r\n        publicData:function(inx,data,fangwei,OPparent,int,count,context){\r\n            if(cc.sys.localStorage.getItem(fangwei)!=data.players[inx].id){\r\n                let player0 = context.playerspool.get();\r\n                let playerscript0 = player0.getComponent(\"MaJiangPlayer\");\r\n                player0.setPosition(0,0);\r\n                context.playersarray.push(player0) ;\r\n                player0.parent = OPparent;\r\n                playerscript0.init(data.players[inx] , int , fangwei,count);                \r\n                cc.sys.localStorage.setItem(fangwei,data.players[inx].id);\r\n                cc.sys.localStorage.setItem('count',count);                                  \r\n            }   \r\n        },\r\n        killPlayers: function(data){\r\n            cc.sys.localStorage.removeItem('top');\r\n            cc.sys.localStorage.removeItem('left');\r\n            cc.sys.localStorage.removeItem('right');\r\n            let players = data.players.length;\r\n            let count = cc.sys.localStorage.getItem('count');\r\n            if(Number(count)==players&&cc.weijifen.match == 'true'){\r\n                cc.sys.localStorage.setItem('count',String(Number(count)-1));\r\n            }\r\n\r\n            cc.weijifen.playersss = data.players.length;\r\n        },\r\n        initDeskCards: function(card,fangwei,context){\r\n            var gameStartInitNode = cc.find('Canvas/js/GameStartInit').getComponent('GameStartInit');\r\n            if(fangwei =='left'){\r\n                let desk_card = cc.instantiate(gameStartInitNode.takecards_left);\r\n                let desk_script = desk_card.getComponent(\"DeskCards\");\r\n                desk_script.init(card,'L');\r\n                desk_card.parent = context.deskcards_left_panel ;\r\n            }else if(fangwei == 'right'){\r\n                let desk_card = cc.instantiate(gameStartInitNode.takecards_right);\r\n                let desk_script = desk_card.getComponent(\"DeskCards\");\r\n                desk_script.init(card,'R');\r\n                desk_card.parent = context.deskcards_right_panel ;\r\n            }else if(fangwei=='top'){\r\n                let desk_card = cc.instantiate(gameStartInitNode.takecards_one);\r\n                let desk_script = desk_card.getComponent(\"DeskCards\");\r\n                desk_script.init(card,'B');\r\n                desk_card.parent = context.deskcards_top_panel ;\r\n            }   \r\n        },\r\n        reinitGame: function(context){\r\n            context = cc.find('Canvas').getComponent('MJDataBind');\r\n            var gameStartInit = require('GameStartInit');\r\n            gameStartInit.tingnoaction();        \r\n            gameStartInit.destroycards('current',context);\r\n            gameStartInit.destroycards('left',context);\r\n            gameStartInit.destroycards('right',context);\r\n            gameStartInit.destroycards('top',context);\r\n            gameStartInit.destroyPlayer(context);  \r\n            gameStartInit.tingactivefalse();  \r\n            gameStartInit.inintBuHuan();\r\n            //清空补花数据\r\n            gameStartInit.destroybuhuas('left',context);\r\n            gameStartInit.destroybuhuas('right',context);\r\n            gameStartInit.destroybuhuas('top',context);\r\n            gameStartInit.destroybuhuas('current',context);\r\n\r\n            cc.sys.localStorage.removeItem('altake');\r\n            cc.sys.localStorage.removeItem('alting');\r\n            cc.sys.localStorage.removeItem('altings');\r\n            cc.sys.localStorage.removeItem('guo');\r\n            cc.sys.localStorage.removeItem('cb');        \r\n            \r\n         },\r\n\r\n        tingnoaction:function(){\r\n            let length =cc.find('Canvas/cards/handcards/current/currenthandcards').children.length;\r\n            for(let i =0; i<length;i++){\r\n                let cards =cc.find('Canvas/cards/handcards/current/currenthandcards').children[i];\r\n                let button = cc.find('Canvas/cards/handcards/current/currenthandcards').children[i].children[0];\r\n                let handCards = cards.getComponent(\"HandCards\");\r\n                handCards.cardvalue.color = new cc.Color(255, 255, 255);\r\n                button.getComponent(cc.Button).interactable= true;\r\n            }\r\n            if(cc.find('Canvas/tingselect')){\r\n                cc.find('Canvas/tingselect').active = false;\r\n            }\r\n        },\r\n        destroyPlayer: function(context){\r\n            var array = context.playersarray;\r\n            for(let i=0;i<array.length;i++){\r\n                array[i].getComponent('MaJiangPlayer').creator.active =false;\r\n                //array[i].getComponent('MaJiangPlayer').nowind();\r\n            }\r\n         },\r\n        destroycards :function(fangwei,context){\r\n            let handcard =cc.find('Canvas/cards/handcards/'+fangwei+'/'+fangwei+'handcards').children.length;\r\n            let deskcard =cc.find('Canvas/cards/deskcards/'+fangwei+'').children.length;\r\n            let kong =cc.find('Canvas/cards/handcards/'+fangwei+'/kongcards').children.length;\r\n            if(fangwei == 'current'){\r\n                for(let i =0 ; i< handcard; i++){\r\n                    let handcards = context.playercards[i].getComponent(\"HandCards\");\r\n                    handcards.csImageTop.active = false;\r\n                    handcards.target.zIndex = 0;\r\n                    handcards.target.children[0].getComponent(cc.Button).enabled = true;\r\n                    handcards.cardvalue.color = new cc.Color(255, 255, 255);\r\n                    handcards.reinit();\r\n                    context.cardpool.put(context.playercards[i]);\r\n                    }\r\n                    context.playercards = [];\r\n            }else{\r\n                for(let i =0 ; i< handcard; i++){\r\n                    cc.find('Canvas/cards/handcards/'+fangwei+'/'+fangwei+'handcards').children[i].destroy();\r\n                }\r\n                    if(fangwei == 'leftdesk'){\r\n                       context.leftcards=[];\r\n                    }else if(fangwei == 'rightdesk'){\r\n                       context.rightcards=[];\r\n                    }else{\r\n                       context.topcards=[];                                                          \r\n                    }   \r\n            }\r\n            for(let i = 0;i< deskcard;i++ ){\r\n                cc.find('Canvas/cards/deskcards/'+fangwei+'/'+fangwei+'handcards').children[i].destroy();\r\n                    \r\n            }\r\n            for(let i = 1;i< kong;i++ ){\r\n                cc.find('Canvas/cards/handcards/'+fangwei+'/kongcards').children[i].destroy();\r\n            }\r\n        },\r\n        tingactivefalse: function(){\r\n             // gameStartInit.currentting.active =false;\r\n             // gameStartInit.topting.active =false;\r\n             // gameStartInit.rightting.active =false;\r\n             // gameStartInit.leftting.active =false;\r\n         },\r\n         inintBuHuan: function(){\r\n            cc.weijifen.powerCard = null;  \r\n         },\r\n         destroybuhuas:function(fangwei,context){\r\n            let buhua,buhuaList;\r\n            buhuaList = cc.find('Canvas/cards/tesucards/huacard/'+fangwei+'/buhua');\r\n            for(let i = 0;i< buhuaList.children.length;i++ ){\r\n                buhuaList.children[i].destroy(); \r\n            }\r\n         },\r\n         /**\r\n         * 显示 剩余牌\r\n         * @param start\r\n         * @param end\r\n         */\r\n        calcdesc_cards:function(context ,start , end){\r\n            var gameStartInit = require('GameStartInit');\r\n            start = start - 1 ;\r\n            if(start > end){\r\n                context.desk_cards.string = start ;\r\n                setTimeout(function(){\r\n                    gameStartInit.calcdesc_cards(context , start , end ) ;\r\n                } , 5) ;\r\n            }\r\n        },\r\n\r\n        initMjCards:function(group , context , cards , banker){\r\n            var gameStartInitNode = cc.find('Canvas/js/GameStartInit').getComponent('GameStartInit');\r\n            //context = cc.find('Canvas').getComponent('MajiangDataBind');        \r\n            for(var i=group*4 ; i< cards.length && i<(group+1)*4 ; i++){\r\n                if(context.cardpool){\r\n                    let temp = context.cardpool.get();\r\n                    let temp_script = temp.getComponent(\"HandCards\") ;\r\n        \r\n                    context.playercards.push(temp);\r\n        \r\n                    temp_script.init(cards[i]);\r\n        \r\n                    if(banker == true && i == (cards.length - 1)){\r\n                        temp.parent = gameStartInitNode.one_card_panel ;  //庄家的最后一张牌\r\n                    }else{\r\n                        temp.parent = gameStartInitNode.cards_panel ;\r\n                    }\r\n        \r\n                    setTimeout(function(){\r\n                        temp.parent = gameStartInitNode.cards_panel ;\r\n                    } , 200) ;\r\n                }   \r\n            }\r\n        },\r\n\r\n        /**\r\n         * 初始化其他玩家手牌，\r\n         * @param groupNums\r\n         * @param deskcards\r\n         * @param inx\r\n         * @param context\r\n         * @param spec 是否特殊的牌，即刚抓起来的牌\r\n         */\r\n        initPlayerHandCards:function(groupNums , deskcards , inx , context , spec,banker,peoNum){\r\n            var gameStartInit = require('GameStartInit');\r\n            var gameStartInitNode = cc.find('Canvas/js/GameStartInit').getComponent('GameStartInit');\r\n            let parent = gameStartInitNode.right_panel;\r\n            let cardarray = context.rightcards;\r\n            let prefab = gameStartInitNode.cards_right ;\r\n            if(peoNum == 2){\r\n                parent = gameStartInitNode.top_panel  ;\r\n                cardarray = context.topcards   ;\r\n                prefab = gameStartInitNode.cards_top ;\r\n            }else if(peoNum ==3&&inx ==1){\r\n                parent = gameStartInitNode.top_panel  ;\r\n                cardarray = context.topcards   ;\r\n                prefab = gameStartInitNode.cards_top ;\r\n            }else{   \r\n                if(inx == 1){\r\n                    parent = gameStartInitNode.top_panel  ;\r\n                    cardarray = context.topcards   ;\r\n                    prefab = gameStartInitNode.cards_top ;\r\n                }else if(inx == 2){\r\n                    parent = gameStartInitNode.left_panel  ;\r\n                    cardarray = context.leftcards;\r\n                    prefab = gameStartInitNode.cards_left ;\r\n                }\r\n            }\r\n          \r\n            gameStartInit.initOtherCards(groupNums , context , deskcards , prefab , cardarray , parent , spec , inx,banker);    //左侧，\r\n        },\r\n        initOtherCards:function(group , context , cards , prefab , cardsarray, parent , spec , inx,banker){\r\n            context = cc.find('Canvas').getComponent('MJDataBind');        \r\n            for(let i = 0 ; i < parent.children.length; i ++){\r\n                parent.children[i].getComponent('SpecCards').node.height = 0;\r\n                parent.children[i].getComponent('SpecCards').node.width = 0 ;\r\n            }\r\n            for(var i=group*4 ; i< cards && i<(group+1)*4 ; i++) {\r\n                let temp = cc.instantiate(prefab) ;\r\n                let temp_script = temp.getComponent(\"SpecCards\") ;\r\n                temp_script.init(spec,inx);\r\n\r\n                temp.parent = parent ;\r\n                cardsarray.push(temp) ;\r\n            }\r\n        },\r\n        /**\r\n         * 此为恢复麻将状态  1、宽度 2、缩回来 3、颜色 \r\n         * ting  true 为听牌时的状态\r\n         */\r\n        initcardwidth: function(ting){\r\n            let length  = cc.find('Canvas/cards/handcards/current/currenthandcards').children.length; \r\n            for(let i =0; i<length;i++){\r\n                let target =cc.find('Canvas/cards/handcards/current/currenthandcards').children[i];\r\n                let card = target.getComponent('HandCards');\r\n                card.take=false;\r\n                if(cc.weijifen.cardNum > 14){ \r\n                    card.cardvalue.width = 67.5;\r\n                    card.cardvalue.height = 102.5;\r\n                    target.width=65.5;\r\n                }else{\r\n                    target.width=73;    \r\n                }\r\n                card.target.y = 0; \r\n                //ting牌的时候 和 财神的牌是灰色的   听牌听完恢复 财神为持续状态\r\n                if(!ting&&!card.caishen&&cc.sys.localStorage.getItem('ting')!='true'){\r\n                    card.cardvalue.color = new cc.Color(255, 255, 255); \r\n                }\r\n            }\r\n            cc.find('Canvas/cards/handcards/current/currenthandcards').sortAllChildren();\r\n        },\r\n        player:function(pid , context){\r\n            let player ;\r\n            context= cc.find('Canvas').getComponent('MJDataBind');\r\n            for(var inx = 0 ; inx<context.playersarray.length ; inx++){\r\n                let temp = context.playersarray[inx].getComponent(\"MaJiangPlayer\") ;\r\n                if(temp.data.id == pid){\r\n                    player = temp ; break ;\r\n                }\r\n            }\r\n            return player ;\r\n        },\r\n        buhuaModle:function(cards,parent,back,fangwei,context,action){\r\n            let opParent = cc.find(\"Canvas/cards/tesucards/huacard/\"+parent+\"\");\r\n            var gameStartInitNode = cc.find('Canvas/js/GameStartInit').getComponent('GameStartInit');\r\n            var card,temp;\r\n            if(fangwei == 'top'){\r\n                card = cc.instantiate(gameStartInitNode.buhua_top);\r\n                temp = card.getComponent('BuHuaAction');\r\n            }else if(fangwei == 'left'){\r\n                card = cc.instantiate(gameStartInitNode.buhua_lef);\r\n                temp = card.getComponent('BuHuaAction');\r\n            }else if(fangwei == 'right'){\r\n                card = cc.instantiate(gameStartInitNode.buhua_right);\r\n                temp = card.getComponent('BuHuaAction');\r\n            }else{\r\n                card = cc.instantiate(gameStartInitNode.buhua_my);\r\n                temp = card.getComponent('BuHuaAction');\r\n            }\r\n            // for(var i = 0; i<cards.length;i++){\r\n                //填充内容元素\r\n                temp.init(cards,fangwei);\r\n                //挂载父节点元素\r\n                card.parent = opParent;\r\n            // }\r\n        },\r\n        readyTrue: function(fangwei,context){\r\n            var gameStartInitNode = cc.find('Canvas/js/GameStartInit').getComponent('GameStartInit');\r\n            if(fangwei == 'left'){\r\n                gameStartInitNode.left_ready.active = true;\r\n            }else if(fangwei=='right'){\r\n                gameStartInitNode.right_ready.active = true;\r\n            }else if(fangwei == 'top'){\r\n                gameStartInitNode.top_ready.active = true ;\r\n            }else if(fangwei == 'current'){\r\n                gameStartInitNode.current_ready.active = true ;          \r\n            }\r\n        },\r\n        findCardForKong: function(kong,card,action) {\r\n            var resNode ;\r\n            var isGang ;\r\n            var cardNum;\r\n            //遍历整个kong 的子集  cards、\r\n            for ( let i = 0 ; i < kong.children.length ; i++ ) {\r\n                var cards = kong.children[i] ;\r\n                var kcards = cards.getComponent('Kongcards');\r\n                var kaction = kcards.action;//获取 事件\r\n                var length = kcards.length;    //获取子集长度\r\n                var type =kcards.type; //获取类型  当为dan 事件时用来判定\r\n                \r\n                var cardcolors = parseInt(card/4 ) ;\r\n                var cardtype  = parseInt(cardcolors / 9);\r\n                var dans = cards.children ;\r\n                //当这个牌是妖姬时\r\n                if(cardtype==2&& parseInt((card%36)/4)==0&&cards.children.length>0&&type!='yao'&&action=='dan'&&kaction =='dan'){\r\n                    resNode = cards ;\r\n                    cardNum = 0;\r\n                    isGang = false;\r\n                    break;\r\n                //当这个牌不是妖姬时\r\n                }else{\r\n                    //cards是peng   action 为gang时\r\n                    if(action == 'gang'&&dans.length>0&kaction == 'peng'){\r\n                        for(let j = 0 ; j<dans.length; j++){\r\n                            var cardUnit = dans[j] ;\r\n                            if ((parseInt((card%36)/4 ) == cardUnit.getComponent(\"DanAction\").mjvalue &&parseInt(card / 36)==cardUnit.getComponent(\"DanAction\").cardtype)||(card<0&&parseInt(card/4 )==cardUnit.getComponent(\"DanAction\").cardcolors)){\r\n                                resNode = cards ;\r\n                                cardNum = j;\r\n                                isGang = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                    //当action 为dan\r\n                    }else if(action == kaction&&dans.length>0){\r\n                        isGang = false;\r\n                        //有两种情况  一种长度为4 和长度为3   \r\n                       \r\n                        for(let j = 0 ; j<dans.length; j++){\r\n\r\n                            var cardUnit = dans[j] ; \r\n                            \r\n                            if(dans.length ==3 &&type=='wind'&&parseInt(card/4 )>=-7&&parseInt(card/4 )<=-4){\r\n                                isGang =true;\r\n                                for(let h = 0 ; h< dans.length;h++){\r\n                                    let cardUnit = dans[h]\r\n                                    if ( parseInt(card/4 ) == cardUnit.getComponent(\"DanAction\").cardcolors ){\r\n                                        isGang = false;\r\n                                        resNode = cards;\r\n                                        cardNum = h;\r\n                                        break;              \r\n                                    }\r\n                                        resNode = cards;\r\n                                        cardNum = h; \r\n                                }\r\n                                break;  \r\n                            }else if(card <0&&((type=='wind'&&parseInt(card/4 )>=-7&&parseInt(card/4 )<=-4)||(type =='xi'&&parseInt(card/4 )>=-3&&parseInt(card/4 )<=-1))){\r\n                                if ( parseInt(card/4 ) == parseInt(cardUnit.getComponent(\"DanAction\").value/4) ){   \r\n                                    resNode = cards ;\r\n                                    cardNum = j;\r\n                                    break;\r\n                                }else if(cardUnit.getComponent(\"DanAction\").cardtype == 2 && parseInt((cardUnit.getComponent(\"DanAction\").value%36)/4) == 0){\r\n                                    cardUnit.getComponent(\"DanAction\").setValue(card);\r\n                                    resNode = cards ;\r\n                                    cardNum = j;\r\n                                    break;\r\n                                }\r\n                            }else if(card >0&&((type == 'yao'&&parseInt((card%36)/4 )==0)||(type == 'jiu'&&parseInt((card%36)/4 )==8))){\r\n                                if(parseInt((card%36)/4 ) == parseInt((cardUnit.getComponent(\"DanAction\").value%36)/4 )&&parseInt(cardUnit.getComponent(\"DanAction\").value/36)==parseInt(card/36)){\r\n                                    resNode = cards ;\r\n                                    cardNum = j;\r\n                                    break;\r\n                                }else if(cardUnit.getComponent(\"DanAction\").cardtype == 2 && parseInt((cardUnit.getComponent(\"DanAction\").value%36)/4) == 0){\r\n                                    cardUnit.getComponent(\"DanAction\").setValue(card);\r\n                                    resNode = cards ;\r\n                                    cardNum = j;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }   \r\n            return {cardNode:resNode,isGang:isGang,cardNum:cardNum} ;\r\n        },\r\n    },\r\n});\r\n"]}