{"version":3,"sources":["DeskCards.js"],"names":["cc","Class","extends","Component","properties","atlas","default","type","SpriteAtlas","weijifen0","cardvalue","Node","target","jiantou","jiantou2","b_chun","SpriteFrame","b_ju","b_lan","b_xia","b_zhu","init","cvalue","fangwei","bol","cardcolor","xiaochu","value","cardframe","cardcolors","parseInt","cardtype","deskcard","time","sys","localStorage","getItem","setTimeout","buhuaTrue","buhua","indexOf","getSpriteFrame","getComponent","Sprite","spriteFrame","active","initjiantou","cards","children","i","length","card","destroy","context","find","deskcards_current_panel","deskcards_right_panel","deskcards_top_panel","deskcards_left_panel"],"mappings":"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","file":"DeskCards.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js\\gamePlay\\card","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        atlas: {\r\n            default: null,\r\n            type: cc.SpriteAtlas\r\n        },\r\n        weijifen0: {\r\n            default: null,\r\n            type: cc.SpriteAtlas\r\n        },\r\n        cardvalue:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        target:{\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        jiantou:cc.Node,\r\n        jiantou2:cc.Node,\r\n        b_chun:{\r\n            default: null,\r\n            type: cc.SpriteFrame\r\n        },\r\n        b_ju:{\r\n            default: null,\r\n            type: cc.SpriteFrame\r\n        },\r\n        b_lan:{\r\n            default: null,\r\n            type: cc.SpriteFrame\r\n        },\r\n        b_xia:{\r\n            default: null,\r\n            type: cc.SpriteFrame\r\n        },\r\n        b_zhu:{\r\n            default: null,\r\n            type: cc.SpriteFrame\r\n        },\r\n    },\r\n\r\n    init:function(cvalue,fangwei,bol){\r\n        //this.jiantou.active  = true;\r\n        this.cardcolor();\r\n        this.xiaochu();\r\n        // let ani = this.jiantou.getComponent(cc.Animation);\r\n        // let c = fangwei;\r\n        // if(fangwei =='B'){\r\n        //     c='top';\r\n        // }else if(fangwei =='L'){\r\n        //     c='left';\r\n        // }else if(fangwei =='R'){\r\n        //     c='right';\r\n        // }\r\n        // ani.play(c) ;  \r\n        this.value = cvalue ;\r\n        let cardframe ;\r\n        let cardcolors = parseInt(this.value/4 ) ;\r\n        let cardtype  = parseInt(cardcolors / 9);\r\n        let deskcard ;\r\n        if(fangwei !='Z'){\r\n            if(cardcolors < 0){\r\n                \r\n                if(cardcolors==-7){\r\n                    deskcard = fangwei+'_wind_east';\r\n                } else if(cardcolors==-6){\r\n                    deskcard = fangwei+'_wind_south';\r\n                } else if(cardcolors==-5){\r\n                    deskcard = fangwei+'_wind_west';\r\n                } else if(cardcolors == -4){\r\n                    deskcard = fangwei+'_wind_north';\r\n                }else if(cardcolors == -3){\r\n                    deskcard = fangwei+'_red';\r\n                }else if(cardcolors == -2){\r\n                    deskcard = fangwei+'_green';\r\n                }else if(cardcolors == -1){\r\n                    deskcard = fangwei+'_white';\r\n                }\r\n                if(bol != true){\r\n                    let time = 0;\r\n                    if(cc.sys.localStorage.getItem('ting') == 'true'){\r\n                        time = 1000;\r\n                    }\r\n                    setTimeout(function(){\r\n                        // cc.weijifen.audio.playSFX('nv/wind_'+(cardcolors+8)+'.mp3');                \r\n                    },time);\r\n                }\r\n                //东南西北风 ， 中发白\r\n            }else{\r\n                \r\n                if(cardtype == 0){ //万\r\n                    deskcard = fangwei+\"_character_\"+ (parseInt((this.value%36)/4)+1) ;\r\n                    if(bol != true){\r\n                        // cc.weijifen.audio.playSFX('nv/wan_'+(parseInt((this.value%36)/4)+1)+'.mp3');\r\n                    }\r\n                }else if(cardtype == 1){ //筒\r\n                    deskcard = fangwei+\"_dot_\"+ (parseInt((this.value%36)/4)+1) ;\r\n                    if(bol != true){\r\n                        // cc.weijifen.audio.playSFX('nv/tong_'+(parseInt((this.value%36)/4)+1)+'.mp3');\r\n                    }\r\n                }else if(cardtype == 2){  //条\r\n                    deskcard = fangwei+\"_bamboo_\"+ (parseInt((this.value%36)/4)+1) ;\r\n                    if(bol != true){\r\n                    // cc.weijifen.audio.playSFX('nv/suo_'+(parseInt((this.value%36)/4)+1)+'.mp3');\r\n                    }\r\n                }\r\n            }\r\n            var buhuaTrue = false;\r\n            if(deskcard == null){\r\n                var buhua = \"-32,-33,-34,-35,-36,-37,-38,-39\";\r\n                if(buhua.indexOf(cvalue) >= 0){\r\n                    buhuaTrue = true;\r\n                    if(cvalue==-38){\r\n                        deskcard = 'B_autumn';//秋\r\n                        cardframe = this.weijifen0.getSpriteFrame(deskcard);\r\n                        this.cardvalue.getComponent(cc.Sprite).spriteFrame = cardframe;\r\n                    } else if(cvalue==-35){\r\n                        deskcard = this.b_zhu;//竹\r\n                        this.cardvalue.getComponent(cc.Sprite).spriteFrame = deskcard;\r\n                    } else if(cvalue==-34){\r\n                        deskcard = this.b_ju;//菊\r\n                        this.cardvalue.getComponent(cc.Sprite).spriteFrame = deskcard;\r\n                    } else if(cvalue==-33){\r\n                        deskcard = this.b_lan;//兰\r\n                        this.cardvalue.getComponent(cc.Sprite).spriteFrame = deskcard;\r\n                    } else if(cvalue == -32){\r\n                        deskcard = 'B_plum';//梅\r\n                        cardframe = this.weijifen0.getSpriteFrame(deskcard);\r\n                        this.cardvalue.getComponent(cc.Sprite).spriteFrame = cardframe;\r\n                    }else if(cvalue == -36){\r\n                        deskcard = this.b_chun;//春\r\n                        this.cardvalue.getComponent(cc.Sprite).spriteFrame = deskcard;\r\n                    }else if(cvalue == -37){\r\n                        deskcard = this.b_xia;//夏\r\n                        this.cardvalue.getComponent(cc.Sprite).spriteFrame = deskcard;\r\n                    }else if(cvalue == -39){\r\n                        deskcard = 'B_winter';//冬\r\n                        cardframe = this.weijifen0.getSpriteFrame(deskcard);\r\n                        this.cardvalue.getComponent(cc.Sprite).spriteFrame = cardframe;\r\n                    } \r\n                }\r\n            }\r\n    \r\n            if(!buhuaTrue){\r\n                cardframe = this.atlas.getSpriteFrame(deskcard);\r\n                this.cardvalue.getComponent(cc.Sprite).spriteFrame = cardframe;\r\n            }\r\n            if(cc.sys.localStorage.getItem('cl')!='true'){\r\n                if(this.jiantou){\r\n                    this.jiantou.active = true;                \r\n                }\r\n            }\r\n        }  \r\n    },\r\n    initjiantou: function(cards){\r\n        if(cards.children){\r\n            for(let i =0; i< cards.children.length;i++){\r\n                var card = cards.children[i].getComponent('DeskCards');\r\n                card.jiantou2.destroy();\r\n            }\r\n        }\r\n    },\r\n    xiaochu: function(){\r\n         let context = cc.find('Canvas').getComponent('MJDataBind');\r\n         this.initjiantou(context.deskcards_current_panel);\r\n         this.initjiantou(context.deskcards_right_panel);\r\n         this.initjiantou(context.deskcards_top_panel);\r\n         this.initjiantou(context.deskcards_left_panel);\r\n    },\r\n    cardcolor:function(){\r\n        if(cc.sys.localStorage.getItem('cardcolor')=='yellow'){\r\n            this.cardvalue.children[0].active = false;\r\n            this.cardvalue.children[1].active = false;\r\n        }else if(cc.sys.localStorage.getItem('cardcolor')=='green'){\r\n            this.cardvalue.children[0].active = true;\r\n            this.cardvalue.children[1].active = false;\r\n        }else if(cc.sys.localStorage.getItem('cardcolor')=='red'){\r\n            this.cardvalue.children[0].active = false;\r\n            this.cardvalue.children[1].active = true;\r\n        }\r\n    },\r\n});\r\n"]}