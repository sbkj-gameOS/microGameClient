{"version":3,"sources":["EndCards.js"],"names":["WJFCommon","require","cc","Class","extends","properties","headimgs","Node","peoname","Label","count","mjloyad","mjloyad2","mjkong","jifan","card","Prefab","win","hu","dong","xi","nan","bei","redwin","SpriteFrame","diaopao","target","hua","buhua","huaParent","banker","onLoad","init","headimg","gang","fan","units","drop","noTing","hucards","tai","string","data","point","id","user","players","find","getComponent","playersarray","i","length","player","goldcoins","balance","huaCards","baopai","summary","bu","decode","instantiate","parent","bao","bp","bpp","huCard","Sprite","spriteFrame","color","Color","taishu","beimi","GameBase","gameModel","tip","cardsss","cards","sortNumber","a","b","sort","pl","wind","active","headimgurl","username","imgurl","sprite","head","loader","load","url","type","suc","texture","width","height","actions","kong","action","c","h","mj","tablepos","children","q","xiao","xiaocard","da","mjtype","j","setData","isDan","parseInt"],"mappings":"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","file":"EndCards.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js\\gamePlay\\card","sourcesContent":["var WJFCommon = require(\"WJFCommon\");\n\ncc.Class({\n    extends: WJFCommon,\n    properties: {\n        headimgs:cc.Node,\n        peoname:cc.Label,\n        count:cc.Label,\n        mjloyad: cc.Node,\n        mjloyad2:cc.Node,\n        mjkong:cc.Node,\n        jifan:cc.Label,\n        card:cc.Prefab,\n        win:cc.Node,\n        hu: cc.Label,\n        dong:cc.Node,\n        xi:cc.Node,\n        nan:cc.Node,        \n        bei:cc.Node,\n        redwin:cc.SpriteFrame,\n        diaopao:cc.SpriteFrame,\n        target:cc.Node,\n        hua: cc.Prefab,\n        buhua: cc.Prefab,\n        huaParent: cc.Node,\n        banker: cc.Node,\n    },\n    \n    // use this for initialization\n    onLoad: function () {\n      \n    },\n    init: function(){\n        let headimg;\n        let gang=0; \n        let fan=0;\n        let units;\n        let drop = '';\n        let noTing= '';\n        let hucards = -111;\n        let tai = '';\n        let hua ;\n        this.hu.string='';\n        if(this.data.point){\n            let id = this.data.user;\n            let players = cc.find('Canvas').getComponent('MJDataBind').playersarray;\n            for(let i = 0 ; i < players.length ; i++){\n                let player = players[i].getComponent('MaJiangPlayer')\n                if(id == player.data.id){\n                    player.goldcoins.string = this.data.point ; \n\n                }\n            }\n        }\n        if(this.data.gang){\n            gang = this.data.gang.count;\n        }\n        if(this.data.balance){\n            let huaCards;\n            let card;\n            let baopai ;\n            let summary = cc.find('Canvas/summary').getComponent('SummaryClick');\n            if(this.data.balance.bu){\n                huaCards = this.decode(this.data.balance.bu);\n                for(let i = 0 ; i< huaCards.length ; i ++){\n                    let card = cc.instantiate(this.buhua);\n                    card.getComponent('BuHuaAction').init(huaCards[i]);\n                    card.parent = this.huaParent;\n                }\n            }\n            if(this.data.balance.bao!= -1){\n                card = cc.instantiate(summary.bp);\n                baopai  = card.getComponent('DeskCards');    \n                baopai.init(this.data.balance.bao,'B',true);\n                card.parent = summary.bpp;   \n            }\n            if(this.data.balance.huCard){\n                hucards = this.data.balance.huCard;\n            }\n            if(this.data.balance.drop == true){\n                drop = '点炮';\n                this.target.getComponent(cc.Sprite).spriteFrame = this.diaopao;\n                this.target.color = new cc.Color(255,255,255);\n            }    \n            if(this.data.balance.taishu){\n                tai = ' '+this.data.balance.taishu + '台';\n            }\n            units= this.data.balance.units;\n            fan = this.data.balance.count ; \n            \n            if(units){\n                let point = '';\n                for(let i =0 ;i< units.length;i++){\n                    if(cc.beimi.GameBase.gameModel == 'wz'){\n                        point = units[i].point;\n                    }\n                    this.hu.string += (units[i].tip+' '+ point +' ');\n                } \n            }  \n            if(cc.beimi.GameBase.gameModel != 'wz'){\n                this.jifan.string = fan +'番'+'   '+gang +'杠   ';\n                if(this.data.balance.noTing == true){\n                    noTing = '未上听';\n                }else{\n                    noTing = '上听';\n                }\n            } \n        }\n      \n        \n        this.hu.string += noTing + '  '+drop + ' ' + tai;\n        let player = cc.find('Canvas').getComponent('MJDataBind').playersarray;\n        var cardsss = this.decode(this.data.cards);\n        function sortNumber(a,b){return a - b}\n        cardsss.sort(sortNumber);\n        \n        for(let i=0;i<player.length;i++){\n            let pl = player[i].getComponent('MaJiangPlayer');\n            if(pl.data.id == this.data.user){\n                if(this[pl.wind]){\n                    this[pl.wind].active = true;                    \n                }\n                if(this.data.user == cc.beimi.banker){\n                    this.banker.active = true ; \n                }\n                headimg = pl.data.headimgurl;\n                this.peoname.string = pl.data.username;\n            }\n        }\n        if(headimg){\n            var imgurl = headimg;\n            var sprite = this.headimgs.getComponent(cc.Sprite);\n            var head = this.headimgs;\n            cc.loader.load({url:imgurl,type:'jpg'},function(suc,texture){\n                sprite.spriteFrame = new cc.SpriteFrame(texture);\n                head.width = 52;\n                head.height = 47;\n            });\n        }\n        this.count.string= this.data.count;\n        if(this.data.win ==true){\n            //cc.beimi.audio.playSFX('nv/hu.mp3');\n            this.target.getComponent(cc.Sprite).spriteFrame = this.redwin;\n            this.win.active = true;\n        }\n        for(let i = 0;i<this.data.actions.length;i++){\n            let kong = cc.instantiate(this.mjkong);\n            kong.parent = this.mjloyad;\n            let action = this.decode(this.data.actions[i].card);\n            function sortNumber(a,b){return a - b};\n            action.sort(sortNumber);\n                if(this.data.actions[i].action=='gang'&&action.length ==1){\n                    let c=[action[0],action[0],action[0],action[0]];\n                    for(let h = 0; h<4 ;h++){\n                        let card = cc.instantiate(this.card);\n                        //console.log(cd[j]);\n                        let a = false;\n                        if(this.data.actions[i].type=='an'&&(h!=2)){\n                            a = true;\n                        }\n                        let b = card.getComponent('DanAction');\n                        b.init(c[h],a,'','1');\n                        b.target.height = 53;\n                        b.target.width= 32;\n                        card.parent = kong;   \n                    }\n                }else if(this.data.actions[i].action=='dan'){\n                    let mj = cc.find('Canvas').getComponent('MJDataBind');\n                    let player = mj.player(this.data.user,mj);\n                    let card ;\n                    if(player.tablepos == 'current' ){\n                        card = cc.find('Canvas/content/handcards/deskcard/kong').children[i+1];\n                    }else{\n                        card = cc.find('Canvas/content/handcards/'+player.tablepos+'desk/kong').children[i+1];\n                    }\n                    for(let q = 0 ; q< card.children.length; q++){\n                        let xiao = cc.instantiate(this.card);\n                        let xiaocard = xiao.getComponent('DanAction');\n                        let da = card.children[q].getComponent('DanAction');\n                        xiaocard.init(da.mjtype,false,'',da.count.string);\n                        xiaocard.target.height =53;\n                        xiaocard.target.width =32;\n                        xiao.parent =kong;\n                    }\n                }else{\n                    for(let j=0;j<action.length;j++){\n                        let card = cc.instantiate(this.card);\n                        //console.log(cd[j]);\n                        let a = false;\n                        let c = action[j];\n                        let b = card.getComponent('DanAction');                          \n                        b.init(c,a,'','1');\n                        b.target.height = 53;\n                        b.target.width= 32;\n                        card.parent = kong;           \n                    }\n                }\n            }\n        {\n            \n            let kong = cc.instantiate(this.mjkong);\n            for(let i = 0;i<cardsss.length;i++){   \n                kong.parent = this.mjloyad;\n                if(cardsss[i]>-32){\n                    let card = cc.instantiate(this.card);\n                    let b = card.getComponent('DanAction');\n                    b.init(cardsss[i],false,'','1','',true);\n                    b.target.height = 53;\n                    b.target.width= 32;\n                    card.parent = kong;     \n                }else{\n                    let card = cc.instantiate(this.hua);\n                    let b = card.getComponent('BuHuaAction');\n                    b.init(cardsss[i],'',true);\n                    b.target.height = 53;\n                    b.target.width= 32;\n                    card.parent = kong;  \n                }\n                      \n            }\n        }\n        {\n            if(this.data.win){\n                let kong = cc.instantiate(this.mjkong);\n                kong.parent = this.mjloyad;\n                if(this.data.balance.huCard>-32){\n                    let card = cc.instantiate(this.card);                 \n                    let b = card.getComponent('DanAction');\n                    b.init(this.data.balance.huCard,false,'','1','',true);\n                    b.target.height = 53;\n                    b.target.width= 32;\n                    card.parent = kong; \n                }else{\n                    let card = cc.instantiate(this.hua);                 \n                    let b = card.getComponent('BuHuaAction');\n                    b.init(this.data.balance.huCard,'',true);\n                    b.target.height = 53;\n                    b.target.width= 32;\n                    card.parent = kong; \n                }\n                 \n            }       \n        }\n    },\n    setData:function(data){\n        this.data = data ; \n        this.init();\n    },\n    isDan: function(action){\n        \n        let type = 'yao';\n        for(let i = 0 ; i< action.length; i ++){\n            if(action[i]<0){\n                if(parseInt(action[i]/4)<-3){\n                    type = 'wind';\n                    break;\n                }else{\n                    type='xi';\n                    break;\n                }\n            }else{\n                if(parseInt((action[i]%36)/4)==8&&((parseInt(parseInt(action[i]/4)/9)==0)||parseInt(parseInt(action[i]/4)/9)==1||parseInt(parseInt(action[i]/4)/9)==2)){\n                    type='jiu';\n                    break;\n                }\n            }\n        }\n        return type;\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"]}