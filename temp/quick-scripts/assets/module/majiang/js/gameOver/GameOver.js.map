{"version":3,"sources":["GameOver.js"],"names":["cc","Class","extends","Component","properties","current_hu","Node","top_hua","liuju","onLoad","statics","allcards_event","data","context","find","getComponent","gameOverNode","gameOver","require","playerid","sys","localStorage","removeItem","i","playOvers","length","win","user","balance","huCard","dan","children","init","active","huaction","setTimeout","endList","gameStartInit","hu_hu","Animation","player","action","scaleTo","target","runAction","tablepos","node","x","y","ani","play","huaction2","stop","scale"],"mappings":"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","file":"GameOver.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js\\gameOver","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    \tcurrent_hu:cc.Node,\r\n    \ttop_hua: cc.Node,\r\n        liuju: cc.Node,\r\n    },\r\n\r\n    //初始化相关数据\r\n    onLoad: function () {\r\n\r\n    },\r\n\r\n    //结束游戏    结算\r\n    statics: {\r\n    \tallcards_event:function(data , context){\r\n    \t\tcontext = cc.find('Canvas').getComponent('MJDataBind');\r\n    \t\tvar gameOverNode = cc.find('Canvas/js/GameOver').getComponent('GameOver');\r\n    \t\tvar gameOver = require('GameOver');\r\n\t        //结算界面，\r\n\t        let playerid;\r\n\t        cc.sys.localStorage.removeItem('clear');\r\n\t        for(let i = 0;i<data.playOvers.length;i++){\r\n\t            if(data.playOvers[i].win==true){\r\n\t                playerid = data.playOvers[i].user;\r\n\t                if(data.playOvers[i].balance.huCard>-32){\r\n\t                    var dan = gameOverNode.current_hu.children[1].getComponent('DanAction');\r\n\t                    dan.init(data.playOvers[i].balance.huCard,false,'current','1');                \r\n\t                    break;\r\n\t                }else{\r\n\t                    gameOverNode.current_hu.children[1].active = false;\r\n\t                    gameOverNode.top_hua.active = true;\r\n\t                    var dan = gameOverNode.top_hua.getComponent('BuHuaAction');\r\n\t                    dan.init(data.playOvers[i].balance.huCard,'',false);\r\n\t                    break;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\r\n\t        gameOver.huaction(playerid);\r\n\t        setTimeout(function(){context.endList(data,context,playerid)},3000)\r\n\t    },\r\n\t    huaction: function(playerid){\r\n\t    \tvar gameOverNode = cc.find('Canvas/js/GameOver').getComponent('GameOver');\r\n\t    \tvar gameStartInit = require('GameStartInit');\r\n\t        if(playerid){\r\n\t            // cc.beimi.audio.playSFX('nv/hu.mp3');                    \r\n\t            let hu_hu = gameOverNode.current_hu.getComponent(cc.Animation);\r\n\t            let player = gameStartInit.player(playerid , this);\r\n\t            let action = cc.scaleTo(1.5,1.5);\r\n\t            player.target.runAction(action);\r\n\t            if(player.tablepos == 'top'){\r\n\t                hu_hu.node.children[0].x = 7 ;\r\n\t                hu_hu.node.children[0].y = 142 ;\r\n\t                hu_hu.node.children[1].x = 7 ;\r\n\t                hu_hu.node.children[1].y = 142 ;\r\n\r\n\t                hu_hu.node.children[2].x = 11 ;\r\n\t                hu_hu.node.children[2].y = 121 ;\r\n\t                hu_hu.node.children[3].x = -156 ;\r\n\t                hu_hu.node.children[3].y = 146 ;\r\n\t            }else if(player.tablepos == 'left'){\r\n\t                hu_hu.node.children[0].x = -369 ;\r\n\t                hu_hu.node.children[0].y = 76 ;\r\n\t                hu_hu.node.children[1].x = -369 ;\r\n\t                hu_hu.node.children[1].y = 76 ;\r\n\r\n\t                hu_hu.node.children[2].x = -365 ;\r\n\t                hu_hu.node.children[2].y = 55 ;\r\n\t                hu_hu.node.children[3].x = -358 ;\r\n\t                hu_hu.node.children[3].y = -72 ;              \r\n\t            }else if(player.tablepos == 'right'){\r\n\t                hu_hu.node.children[0].x = 383 ;\r\n\t                hu_hu.node.children[0].y = -31 ;\r\n\t                hu_hu.node.children[1].x = 383 ;\r\n\t                hu_hu.node.children[1].y = -31 ;\r\n\t                hu_hu.node.children[2].x = 387 ;\r\n\t                hu_hu.node.children[2].y = -52 ;   \r\n\t                hu_hu.node.children[3].x = 372 ;\r\n\t                hu_hu.node.children[3].y = 115 ;             \r\n\t            }else{\r\n\t                hu_hu.node.children[0].x = 7 ;\r\n\t                hu_hu.node.children[0].y = -69 ;\r\n\t                hu_hu.node.children[1].x = 7 ;\r\n\t                hu_hu.node.children[1].y = -69 ;\r\n\t                hu_hu.node.children[2].x = 11 ;\r\n\t                hu_hu.node.children[2].y = -90 ;\r\n\t                hu_hu.node.children[3].x = 219 ;\r\n\t                hu_hu.node.children[3].y = -65 ;              \r\n\t            }\r\n\t            gameOverNode.current_hu.active =true;\r\n\t            let ani = gameOverNode.current_hu.getComponent(cc.Animation);\r\n\t            ani.play(\"current_hu\") ;\r\n\t        }else{\r\n\t            gameOverNode.liuju.active = true;\r\n\t        }\r\n\t    },\r\n\t    huaction2:function(playerid){\r\n\t    \tvar gameStartInit = require('GameStartInit');\r\n\t        let ani = gameOverNode.current_hu.getComponent(cc.Animation);\r\n\t        gameOverNode.current_hu.active =false;\r\n\t        ani.stop(\"current_hu\") ;\r\n\t        let player = gameStartInit.player(playerid , this);\r\n\t        player.target.scale = 0.91;\r\n\t        \r\n\r\n\t    },\r\n    }\r\n});\r\n"]}