require=function e(t,n,a){function i(c,o){if(!n[c]){if(!t[c]){var s="function"==typeof require&&require;if(!o&&s)return s(c,!0);if(r)return r(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[c]={exports:{}};t[c][0].call(d.exports,function(e){var n=t[c][1][e];return i(n||e)},d,d.exports,e,t,n,a)}return n[c].exports}for(var r="function"==typeof require&&require,c=0;c<a.length;c++)i(a[c]);return i}({Audios:[function(e,t,n){"use strict";cc._RF.push(t,"d2ca5yf5NVPc5X0HINJSlpc","Audios"),cc.Class({extends:cc.Component,properties:{bgAudioID:-1},init:function(){cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){"true"!=cc.sys.localStorage.getItem("nobgm")&&cc.audioEngine.resumeAll()})},_getUrl:function(e){return cc.url.raw("resources/sounds/"+e)},playBGM:function(e){var t=this._getUrl(e);this.bgAudioID>=0&&cc.audioEngine.stop(this.bgAudioID),this.bgAudioID=cc.audioEngine.play(t,!0,this.bgVolume)},playSFX:function(e){var t=this.getUrl(e);if(this.deskVolume>0)cc.audioEngine.play(t,!1,this.deskVolume)},getState:function(){return cc.audioEngine.getState(this.bgAudioID)},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{}],Base64:[function(e,t,n){"use strict";cc._RF.push(t,"c2c3fnnkuFEBpBZWGQY793P","Base64"),cc.Class({extends:cc.Component,properties:{},statics:{decode:function(e){var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],n=e.length,a=0;"="==e.charAt(n-1)&&("="==e.charAt(n-2)?(a=4,e=e.substring(0,n-2)):(a=2,e=e.substring(0,n-1)));for(var i=[],r=0,c=e.length;r<c;++r)for(var o=e.charAt(r),s=0,l=t.length;s<l;++s)if(o==t[s]){var d=this._toBinary(s),u=d.length;if(6-u>0)for(var p=6-u;p>0;--p)d.unshift(0);i=i.concat(d);break}a>0&&(i=i.slice(0,i.length-a));for(var h=[],f=[],r=0,c=i.length;r<c;)if(0==i[r])h=h.concat(this._toDecimal(i.slice(r,r+8))),r+=8;else{for(var g=0;r<c&&1==i[r];)++g,++r;for(f=f.concat(i.slice(r+1,r+8-g)),r+=8-g;g>1;)f=f.concat(i.slice(r+2,r+8)),r+=8,--g;h=h.concat(this._toDecimal(f)),f=[]}return h},_toBinary:function(e){for(var t=new Array;e>0;){var n=e%2;e=Math.floor(e/2),t.push(n)}return t.reverse(),t},_toDecimal:function(e){for(var t=0,n=0,a=e.length-1;a>=0;--a)1==e[a]&&(t+=Math.pow(2,n)),++n;return t}},onLoad:function(){}}),cc._RF.pop()},{}],BuHuaAction:[function(e,t,n){"use strict";cc._RF.push(t,"f6d9dxkh+5Px4wnEJ49Wi6I","BuHuaAction"),cc.Class({extends:cc.Component,properties:{weijifen0:{default:null,type:cc.SpriteAtlas},target:{default:null,type:cc.Node},b_chun:{default:null,type:cc.SpriteFrame},b_ju:{default:null,type:cc.SpriteFrame},b_lan:{default:null,type:cc.SpriteFrame},b_xia:{default:null,type:cc.SpriteFrame},b_zhu:{default:null,type:cc.SpriteFrame},hua:cc.Node},onLoad:function(){},init:function(e,t,n){this.cardcolor(),this.value=e,this.fangwei=t;var a,i,r=parseInt(this.value/4),c=void 0,o=void 0;cc.weijifen.powerCard&&(c=parseInt(cc.weijifen.powerCard[0]/4),parseInt(c/9),parseInt(cc.weijifen.powerCard[0]%36/4)+1,2==cc.weijifen.powerCard.length&&(o=parseInt(cc.weijifen.powerCard[1]/4),parseInt(o/9),parseInt(cc.weijifen.powerCard[1]%36/4)));var s="B";"left"==t?s="L":"right"==t&&(s="R"),"B"==s?(-38==e?(a=s+"_autumn",i=this.weijifen0.getSpriteFrame(a),this.target.getComponent(cc.Sprite).spriteFrame=i):-35==e?(a=this.b_zhu,this.target.getComponent(cc.Sprite).spriteFrame=a):-34==e?(a=this.b_ju,this.target.getComponent(cc.Sprite).spriteFrame=a):-33==e?(a=this.b_lan,this.target.getComponent(cc.Sprite).spriteFrame=a):-32==e?(a=s+"_plum",i=this.weijifen0.getSpriteFrame(a),this.target.getComponent(cc.Sprite).spriteFrame=i):-36==e?(a=this.b_chun,this.target.getComponent(cc.Sprite).spriteFrame=a):-37==e?(a=this.b_xia,this.target.getComponent(cc.Sprite).spriteFrame=a):-39==e&&(a=s+"_winter",i=this.weijifen0.getSpriteFrame(a),this.target.getComponent(cc.Sprite).spriteFrame=i),n&&(r==c||null!=o&&r==o||this.value>=-39&&this.value<=-36)&&this.caishenCards()):(-38==e?a=s+"_autumn":-35==e?a=s+"_bamboo":-34==e?a=s+"_chrysanthemum":-33==e?a=s+"_orchid":-32==e?a=s+"_plum":-36==e?a=s+"_spring":-37==e?a=s+"_summer":-39==e?a=s+"_winter":(e<=-4||e>=-7)&&(a=s+"_white"),i=this.weijifen0.getSpriteFrame(a),this.target.getComponent(cc.Sprite).spriteFrame=i)},caishenCards:function(){this.hua.active=!0,this.target.zIndex=-999+this.value},cardcolor:function(){"yellow"==cc.sys.localStorage.getItem("cardcolor")?(this.target.children[0].active=!1,this.target.children[1].active=!1):"green"==cc.sys.localStorage.getItem("cardcolor")?(this.target.children[0].active=!0,this.target.children[1].active=!1):"red"==cc.sys.localStorage.getItem("cardcolor")&&(this.target.children[0].active=!1,this.target.children[1].active=!0)}}),cc._RF.pop()},{}],CHcreateRoom:[function(e,t,n){"use strict";cc._RF.push(t,"605e7sCEkRAo6blEnOH259t","CHcreateRoom");var a,i,r,c,o=e("createRoom");cc.Class({extends:o,properties:{},onLoad:function(){i="both@@",a="2",r="4",c={}},clickmoshi:function(e){a=this.mosiOrpepleClick(e)},clickPepNum:function(e){r=this.mosiOrpepleClick(e)},clickPlayway:function(e){i=this.gameTypeClick(e,i)},createClick:function(){console.log("开始创建长春麻将，CHcreateRoom"),(i=i.split("@@")).pop(),c.waytype=i,c.game="CH",c.pepNums=r,c.modeltype=a,cc.weijifen.authorization&&(c.token=cc.weijifen.authorization),this.onClick(c)}}),cc._RF.pop()},{createRoom:"createRoom"}],DanAction:[function(e,t,n){"use strict";cc._RF.push(t,"3cada6eY9hMLpEhYI/11j9X","DanAction"),cc.Class({extends:cc.Component,properties:{beimi0:{default:null,type:cc.SpriteAtlas},atlas:{default:null,type:cc.SpriteAtlas},count:cc.Label,target:{default:null,type:cc.Node},MJhead:cc.Node,x:cc.Node,current:cc.Node,right:cc.Node,left:cc.Node,top:cc.Node,hua:cc.Node,juju:cc.Node},onLoad:function(){},init:function(e,t,n,a,i,r){this.back=t,this.cardcolor(),this.fangwei=n,null!=i&&(this.juju&&!r&&(this.juju.active=!0,this.ani=this.juju.getComponent(cc.Animation),this.ani.play("juju_"+n)),"current"==i?this.current.active=!0:"right"==i?this.right.active=!0:"left"==i?this.left.active=!0:"top"==i&&(this.top.active=!0)),this.count.string=a,this.value=e,this.back=t,this.fangwei=n;var c=parseInt(this.value/4),o=parseInt(c/9);this.cardcolors=c,this.cardtype=o,this.mjtype=e,this.mjvalue=parseInt(this.value%36/4);var s=void 0,l=void 0,d=void 0,u=void 0,p=void 0,h=void 0;cc.weijifen.powerCard&&(d=parseInt(cc.weijifen.powerCard[0]/4),s=parseInt(d/9),p=parseInt(cc.weijifen.powerCard[0]%36/4)+1,2==cc.weijifen.powerCard.length&&(u=parseInt(cc.weijifen.powerCard[1]/4),l=parseInt(u/9),h=parseInt(cc.weijifen.powerCard[1]%36/4)+1));var f,g;if(1==this.back)"left"==this.fangwei?this.MJhead.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("e_mj_b_left"):"top"==this.fangwei?(this.MJhead.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("e_mj_b_bottom"),this.target.height=63):"right"==n?this.MJhead.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("e_mj_b_right"):(this.MJhead.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("e_mj_b_bottom"),this.target.height=76);else{var m="B";"left"==n?m="L":"right"==n&&(m="R"),c<0?(-7==c?f=m+"_wind_east":-6==c?f=m+"_wind_south":-5==c?f=m+"_wind_west":-4==c?f=m+"_wind_north":-3==c?f=m+"_red":-2==c?f=m+"_green":-1==c&&(f=m+"_white"),r&&(c==d||null!=u&&c==u||this.value>=-39&&this.value<=-36)&&this.caishenCards()):(0==o?f=m+"_character_"+(parseInt(this.value%36/4)+1):1==o?f=m+"_dot_"+(parseInt(this.value%36/4)+1):2==o&&(f=m+"_bamboo_"+(parseInt(this.value%36/4)+1)),r&&o==s&&parseInt(this.value%36/4)+1==p?this.caishenCards():r&&o==l&&parseInt(this.value%36/4)+1==h&&this.caishenCards()),g=this.beimi0.getSpriteFrame(f),this.target.getComponent(cc.Sprite).spriteFrame=g}void 0==this.count.string?this.count.string="1":this.x.active=!0,"1"==this.count.string&&(this.count.node.active=!1,this.x.active=!1)},countactive:function(){this.count.node.active=!0,this.x.active=!0},setValue:function(e){this.value=e},caishenCards:function(){this.hua.active=!0,this.target.zIndex=-999+this.value},jujufei:function(){1==this.juju.active&&(this.juju.active=!1,this.ani.stop("juju_"+this.fangwei))},cardcolor:function(){"yellow"==cc.sys.localStorage.getItem("cardcolor")?(this.target.children[0].active=!1,this.target.children[1].active=!1,this.target.children[2].active=!1,this.target.children[3].active=!1):"green"==cc.sys.localStorage.getItem("cardcolor")?this.back?(this.target.children[2].active=!0,this.target.children[3].active=!1,this.target.children[0].active=!1,this.target.children[1].active=!1):(this.target.children[0].active=!0,this.target.children[1].active=!1,this.target.children[3].active=!1,this.target.children[2].active=!1):"red"==cc.sys.localStorage.getItem("cardcolor")&&(this.back?(this.target.children[2].active=!1,this.target.children[3].active=!0,this.target.children[0].active=!1,this.target.children[1].active=!1):(this.target.children[0].active=!1,this.target.children[1].active=!0,this.target.children[3].active=!1,this.target.children[2].active=!1))}}),cc._RF.pop()},{}],DeskCards:[function(e,t,n){"use strict";cc._RF.push(t,"0f1077dQLtEG7Er/4Vm0dg1","DeskCards"),cc.Class({extends:cc.Component,properties:{atlas:{default:null,type:cc.SpriteAtlas},weijifen0:{default:null,type:cc.SpriteAtlas},cardvalue:{default:null,type:cc.Node},target:{default:null,type:cc.Node},jiantou:cc.Node,jiantou2:cc.Node,b_chun:{default:null,type:cc.SpriteFrame},b_ju:{default:null,type:cc.SpriteFrame},b_lan:{default:null,type:cc.SpriteFrame},b_xia:{default:null,type:cc.SpriteFrame},b_zhu:{default:null,type:cc.SpriteFrame}},init:function(e,t,n){this.cardcolor(),this.xiaochu(),this.value=e;var a=void 0,i=parseInt(this.value/4),r=parseInt(i/9),c=void 0;if("Z"!=t){if(i<0){if(-7==i?c=t+"_wind_east":-6==i?c=t+"_wind_south":-5==i?c=t+"_wind_west":-4==i?c=t+"_wind_north":-3==i?c=t+"_red":-2==i?c=t+"_green":-1==i&&(c=t+"_white"),1!=n){var o=0;"true"==cc.sys.localStorage.getItem("ting")&&(o=1e3),setTimeout(function(){},o)}}else 0==r?c=t+"_character_"+(parseInt(this.value%36/4)+1):1==r?c=t+"_dot_"+(parseInt(this.value%36/4)+1):2==r&&(c=t+"_bamboo_"+(parseInt(this.value%36/4)+1));var s=!1;if(null==c){"-32,-33,-34,-35,-36,-37,-38,-39".indexOf(e)>=0&&(s=!0,-38==e?(c="B_autumn",a=this.weijifen0.getSpriteFrame(c),this.cardvalue.getComponent(cc.Sprite).spriteFrame=a):-35==e?(c=this.b_zhu,this.cardvalue.getComponent(cc.Sprite).spriteFrame=c):-34==e?(c=this.b_ju,this.cardvalue.getComponent(cc.Sprite).spriteFrame=c):-33==e?(c=this.b_lan,this.cardvalue.getComponent(cc.Sprite).spriteFrame=c):-32==e?(c="B_plum",a=this.weijifen0.getSpriteFrame(c),this.cardvalue.getComponent(cc.Sprite).spriteFrame=a):-36==e?(c=this.b_chun,this.cardvalue.getComponent(cc.Sprite).spriteFrame=c):-37==e?(c=this.b_xia,this.cardvalue.getComponent(cc.Sprite).spriteFrame=c):-39==e&&(c="B_winter",a=this.weijifen0.getSpriteFrame(c),this.cardvalue.getComponent(cc.Sprite).spriteFrame=a))}s||(a=this.atlas.getSpriteFrame(c),this.cardvalue.getComponent(cc.Sprite).spriteFrame=a),"true"!=cc.sys.localStorage.getItem("cl")&&this.jiantou&&(this.jiantou.active=!0)}},initjiantou:function(e){if(e.children)for(var t=0;t<e.children.length;t++)e.children[t].getComponent("DeskCards").jiantou2.destroy()},xiaochu:function(){var e=cc.find("Canvas").getComponent("MJDataBind");this.initjiantou(e.deskcards_current_panel),this.initjiantou(e.deskcards_right_panel),this.initjiantou(e.deskcards_top_panel),this.initjiantou(e.deskcards_left_panel)},cardcolor:function(){"yellow"==cc.sys.localStorage.getItem("cardcolor")?(this.cardvalue.children[0].active=!1,this.cardvalue.children[1].active=!1):"green"==cc.sys.localStorage.getItem("cardcolor")?(this.cardvalue.children[0].active=!0,this.cardvalue.children[1].active=!1):"red"==cc.sys.localStorage.getItem("cardcolor")&&(this.cardvalue.children[0].active=!1,this.cardvalue.children[1].active=!0)}}),cc._RF.pop()},{}],EndCards:[function(e,t,n){"use strict";cc._RF.push(t,"add31U5TpRABZmtKeG+Qze+","EndCards");var a=e("WJFCommon");cc.Class({extends:a,properties:{headimgs:cc.Node,peoname:cc.Label,count:cc.Label,mjloyad:cc.Node,mjloyad2:cc.Node,mjkong:cc.Node,jifan:cc.Label,card:cc.Prefab,win:cc.Node,hu:cc.Label,dong:cc.Node,xi:cc.Node,nan:cc.Node,bei:cc.Node,redwin:cc.SpriteFrame,diaopao:cc.SpriteFrame,target:cc.Node,hua:cc.Prefab,buhua:cc.Prefab,huaParent:cc.Node,banker:cc.Node},onLoad:function(){},init:function(){var e=void 0,t=0,n=0,a=void 0,i="",r="",c="";if(this.hu.string="",this.data.point)for(var o=this.data.user,s=cc.find("Canvas").getComponent("MJDataBind").playersarray,l=0;l<s.length;l++){var d=s[l].getComponent("MaJiangPlayer");o==d.data.id&&(d.goldcoins.string=this.data.point)}if(this.data.gang&&(t=this.data.gang.count),this.data.balance){var u=void 0,p=void 0,h=cc.find("Canvas/summary").getComponent("SummaryClick");if(this.data.balance.bu){u=this.decode(this.data.balance.bu);for(var f=0;f<u.length;f++){var g=cc.instantiate(this.buhua);g.getComponent("BuHuaAction").init(u[f]),g.parent=this.huaParent}}if(-1!=this.data.balance.bao&&((p=cc.instantiate(h.bp)).getComponent("DeskCards").init(this.data.balance.bao,"B",!0),p.parent=h.bpp),this.data.balance.huCard&&this.data.balance.huCard,1==this.data.balance.drop&&(i="点炮",this.target.getComponent(cc.Sprite).spriteFrame=this.diaopao,this.target.color=new cc.Color(255,255,255)),this.data.balance.taishu&&(c=" "+this.data.balance.taishu+"台"),a=this.data.balance.units,n=this.data.balance.count,a)for(var m="",v=0;v<a.length;v++)"wz"==cc.beimi.GameBase.gameModel&&(m=a[v].point),this.hu.string+=a[v].tip+" "+m+" ";"wz"!=cc.beimi.GameBase.gameModel&&(this.jifan.string=n+"番   "+t+"杠   ",r=1==this.data.balance.noTing?"未上听":"上听")}this.hu.string+=r+"  "+i+" "+c;var y=cc.find("Canvas").getComponent("MJDataBind").playersarray,C=this.decode(this.data.cards);C.sort(function(e,t){return e-t});for(var w=0;w<y.length;w++){var b=y[w].getComponent("MaJiangPlayer");b.data.id==this.data.user&&(this[b.wind]&&(this[b.wind].active=!0),this.data.user==cc.beimi.banker&&(this.banker.active=!0),e=b.data.headimgurl,this.peoname.string=b.data.username)}if(e){var k=e,_=this.headimgs.getComponent(cc.Sprite),S=this.headimgs;cc.loader.load({url:k,type:"jpg"},function(e,t){_.spriteFrame=new cc.SpriteFrame(t),S.width=52,S.height=47})}this.count.string=this.data.count,1==this.data.win&&(this.target.getComponent(cc.Sprite).spriteFrame=this.redwin,this.win.active=!0);for(var j=0;j<this.data.actions.length;j++){var I=cc.instantiate(this.mjkong);I.parent=this.mjloyad;var N=this.decode(this.data.actions[j].card);if(N.sort(function(e,t){return e-t}),"gang"==this.data.actions[j].action&&1==N.length)for(var x=[N[0],N[0],N[0],N[0]],A=0;A<4;A++){var B=cc.instantiate(this.card),R=!1;"an"==this.data.actions[j].type&&2!=A&&(R=!0);var D=B.getComponent("DanAction");D.init(x[A],R,"","1"),D.target.height=53,D.target.width=32,B.parent=I}else if("dan"==this.data.actions[j].action){var F=cc.find("Canvas").getComponent("MJDataBind"),P=F.player(this.data.user,F),M=void 0;M="current"==P.tablepos?cc.find("Canvas/content/handcards/deskcard/kong").children[j+1]:cc.find("Canvas/content/handcards/"+P.tablepos+"desk/kong").children[j+1];for(var O=0;O<M.children.length;O++){var E=cc.instantiate(this.card),T=E.getComponent("DanAction"),J=M.children[O].getComponent("DanAction");T.init(J.mjtype,!1,"",J.count.string),T.target.height=53,T.target.width=32,E.parent=I}}else for(var G=0;G<N.length;G++){var L=cc.instantiate(this.card),U=N[G],z=L.getComponent("DanAction");z.init(U,!1,"","1"),z.target.height=53,z.target.width=32,L.parent=I}}for(var H=cc.instantiate(this.mjkong),W=0;W<C.length;W++)if(H.parent=this.mjloyad,C[W]>-32){var q=cc.instantiate(this.card),X=q.getComponent("DanAction");X.init(C[W],!1,"","1","",!0),X.target.height=53,X.target.width=32,q.parent=H}else{var Y=cc.instantiate(this.hua),V=Y.getComponent("BuHuaAction");V.init(C[W],"",!0),V.target.height=53,V.target.width=32,Y.parent=H}if(this.data.win){var K=cc.instantiate(this.mjkong);if(K.parent=this.mjloyad,this.data.balance.huCard>-32){var Z=cc.instantiate(this.card),Q=Z.getComponent("DanAction");Q.init(this.data.balance.huCard,!1,"","1","",!0),Q.target.height=53,Q.target.width=32,Z.parent=K}else{var $=cc.instantiate(this.hua),ee=$.getComponent("BuHuaAction");ee.init(this.data.balance.huCard,"",!0),ee.target.height=53,ee.target.width=32,$.parent=K}}},setData:function(e){this.data=e,this.init()},isDan:function(e){for(var t="yao",n=0;n<e.length;n++){if(e[n]<0){if(parseInt(e[n]/4)<-3){t="wind";break}t="xi";break}if(8==parseInt(e[n]%36/4)&&(0==parseInt(parseInt(e[n]/4)/9)||1==parseInt(parseInt(e[n]/4)/9)||2==parseInt(parseInt(e[n]/4)/9))){t="jiu";break}}return t}}),cc._RF.pop()},{WJFCommon:"WJFCommon"}],GameEvent:[function(e,t,n){"use strict";cc._RF.push(t,"67bbeo3e7VKwKjcTp+brx4g","GameEvent");var a=e("WJFCommon");cc.Class({extends:a,properties:{actionnode_two:{default:null,type:cc.Node},actionnode_two_list:{default:null,type:cc.Node},action_gang_ming_prefab:{default:null,type:cc.Prefab},action_gang_an_prefab:{default:null,type:cc.Prefab},gang_current:{default:null,type:cc.Node},dan_topcurrent:cc.Prefab,dan_leftcurrent:cc.Prefab,dan_rightcurrent:cc.Prefab,dan_mycurrent:cc.Prefab,left_danLoyad:cc.Node,right_danLoyad:cc.Node,top_danLoyad:cc.Node,one_card_panel:{default:null,type:cc.Node}},onLoad:function(){},onClick:function(e,t){this.node.dispatchEvent(new cc.Event.EventCustom(t,!0))},click:function(e){e.target.active=!1},statics:{action_event:function(e,t){var n=cc.find("Canvas/js/GameEvent").getComponent("GameEvent");t=cc.find("Canvas").getComponent("MJDataBind"),cc.sys.localStorage.setItem("altake","true"),cc.sys.localStorage.removeItem("take");var a=void 0,i=void 0,r=void 0,c=void 0,o=void 0,s=void 0,l=void 0;if(e.chis){t.chis=e.chis;for(var d=0;d<e.chis.length;d++)t.chis[d].push(e.card)}else t.chis=[];if(t.gangs=e.gangs?e.gangs:[],t.dans=e.dans?e.dans:[],t.tings=e.tings?e.tings:[],1==e.deal){cc.sys.localStorage.setItem("guo","true");for(p=0;p<n.actionnode_two_list.children.length;p++){var u=n.actionnode_two_list.children[p];"gang"==u.name&&(a=u),"dan"==u.name&&(s=u),"ting"==u.name&&(l=u),"hu"==u.name&&(c=u),"guo"==u.name&&(o=u),u.active=!1}f=0;e.hu&&(c.active=!0,c.x=110*f-200,f++),e.gang&&(a.active=!0,a.x=110*f-200,f++),e.dan&&(s.active=!0,s.x=110*f-200,f++),e.ting&&(l.active=!0,l.x=110*f-200,f++),o.active=!0,o.x=110*f-200,f++;cc.moveTo(.1,800-285*f,-100);n.actionnode_two.x=-250-100*f,t.action123="deal"}else{for(var p=0;p<n.actionnode_two_list.children.length;p++){var h=n.actionnode_two_list.children[p];"gang"==h.name&&(a=h),"peng"==h.name&&(i=h),"chi"==h.name&&(r=h),"hu"==h.name&&(c=h),"guo"==h.name&&(o=h),h.active=!1}var f=0;e.hu&&(c.active=!0,c.x=110*f-400,f++),e.gang&&(a.active=!0,a.x=110*f-400,f++),e.peng&&(i.active=!0,i.x=110*f-400,f++),e.chi&&(r.active=!0,r.x=110*f-400,f++),0==e.deal&&(o.active=!0,o.x=110*f-400,f++);cc.moveTo(.1,800-285*f,-100);n.actionnode_two.x=-250-100*f,t.action123="two"}},selectaction_event:function(t,n){n=cc.find("Canvas").getComponent("MJDataBind");var a=e("GameStartInit"),i=e("GameEvent"),r=a.player(t.userid,n),c=void 0,o=void 0;t.target&&(o=a.player(t.target,n).tablepos),n.exchange_searchlight(r.tablepos,n),cc.weijifen.user.id==t.userid&&("true"!=cc.sys.localStorage.getItem("cb")&&cc.sys.localStorage.setItem("take","true"),"all"==t.target?(cc.instantiate(n.action_gang_ming_prefab).parent=n.deskcards_right_panel.parent,cc.instantiate(n.action_gang_ming_prefab).parent=n.deskcards_top_panel.parent,cc.instantiate(n.action_gang_ming_prefab).parent=n.deskcards_left_panel.parent):i.select_action_searchlight(t,n,r),i.handCardRemove(t,n)),c=cc.find("Canvas/cards/handcards/"+r.tablepos+"/kongcards"),i.otherHandCardRemove(t,n,r.tablepos);var s=void 0,l=!1,d=r.tablepos;if("chi"==t.action){t.cards.sort(function(e,t){return e-t}),t.cards.splice(1,0,t.card),s=t.cards}else"peng"==t.action?(t.cards.push(t.card),s=t.cards):"gang"==t.action?(t.card&&-1!=t.card&&t.cards.push(t.card),"an"==t.actype&&(l=!0),s=t.cards):"dan"==t.action&&(s=t.cards);if(i.cardModle(s,c,l,d,n,t.action,o),"true"!=cc.sys.localStorage.getItem("cb")&&("peng"==t.action||"gang"==t.action&&-1!=t.card||"chi"==t.action||"hu"==t.action)){var u=a.player(t.target,n),p=null;(p="right"==u.tablepos?n.deskcards_right_panel:"left"==u.tablepos?n.deskcards_left_panel:"top"==u.tablepos?n.deskcards_top_panel:n.deskcards_current_panel).children.length>0&&p.children[p.children.length-1].destroy()}},select_action_searchlight:function(e,t,n){t.exchange_searchlight(n.tablepos,t),t.exchange_state("nextplayer",t)},handCardRemove:function(e,t){if(e.cards)for(var n=0;n<e.cards.length;n++)for(var a=0;a<t.playercards.length;a++){var i=t.playercards[a].getComponent("HandCards");e.cards[n]==i.value&&(t.cardpool.put(t.playercards[a]),t.playercards.splice(a,1))}if(-1!=e.card)for(var r=0;r<t.playercards.length;){var c=t.playercards[r].getComponent("HandCards");if(e.card==c.value){t.cardpool.put(t.playercards[r]),t.playercards.splice(r,1);break}r++}},otherHandCardRemove:function(e,t,n){for(var a=cc.find("Canvas/js/GameStartInit").getComponent("GameStartInit"),i=0;i<e.cards.length;i++)"top"==n?(a.top_panel.children[i].destroy(),t.topcards.splice(i,1)):"right"==n?(a.right_panel.children[i].destroy(),t.rightcards.splice(i,1)):"left"==n&&(a.left_panel.children[i].destroy(),t.leftcards.splice(i,1))},cardModle:function(t,n,a,r,c,o,s){var l=e("GameStartInit"),d=cc.find("Canvas/js/GameEvent").getComponent("GameEvent");if(1==t.length){var u;if("top"==r?(u=l.findCardForKong(n,t[0],o),m=(g=cc.instantiate(d.dan_topcurrent)).getComponent("DanAction")):"left"==r?(u=l.findCardForKong(n,t[0],o),m=(g=cc.instantiate(d.dan_leftcurrent)).getComponent("DanAction")):"right"==r?(u=l.findCardForKong(n,t[0],o),m=(g=cc.instantiate(d.dan_rightcurrent)).getComponent("DanAction")):(u=l.findCardForKong(n,t[0],o),m=(g=cc.instantiate(d.dan_mycurrent)).getComponent("DanAction")),m.init(t[i],!1,r,"1"),u.isGang)g.zIndex=1,g.parent=u.cardNode,u.cardNode.sortAllChildren();else{var p=u.cardNode.children[u.cardNum].getComponent("DanAction");p.count.string=Number(Number(p.count.string)+1),p.countactive()}}else{var h=null;h="top"==r?cc.instantiate(d.top_danLoyad):"left"==r?cc.instantiate(d.left_danLoyad):"right"==r?cc.instantiate(d.right_danLoyad):cc.instantiate(d.one_card_panel);for(var f=0;f<t.length;f++){if("top"==r)g=cc.instantiate(d.dan_topcurrent);else if("left"==r)g=cc.instantiate(d.dan_leftcurrent);else if("right"==r)g=cc.instantiate(d.dan_rightcurrent);else var g=cc.instantiate(d.dan_mycurrent);var m=g.getComponent("DanAction");2==f&&1==a?m.init(t[f],!1,r,"1"):"dan"!=o&&1==f&&1!=a?m.init(t[f],!1,r,"1",s):m.init(t[f],a,r,"1"),71<t[f]&&t[f]<76&&"chi"!=o?g.zIndex=9999:g.zIndex=0,g.parent=h,h.sortAllChildren()}h.getComponent("Kongcards").init(o),h.parent=n}},findCardForKong:function(e,t,n){for(var a,i,r,c=0;c<e.children.length;c++){var o=e.children[c],s=o.getComponent("Kongcards"),l=s.action,d=(s.length,s.type),u=parseInt(t/4),p=parseInt(u/9),h=o.children;if(2==p&&0==parseInt(t%36/4)&&o.children.length>0&&"yao"!=d&&"dan"==n&&"dan"==l){a=o,r=0,i=!1;break}if("gang"==n&&h.length>0&"peng"==l)for(var f=0;f<h.length;f++){m=h[f];if(parseInt(t%36/4)==m.getComponent("DanAction").mjvalue&&parseInt(t/36)==m.getComponent("DanAction").cardtype||t<0&&parseInt(t/4)==m.getComponent("DanAction").cardcolors){a=o,r=f,i=!0;break}}else if(n==l&&h.length>0){i=!1;for(var g=0;g<h.length;g++){var m=h[g];if(3==h.length&&"wind"==d&&parseInt(t/4)>=-7&&parseInt(t/4)<=-4){i=!0;for(var v=0;v<h.length;v++){var y=h[v];if(parseInt(t/4)==y.getComponent("DanAction").cardcolors){i=!1,a=o,r=v;break}a=o,r=v}break}if(t<0&&("wind"==d&&parseInt(t/4)>=-7&&parseInt(t/4)<=-4||"xi"==d&&parseInt(t/4)>=-3&&parseInt(t/4)<=-1)){if(parseInt(t/4)==parseInt(m.getComponent("DanAction").value/4)){a=o,r=g;break}if(2==m.getComponent("DanAction").cardtype&&0==parseInt(m.getComponent("DanAction").value%36/4)){m.getComponent("DanAction").setValue(t),a=o,r=g;break}}else if(t>0&&("yao"==d&&0==parseInt(t%36/4)||"jiu"==d&&8==parseInt(t%36/4))){if(parseInt(t%36/4)==parseInt(m.getComponent("DanAction").value%36/4)&&parseInt(m.getComponent("DanAction").value/36)==parseInt(t/36)){a=o,r=g;break}if(2==m.getComponent("DanAction").cardtype&&0==parseInt(m.getComponent("DanAction").value%36/4)){m.getComponent("DanAction").setValue(t),a=o,r=g;break}}}}}return{cardNode:a,isGang:i,cardNum:r}}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameStartInit:"GameStartInit",WJFCommon:"WJFCommon"}],GameOver:[function(e,t,n){"use strict";cc._RF.push(t,"eaf79pgcN1EfYxKJgyn+3pK","GameOver"),cc.Class({extends:cc.Component,properties:{current_hu:cc.Node,top_hua:cc.Node,liuju:cc.Node},onLoad:function(){},statics:{allcards_event:function(t,n){n=cc.find("Canvas").getComponent("MJDataBind");var a=cc.find("Canvas/js/GameOver").getComponent("GameOver"),i=e("GameOver"),r=void 0;cc.sys.localStorage.removeItem("clear");for(var c=0;c<t.playOvers.length;c++)if(1==t.playOvers[c].win){if(r=t.playOvers[c].user,t.playOvers[c].balance.huCard>-32){(o=a.current_hu.children[1].getComponent("DanAction")).init(t.playOvers[c].balance.huCard,!1,"current","1");break}a.current_hu.children[1].active=!1,a.top_hua.active=!0;var o=a.top_hua.getComponent("BuHuaAction");o.init(t.playOvers[c].balance.huCard,"",!1);break}i.huaction(r),setTimeout(function(){n.endList(t,n,r)},3e3)},huaction:function(t){var n=cc.find("Canvas/js/GameOver").getComponent("GameOver"),a=e("GameStartInit");if(t){cc.beimi.audio.playSFX("nv/hu.mp3");var i=n.current_hu.getComponent(cc.Animation),r=a.player(t,this),c=cc.scaleTo(1.5,1.5);r.target.runAction(c),"top"==r.tablepos?(i.node.children[0].x=7,i.node.children[0].y=142,i.node.children[1].x=7,i.node.children[1].y=142,i.node.children[2].x=11,i.node.children[2].y=121,i.node.children[3].x=-156,i.node.children[3].y=146):"left"==r.tablepos?(i.node.children[0].x=-369,i.node.children[0].y=76,i.node.children[1].x=-369,i.node.children[1].y=76,i.node.children[2].x=-365,i.node.children[2].y=55,i.node.children[3].x=-358,i.node.children[3].y=-72):"right"==r.tablepos?(i.node.children[0].x=383,i.node.children[0].y=-31,i.node.children[1].x=383,i.node.children[1].y=-31,i.node.children[2].x=387,i.node.children[2].y=-52,i.node.children[3].x=372,i.node.children[3].y=115):(i.node.children[0].x=7,i.node.children[0].y=-69,i.node.children[1].x=7,i.node.children[1].y=-69,i.node.children[2].x=11,i.node.children[2].y=-90,i.node.children[3].x=219,i.node.children[3].y=-65),n.current_hu.active=!0,n.current_hu.getComponent(cc.Animation).play("current_hu")}else n.liuju.active=!0},huaction2:function(t){var n=e("GameStartInit"),a=gameOverNode.current_hu.getComponent(cc.Animation);gameOverNode.current_hu.active=!1,a.stop("current_hu"),n.player(t,this).target.scale=.91}}}),cc._RF.pop()},{GameOver:"GameOver",GameStartInit:"GameStartInit"}],GamePlay:[function(e,t,n){"use strict";cc._RF.push(t,"52220iZoAtAF6hDztU51MRp","GamePlay"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},statics:{lasthands_event:function(e,t){if(t=cc.find("Canvas").getComponent("MJDataBind"),e.userid==cc.weijifen.user.id)t.exchange_state("lasthands",t),t.exchange_searchlight("current",t),"true"!=cc.sys.localStorage.getItem("altake")&&cc.sys.localStorage.setItem("take","true");else{t.exchange_state("otherplayer",t);for(var n=0;n<t.playersarray.length;n++){var a=t.playersarray[n].getComponent("MaJiangPlayer");if(a.data.id==e.userid){t.exchange_searchlight(a.tablepos,t);break}}}},takecard_event:function(t,n){n=cc.find("Canvas").getComponent("MJDataBind");var a=e("GameStartInit"),r=cc.find("Canvas/js/GameStartInit").getComponent("GameStartInit"),c=e("GamePlay");cc.sys.localStorage.removeItem("cb"),c.qujuju(t);var o=a.player(t.userid,n);if(t.ting&&0==n[o.tablepos+"ting"].active&&(n.tingting.active=!0,setTimeout(function(){n.tingting.active=!1},2e3),n[o.tablepos+"ting"].active=!0),t.userid==cc.weijifen.user.id){t.ting||a.tingnoaction();var s=cc.find("Canvas").getComponent("MJDataBind").selectfather;if(1==s.active&&(s.active=!1,s.children[0].children[1].children.splice(0,s.children[0].children[1].children.length)),a.initcardwidth(),t.ting?(cc.sys.localStorage.setItem("alting","true"),cc.sys.localStorage.setItem("altings","true"),cc.sys.localStorage.setItem("take","true")):cc.sys.localStorage.removeItem("alting"),t.notSend||"true"!=cc.sys.localStorage.getItem("take")&&!t.allow)return;cc.sys.localStorage.removeItem("altake"),cc.sys.localStorage.removeItem("take");for(v=0;v<n.playercards.length;i++){var l=n.playercards[v].getComponent("HandCards");if(l.reinit(),t.card==l.value){n.playercards[v].zIndex=0,n.playercards[v].parent=null,l.reinit(),n.cardpool.put(n.playercards[v]),n.playercards.splice(v,1);var d=cc.instantiate(r.takecards_one);d.getComponent("DeskCards").init(l.value,"B"),n.deskcards.push(d),d.parent=n.deskcards_current_panel}else l.reinit(),1==l.selectcolor?n.playercards[v].zIndex=1e3+l.value:(l.value>=0?n.playercards[v].zIndex=l.value:n.playercards[v].zIndex=200+l.value,n.playercards[v].children[1].active&&(n.playercards[v].zIndex=-1)),v+=1}n.exchange_state("takecard",n)}else{var u=a.player(t.userid,n),p=void 0,h=void 0,f=void 0;if(!t.notSend){if("right"==u.tablepos){for(v=0;v<r.right_panel.children.length;v++)r.right_panel.children[v].getComponent("SpecCards").reinit();p=r.right_panel,h=r.takecards_right,f=n.deskcards_right_panel;var g=cc.instantiate(h);g.getComponent("DeskCards").init(t.card,"R"),g.parent=f}else if("left"==u.tablepos){for(v=0;v<r.left_panel.children.length;v++)r.left_panel.children[v].getComponent("SpecCards").reinit();p=r.left_panel,h=r.takecards_left,f=n.deskcards_left_panel;var m=cc.instantiate(h);m.getComponent("DeskCards").init(t.card,"L"),m.parent=f}else if("top"==u.tablepos){for(var v=0;v<r.top_panel.children.length;v++)r.top_panel.children[v].getComponent("SpecCards").reinit();p=r.top_panel,h=r.takecards_one,f=n.deskcards_top_panel;var y=cc.instantiate(h);y.getComponent("DeskCards").init(t.card,"B"),y.parent=f}p.children[p.children.length-1].destroy()}}},dealcard_event:function(t,n){var a=e("GamePlay");"true"==cc.sys.localStorage.getItem("cb")&&"true"!=cc.sys.localStorage.getItem("altings")?setTimeout(function(){a.dealcards(t,n)},2100):a.dealcards(t,n)},dealcards:function(t,n){cc.sys.localStorage.removeItem("cb");var a=e("GamePlay"),i=e("GameStartInit"),r=cc.find("Canvas/js/GameStartInit").getComponent("GameStartInit");if((n=cc.find("Canvas").getComponent("MJDataBind")).closeloadding(),cc.weijifen.playerNum)var c=cc.weijifen.playerNum;var o=i.player(t.userid,n);if(a.select_action_searchlight(t,n,o),t.bu)for(var s=n.decode(t.bu),l=0;l<s.length;l++)i.buhuaModle(s[l],o.tablepos,"",o.tablepos,n,"");if(t.userid==cc.weijifen.user.id)"true"!=cc.sys.localStorage.getItem("altings")&&i.tingnoaction(),"true"!=cc.sys.localStorage.getItem("altake")?cc.sys.localStorage.setItem("take","true"):cc.sys.localStorage.removeItem("altake"),a.initDealHandCards(n,t),"deal"!=n.action123&&n.shouOperationMune();else{n.shouOperationMune();var d=0;"top"==o.tablepos?d=1:"left"==o.tablepos&&(d=2),i.initPlayerHandCards(0,1,d,n,!0,c)}if(r.desk_cards.string=t.deskcards,t.power)if(t.powerCard&&t.powerCard.length>0){for(var u=0;u<cc.find("Canvas/cards/tesucards/baocard/baocard/card").children.length;u++)cc.find("Canvas/cards/tesucards/baocard/baocard/card").children[u].destroy();cc.weijifen.baopai=t.powerCard;for(var p=0;p<t.powerCard.length;p++){var h=cc.instantiate(n.ZM);h.parent=n.godcard.children[1],h.getComponent("DeskCards").init(t.powerCard[p],"B",!0)}}else{var f=cc.instantiate(n.FM);f.getComponent("DeskCards");f.parent=n.godcard.children[1]}},select_action_searchlight:function(e,t,n){(t=cc.find("Canvas").getComponent("MJDataBind")).exchange_searchlight(n.tablepos,t),t.exchange_state("nextplayer",t)},initDealHandCards:function(t,n){var a=e("GameStartInit");t=cc.find("Canvas").getComponent("MJDataBind"),a.initcardwidth();var i=t.cardpool.get(),r=i.getComponent("HandCards");t.playercards.push(i),r.init(n.card),r.lastone(),i.zIndex=2e3,i.parent=t.cards_panel},qujuju:function(t){var n=e("GameStartInit").player(t.userid,this),a=void 0;if((a="current"==n.tablepos?cc.find("Canvas/cards/handcards/current/kongcards"):cc.find("Canvas/cards/handcards/"+n.tablepos+"/kongcards")).children.length>1)try{a.children[a.children.length-1].children[1].getComponent("DanAction").jujufei()}catch(e){console.log("ohuo")}}}}),cc._RF.pop()},{GamePlay:"GamePlay",GameStartInit:"GameStartInit"}],GameStartInit:[function(e,t,n){"use strict";cc._RF.push(t,"d9ce0Hjf6VB2JTyrsTfqHQe","GameStartInit");var a=e("WJFCommon");cc.Class({extends:a,properties:{right_ready:cc.Node,left_ready:cc.Node,top_ready:cc.Node,current_ready:cc.Node,right_player:cc.Node,left_player:cc.Node,top_player:cc.Node,current_player:cc.Node,ZM:cc.Prefab,FM:cc.Prefab,godcard:cc.Node,desk_cards:{default:null,type:cc.Label},one_card_panel:{default:null,type:cc.Node},cards_panel:{default:null,type:cc.Node},right_panel:{default:null,type:cc.Node},cards_right:{default:null,type:cc.Prefab},top_panel:{default:null,type:cc.Node},cards_top:{default:null,type:cc.Prefab},left_panel:{default:null,type:cc.Node},cards_left:{default:null,type:cc.Prefab},buhua_top:cc.Prefab,buhua_lef:cc.Prefab,buhua_right:cc.Prefab,buhua_my:cc.Prefab,takecards_one:{default:null,type:cc.Prefab},takecards_left:{default:null,type:cc.Prefab},takecards_right:{default:null,type:cc.Prefab}},onLoad:function(){},statics:{players_event:function(t,n){n=cc.find("Canvas").getComponent("MJDataBind");var a=e("GameStartInit");cc.sys.localStorage.setItem(i,t.players.length),"init"!=cc.weijifen.state&&"ready"!=cc.weijifen.state||(a.collect(n),a.killPlayers(t)),n.readyNoActive(n);n.arry=[];for(var i=n.playersarray,r=0;r<t.players.length;r++)if(null!=t.players[r]){var c=t.players[r].createtime;if(n.arry.push(c),t.players[r].id==cc.weijifen.user.id)var o=n.arry.length}2==cc.weijifen.playerNum?1==o?(a.dong(0),a.publicData(0,t,"current",n.current_player,0,0,n),2==t.players.length&&a.publicData(1,t,"top",n.top_player,1,2,n)):(a.dong(2),a.publicData(0,t,"top",n.top_player,1,2,n),a.publicData(1,t,"current",n.current_player,0,0,n)):3==cc.weijifen.playerNum?1==o?(a.dong(0),a.publicData(0,t,"current",n.current_player,0,0,n),2==t.players.length?a.publicData(1,t,"right",n.right_player,0,1,n):3==t.players.length&&(a.publicData(1,t,"right",n.right_player,0,1,n),a.publicData(2,t,"top",n.top_player,1,2,n))):2==o?(a.dong(1),a.publicData(0,t,"top",n.top_player,1,2,n),a.publicData(1,t,"current",n.current_player,0,0,n),3==t.players.length&&a.publicData(2,t,"right",n.right_player,0,1,n)):3==o&&(a.dong(2),a.publicData(0,t,"right",n.right_player,0,1,n),a.publicData(1,t,"top",n.top_player,1,2,n),a.publicData(2,t,"current",n.current_player,0,0,n)):1==o?(a.dong(0),a.publicData(0,t,"current",n.current_player,0,0,n),2==t.players.length?a.publicData(1,t,"right",n.right_player,0,1,n):3==t.players.length?(a.publicData(1,t,"right",n.right_player,0,1,n),a.publicData(2,t,"top",n.top_player,1,2,n)):4==t.players.length&&(a.publicData(1,t,"right",n.right_player,0,1,n),a.publicData(2,t,"top",n.top_player,1,2,n),a.publicData(3,t,"left",n.left_player,2,3,n))):2==o?(a.dong(3),a.publicData(0,t,"left",n.left_player,2,3,n),a.publicData(1,t,"current",n.current_player,0,0,n),3==t.players.length?a.publicData(2,t,"right",n.right_player,0,1,n):4==t.players.length&&(a.publicData(2,t,"right",n.right_player,0,1,n),a.publicData(3,t,"top",n.top_player,1,2,n))):3==o?(a.dong(2),a.publicData(0,t,"top",n.top_player,1,2,n),a.publicData(1,t,"left",n.left_player,2,3,n),a.publicData(2,t,"current",n.current_player,0,0,n),4==t.players.length&&a.publicData(3,t,"right",n.right_player,0,1,n)):4==o&&(a.dong(1),a.publicData(0,t,"right",n.right_player,0,1,n),a.publicData(1,t,"top",n.top_player,1,2,n),a.publicData(2,t,"left",n.left_player,2,3,n),a.publicData(3,t,"current",n.current_player,0,0,n));var s=n.playersarray;if("ready"==cc.weijifen.state||"init"==cc.weijifen.state)for(var l=0;l<t.players.length;l++)for(var d=0;d<s.length;d++){var u=s[d].getComponent("MaJiangPlayer");t.players[l].id==u.data.id&&t.players[l].status&&"READY"==t.players[l].status&&a.readyTrue(u.tablepos,n)}"ready"!=cc.weijifen.state&&"init"!=cc.weijifen.state&&cc.weijifen.playType},banker_event:function(e,t){t=cc.find("Canvas").getComponent("MJDataBind");for(var n=0;n<t.playersarray.length;n++){var a=t.playersarray[n].getComponent("MaJiangPlayer");if(e.userid==cc.weijifen.user.id?cc.weijifen.bankers=!0:cc.weijifen.bankers=!1,a.data.id==e.userid){cc.weijifen.banker=e.userid,a.banker();break}}},play_event:function(t,n){n=cc.find("Canvas").getComponent("MJDataBind");i=e("GameEvent");1==n.starttime.node.parent.active&&(n.starttime.node.parent.active=!1);var a=e("GameStartInit"),i=e("GameEvent"),r=cc.find("Canvas/js/GameStartInit").getComponent("GameStartInit");a.reinitGame(n);for(var c=0;c<t.players.length;c++){F=t.players[c];(t.player.played||F.played||t.player.actions.length>0||F.action)&&cc.sys.localStorage.setItem("cb","true")}n.loadding(),cc.find("Canvas/summary")&&cc.find("Canvas/summary").destroy(),cc.sys.localStorage.setItem("clear","true");var o=cc.find("Canvas/bg/center/button/readybtn");o.active=!0,o.x=-10;var s=cc.find("Canvas/cards/tesucards/baocard/baocard/card").children;if(s)for(var l=0;l<s.length;l++)cc.find("Canvas/cards/tesucards/baocard/baocard/card").children[l].destroy();cc.find("Canvas/notice")&&(cc.sys.localStorage.setItem("notice","true"),cc.find("Canvas/notice").active=!1),cc.weijifen.playType,cc.weijifen.baopai=null,n.roomInfo.active=!0,cc.find("Canvas/roomNum").getChildByName("quan")._components[0].string=t.round+1+"/"+n.maxRound;var d=cc.find("Canvas/rules").getChildByName("label")._components[0];if("jx"==cc.weijifen.GameBase.gameModel?d.string="座风 座花 双头子 风字百搭 19百搭 漂百搭":d.string=t.op,cc.weijifen.wanfa=t.op,n.readyNoActive(n),cc.weijifen.playerNum)var u=cc.weijifen.playerNum;p=cc.moveTo(.2,570,80);n.right_player.runAction(p);p=cc.moveTo(.2,-570,80);n.left_player.runAction(p);var p=cc.moveTo(.2,439,324);n.top_player.runAction(p),cc.sys.localStorage.removeItem("take"),cc.sys.localStorage.removeItem("ting"),n.exchange_state("begin",n);var h=t.player,f=n.decode(h.cards);if("wz"==cc.weijifen.GameBase.gameModel){if(h.powerCard){var g=n.decode(h.powerCard);cc.weijifen.powerCard=g,n.csNode.active=!0;var m=n.csNode.getComponent(cc.Sprite);if(1==g.length?(m.spriteFrame=n.cs1,n.csNode.width=65,n.csNode.setPosition(-568,301),r.godcard.children[1].x=-570):(m.spriteFrame=n.cs2,n.csNode.width=110,n.csNode.setPosition(-551,301),r.godcard.children[1].x=-555),g&&g.length>0){for(var v=0;v<cc.find("Canvas/cards/tesucards/baocard/baocard/card").children.length;v++)cc.find("Canvas/cards/tesucards/baocard/baocard/card").children[v].destroy();cc.weijifen.baopai=g;for(var y=0;y<g.length;y++)cc.weijifen.caishenCard+=g[y]+",",(b=cc.instantiate(r.ZM)).parent=r.godcard.children[0],(_=b.getComponent("DeskCards")).init(g[y],"B",!0)}}}else if(cc.find("Canvas/cards/tesucards/baocard/baocard").active=!0,t.player.powerCard)for(var C=n.decode(t.player.powerCard),w=0;w<C.length;w++){var b=cc.instantiate(r.ZM);b.parent=r.godcard.children[0],(_=b.getComponent("DeskCards")).init(C[w],"B",!0)}else{cc.find("Canvas/cards/tesucards/baocard/baocard/card").x=-560;var k=cc.instantiate(r.FM),_=k.getComponent("DeskCards");_.init(-3,"Z",!0),k.parent=r.godcard.children[0]}var S;if(h.buHua){S=n.decode(h.buHua),console.log(S);for(var j=a.player(h.playuser,n),I=0;I<S.length;I++)a.buhuaModle(S[I],j.tablepos,"",j.tablepos,n,"")}for(I=0;I<t.players.length;I++)if(t.players[I].buHua){console.log(S);var N=a.player(t.players[I].playuser,n);console.log(N.tablepos);for(var x=0;x<S.length;x++)a.buhuaModle(S[x],N.tablepos,"",N.tablepos,n,"")}setTimeout(function(){a.calcdesc_cards(r,136,t.deskcards)},0);var A,B=0;A="wz"==cc.weijifen.GameBase.gameModel?5:4;for(var R=0;R<A;R++)for(var D=0;D<t.players.length;D++){var F=t.players[D];if(t.player.played||F.played||t.player.actions.length>0||F.action){a.initMjCards(B,n,f,h.banker);for(var P=0,M=0,I=0;I<t.players.length;I++)if(t.players[I].playuser!=cc.weijifen.user.id){for(var O=n.playersarray,E=0;E<O.length;E++){var T=O[E].getComponent("MaJiangPlayer");if(t.players[I].playuser==T.data.id&&"current"!=T.tablepos){if("left"==T.tablepos){M=2;break}if("top"==T.tablepos){M=1;break}M=0;break}}a.initPlayerHandCards(B,t.players[P++].deskcards,M,n,!1,t.players[I].banker,u)}B+=1}else setTimeout(function(){a.initMjCards(B,n,f,h.banker);for(var e=0,i=0,r=0;r<t.players.length;r++)if(t.players[r].playuser!=cc.weijifen.user.id){for(var c=n.playersarray,o=0;o<c.length;o++){var s=c[o].getComponent("MaJiangPlayer");if(t.players[r].playuser==s.data.id&&"current"!=s.tablepos){if("left"==s.tablepos){i=2;break}if("top"==s.tablepos){i=1;break}i=0;break}}a.initPlayerHandCards(B,t.players[e++].deskcards,i,n,!1,t.players[r].banker,u)}B+=1},200*(R+1))}setTimeout(function(){r.cards_panel.getComponent(cc.Animation);for(var e=-100,i=0;i<n.playercards.length;i++)if(0==n.playercards[i].children[1].active){var c=n.playercards[i].getComponent("HandCards");c.value>=0?n.playercards[i].zIndex=c.value:n.playercards[i].zIndex=200+c.value,n.playercards[i].zIndex>e&&(e=n.playercards[i].zIndex,n.playercards[i])}a.initcardwidth(),1==h.banker&&t.player.played},1e3),setTimeout(function(){"true"!=cc.sys.localStorage.getItem("cb")&&n.exchange_state("play",n)},1500),setTimeout(function(){for(var e=!1,c=0;c<t.players.length;c++)if(t.players[c].played&&(e=!0),t.players[c].actions.length>0&&(e=!0),t.players[c].ting){var o=a.player(t.players[c].playuser,n);n[o.tablepos+"ting"].active=!0}if(1==t.player.banker){var s={};s.userid=t.player.playuser,a.banker_event(s,n)}if(t.player.ting&&(n.currentting.active=!0,cc.sys.localStorage.setItem("alting","true"),cc.sys.localStorage.setItem("altings","true"),cc.sys.localStorage.setItem("take","true"),n.tingAction(!0)),t.player.played||e||t.player.actions.length>0){if(cc.sys.localStorage.setItem("cl","true"),t.player.played)for(var l=n.decode(t.player.played),d=0;d<l.length;d++){var u=cc.instantiate(r.takecards_one);u.getComponent("DeskCards").init(l[d],"B"),n.deskcards.push(u),u.parent=n.deskcards_current_panel}for(var p=t.player.actions,h=0;h<p.length;h++){var f=!1,g=n.decode(p[h].card);if("an"==p[h].type&&(f=!0),g.length<4||f||"gang"==p[h].action||"peng"==p[h].action||"chi"==p[h].action)if("gang"==p[h].action&&1==g.length){var m=g.concat(g),v=m.concat(m);i.cardModle(v,cc.find("Canvas/cards/handcards/current/kongcards"),f,"",n,p[h].action)}else{g.sort(function(e,t){return e-t}),i.cardModle(g,cc.find("Canvas/cards/handcards/current/kongcards"),f,"",n,p[h].action)}else{var y=g.slice(0,3);i.cardModle(y,cc.find("Canvas/cards/handcards/current/kongcards"),f,"",n,p[h].action);for(var C=3;C<g.length;C++)i.selectaction_event({userid:cc.weijifen.user.id,cards:[g[C]],card:-1,action:"dan"},n)}}}for(var w=0;w<t.players.length;w++){var b=a.player(t.players[w].playuser,n),k={};if(1==t.players[w].banker&&(k.userid=t.players[w].playuser,a.banker_event(k,n)),t.touchPlay){var _=a.player(t.touchPlay,n);n.exchange_searchlight(_.tablepos,n),t.touchPlay==cc.weijifen.user.id&&cc.sys.localStorage.setItem("take","true")}if(!t.player.played&&t.player.banker,t.players[w].actions.length>0)for(var p=t.players[w].actions,S=0;S<p.length;S++){var f=!1,g=n.decode(p[S].card);if("an"==p[S].type&&(f=!0),g<4||f||"gang"==p[S].action||"peng"==p[S].action||"chi"==p[S].action)if("gang"==p[S].action&&1==g.length){var j=g.concat(g),I=j.concat(j);i.cardModle(I,cc.find("Canvas/cards/handcards/"+b.tablepos+"/kongcards"),f,b.tablepos,n,p[S].action)}else{g.sort(function(e,t){return e-t}),i.cardModle(g,cc.find("Canvas/cards/handcards/"+b.tablepos+"/kongcards"),f,b.tablepos,n,p[S].action)}else{var N=g.slice(0,3);i.cardModle(N,cc.find("Canvas/cards/handcards/"+b.tablepos+"/kongcards"),f,b.tablepos,n,p[S].action);for(var x=3;x<g.length;x++)i.selectaction_event({userid:b.data.id,cards:[g[x]],card:-1,action:"dan"},n)}}if(t.players[w].played)for(var A=n.decode(t.players[w].played),b=a.player(t.players[w].playuser,n),B=0;B<A.length;B++)a.initDeskCards(A[B],b.tablepos,n)}n.closeloadding(),"LG"==cc.weijifen.playType&&n.lgdong(t)},2e3)},collect:function(e){for(var t=0;t<e.playersarray.length;){var n=e.playersarray[t];n.getComponent("MaJiangPlayer").data.id!=cc.weijifen.user.id?(e.playerspool.put(n),e.playersarray.splice(t,1)):t++}},dong:function(e){cc.weijifen.bankercount=e},publicData:function(e,t,n,a,i,r,c){if(cc.sys.localStorage.getItem(n)!=t.players[e].id){var o=c.playerspool.get(),s=o.getComponent("MaJiangPlayer");o.setPosition(0,0),c.playersarray.push(o),o.parent=a,s.init(t.players[e],i,n,r),cc.sys.localStorage.setItem(n,t.players[e].id),cc.sys.localStorage.setItem("count",r)}},killPlayers:function(e){cc.sys.localStorage.removeItem("top"),cc.sys.localStorage.removeItem("left"),cc.sys.localStorage.removeItem("right");var t=e.players.length,n=cc.sys.localStorage.getItem("count");Number(n)==t&&"true"==cc.weijifen.match&&cc.sys.localStorage.setItem("count",String(Number(n)-1)),cc.weijifen.playersss=e.players.length},initDeskCards:function(e,t,n){var a=cc.find("Canvas/js/GameStartInit").getComponent("GameStartInit");if("left"==t){var i=cc.instantiate(a.takecards_left);i.getComponent("DeskCards").init(e,"L"),i.parent=n.deskcards_left_panel}else if("right"==t){var r=cc.instantiate(a.takecards_right);r.getComponent("DeskCards").init(e,"R"),r.parent=n.deskcards_right_panel}else if("top"==t){var c=cc.instantiate(a.takecards_one);c.getComponent("DeskCards").init(e,"B"),c.parent=n.deskcards_top_panel}},reinitGame:function(t){t=cc.find("Canvas").getComponent("MJDataBind");var n=e("GameStartInit");n.tingnoaction(),n.destroycards("current",t),n.destroycards("left",t),n.destroycards("right",t),n.destroycards("top",t),n.destroyPlayer(t),n.tingactivefalse(),n.inintBuHuan(),n.destroybuhuas("left",t),n.destroybuhuas("right",t),n.destroybuhuas("top",t),n.destroybuhuas("current",t),cc.sys.localStorage.removeItem("altake"),cc.sys.localStorage.removeItem("alting"),cc.sys.localStorage.removeItem("altings"),cc.sys.localStorage.removeItem("guo"),cc.sys.localStorage.removeItem("cb")},tingnoaction:function(){for(var e=cc.find("Canvas/cards/handcards/current/currenthandcards").children.length,t=0;t<e;t++){var n=cc.find("Canvas/cards/handcards/current/currenthandcards").children[t],a=cc.find("Canvas/cards/handcards/current/currenthandcards").children[t].children[0];n.getComponent("HandCards").cardvalue.color=new cc.Color(255,255,255),a.getComponent(cc.Button).interactable=!0}cc.find("Canvas/tingselect")&&(cc.find("Canvas/tingselect").active=!1)},destroyPlayer:function(e){for(var t=e.playersarray,n=0;n<t.length;n++)t[n].getComponent("MaJiangPlayer").creator.active=!1},destroycards:function(e,t){var n=cc.find("Canvas/cards/handcards/"+e+"/"+e+"handcards").children.length,a=cc.find("Canvas/cards/deskcards/"+e).children.length,i=cc.find("Canvas/cards/handcards/"+e+"/kongcards").children.length;if("current"==e){for(var r=0;r<n;r++){var c=t.playercards[r].getComponent("HandCards");c.csImageTop.active=!1,c.target.zIndex=0,c.target.children[0].getComponent(cc.Button).enabled=!0,c.cardvalue.color=new cc.Color(255,255,255),c.reinit(),t.cardpool.put(t.playercards[r])}t.playercards=[]}else{for(var o=0;o<n;o++)cc.find("Canvas/cards/handcards/"+e+"/"+e+"handcards").children[o].destroy();"leftdesk"==e?t.leftcards=[]:"rightdesk"==e?t.rightcards=[]:t.topcards=[]}for(var s=0;s<a;s++)cc.find("Canvas/cards/deskcards/"+e+"/"+e+"handcards").children[s].destroy();for(var l=1;l<i;l++)cc.find("Canvas/cards/handcards/"+e+"/kongcards").children[l].destroy()},tingactivefalse:function(){},inintBuHuan:function(){cc.weijifen.powerCard=null},destroybuhuas:function(e,t){var n=void 0;n=cc.find("Canvas/cards/tesucards/huacard/"+e+"/buhua");for(var a=0;a<n.children.length;a++)n.children[a].destroy()},calcdesc_cards:function(t,n,a){var i=e("GameStartInit");(n-=1)>a&&(t.desk_cards.string=n,setTimeout(function(){i.calcdesc_cards(t,n,a)},5))},initMjCards:function(e,t,n,a){for(var i=cc.find("Canvas/js/GameStartInit").getComponent("GameStartInit"),r=4*e;r<n.length&&r<4*(e+1);r++)t.cardpool&&function(){var e=t.cardpool.get(),c=e.getComponent("HandCards");t.playercards.push(e),c.init(n[r]),1==a&&r==n.length-1?e.parent=i.one_card_panel:e.parent=i.cards_panel,setTimeout(function(){e.parent=i.cards_panel},200)}()},initPlayerHandCards:function(t,n,a,i,r,c,o){var s=e("GameStartInit"),l=cc.find("Canvas/js/GameStartInit").getComponent("GameStartInit"),d=l.right_panel,u=i.rightcards,p=l.cards_right;2==o?(d=l.top_panel,u=i.topcards,p=l.cards_top):3==o&&1==a?(d=l.top_panel,u=i.topcards,p=l.cards_top):1==a?(d=l.top_panel,u=i.topcards,p=l.cards_top):2==a&&(d=l.left_panel,u=i.leftcards,p=l.cards_left),s.initOtherCards(t,i,n,p,u,d,r,a,c)},initOtherCards:function(e,t,n,a,i,r,c,o,s){cc.find("Canvas").getComponent("MJDataBind");for(var l=0;l<r.children.length;l++)r.children[l].getComponent("SpecCards").node.height=0,r.children[l].getComponent("SpecCards").node.width=0;for(var d=4*e;d<n&&d<4*(e+1);d++){var u=cc.instantiate(a);u.getComponent("SpecCards").init(c,o),u.parent=r,i.push(u)}},initcardwidth:function(e){for(var t=cc.find("Canvas/cards/handcards/current/currenthandcards").children.length,n=0;n<t;n++){var a=cc.find("Canvas/cards/handcards/current/currenthandcards").children[n],i=a.getComponent("HandCards");i.take=!1,cc.weijifen.cardNum>14?(i.cardvalue.width=67.5,i.cardvalue.height=102.5,a.width=65.5):a.width=73,i.target.y=0,e||i.caishen||"true"==cc.sys.localStorage.getItem("ting")||(i.cardvalue.color=new cc.Color(255,255,255))}cc.find("Canvas/cards/handcards/current/currenthandcards").sortAllChildren()},player:function(e,t){var n=void 0;t=cc.find("Canvas").getComponent("MJDataBind");for(var a=0;a<t.playersarray.length;a++){var i=t.playersarray[a].getComponent("MaJiangPlayer");if(i.data.id==e){n=i;break}}return n},buhuaModle:function(e,t,n,a,i,r){var c,o=cc.find("Canvas/cards/tesucards/huacard/"+t),s=cc.find("Canvas/js/GameStartInit").getComponent("GameStartInit");("top"==a?(c=cc.instantiate(s.buhua_top)).getComponent("BuHuaAction"):"left"==a?(c=cc.instantiate(s.buhua_lef)).getComponent("BuHuaAction"):"right"==a?(c=cc.instantiate(s.buhua_right)).getComponent("BuHuaAction"):(c=cc.instantiate(s.buhua_my)).getComponent("BuHuaAction")).init(e,a),c.parent=o},readyTrue:function(e,t){var n=cc.find("Canvas/js/GameStartInit").getComponent("GameStartInit");"left"==e?n.left_ready.active=!0:"right"==e?n.right_ready.active=!0:"top"==e?n.top_ready.active=!0:"current"==e&&(n.current_ready.active=!0)},findCardForKong:function(e,t,n){for(var a,i,r,c=0;c<e.children.length;c++){var o=e.children[c],s=o.getComponent("Kongcards"),l=s.action,d=(s.length,s.type),u=parseInt(t/4),p=parseInt(u/9),h=o.children;if(2==p&&0==parseInt(t%36/4)&&o.children.length>0&&"yao"!=d&&"dan"==n&&"dan"==l){a=o,r=0,i=!1;break}if("gang"==n&&h.length>0&"peng"==l)for(var f=0;f<h.length;f++){m=h[f];if(parseInt(t%36/4)==m.getComponent("DanAction").mjvalue&&parseInt(t/36)==m.getComponent("DanAction").cardtype||t<0&&parseInt(t/4)==m.getComponent("DanAction").cardcolors){a=o,r=f,i=!0;break}}else if(n==l&&h.length>0){i=!1;for(var g=0;g<h.length;g++){var m=h[g];if(3==h.length&&"wind"==d&&parseInt(t/4)>=-7&&parseInt(t/4)<=-4){i=!0;for(var v=0;v<h.length;v++){var y=h[v];if(parseInt(t/4)==y.getComponent("DanAction").cardcolors){i=!1,a=o,r=v;break}a=o,r=v}break}if(t<0&&("wind"==d&&parseInt(t/4)>=-7&&parseInt(t/4)<=-4||"xi"==d&&parseInt(t/4)>=-3&&parseInt(t/4)<=-1)){if(parseInt(t/4)==parseInt(m.getComponent("DanAction").value/4)){a=o,r=g;break}if(2==m.getComponent("DanAction").cardtype&&0==parseInt(m.getComponent("DanAction").value%36/4)){m.getComponent("DanAction").setValue(t),a=o,r=g;break}}else if(t>0&&("yao"==d&&0==parseInt(t%36/4)||"jiu"==d&&8==parseInt(t%36/4))){if(parseInt(t%36/4)==parseInt(m.getComponent("DanAction").value%36/4)&&parseInt(m.getComponent("DanAction").value/36)==parseInt(t/36)){a=o,r=g;break}if(2==m.getComponent("DanAction").cardtype&&0==parseInt(m.getComponent("DanAction").value%36/4)){m.getComponent("DanAction").setValue(t),a=o,r=g;break}}}}}return{cardNode:a,isGang:i,cardNum:r}}}}),cc._RF.pop()},{GameEvent:"GameEvent",GameStartInit:"GameStartInit",WJFCommon:"WJFCommon"}],GangAction:[function(e,t,n){"use strict";cc._RF.push(t,"0fe67JecMpLz5GGCrRtpy0D","GangAction"),cc.Class({extends:cc.Component,properties:{atlas:{default:null,type:cc.SpriteAtlas},beimi0:{default:null,type:cc.SpriteAtlas},card_one:{default:null,type:cc.Node},card_two:{default:null,type:cc.Node},card_three:{default:null,type:cc.Node},card_four:{default:null,type:cc.Node},card_last:{default:null,type:cc.Node},target:{default:null,type:cc.Node}},onLoad:function(){},init:function(e,t){this.value=e;var n=parseInt(this.value/4),a=parseInt(n/9);this.mjtype=e,this.mjvalue=parseInt(this.value%36/4);var i=void 0,r=void 0;n<0?i="wind"+(n+8):0==a?i="wan"+(parseInt(this.value%36/4)+1):1==a?i="tong"+(parseInt(this.value%36/4)+1):2==a&&(i="suo"+(parseInt(this.value%36/4)+1)),r="suo2"==i?this.beimi0.getSpriteFrame("麻将牌-牌面-"+i):this.atlas.getSpriteFrame("麻将牌-牌面-"+i),this.card_one.getComponent(cc.Sprite).spriteFrame=r,this.card_two&&(this.card_two.getComponent(cc.Sprite).spriteFrame=r),this.card_three&&(this.card_three.getComponent(cc.Sprite).spriteFrame=r),this.card_four&&(this.card_four.getComponent(cc.Sprite).spriteFrame=r),this.card_last&&(this.card_last.active=0!=t)}}),cc._RF.pop()},{}],HTTP:[function(e,t,n){"use strict";cc._RF.push(t,"7f172QvezFC3KhkPPlQ6tXA","HTTP");var a=cc.Class({extends:cc.Component,properties:{},statics:{baseURL:"http://game.daily.bizpartner.cn",wsURL:"http://game.daily.bizpartner.cn:9081",authorization:null,httpGet:function(e,t,n,i){var r=cc.loader.getXMLHttpRequest();cc.weijifen.url=a.baseURL,r.onreadystatechange=function(){if(4===r.readyState)if(r.status>=200&&r.status<300){var e=r.responseText;t&&t(e,i)}else n&&n(i)},r.open("GET",a.baseURL+e,!0),null!=a.authorization&&r.setRequestHeader("authorization",a.authorization),cc.sys.isNative&&r.setRequestHeader("Accept-Encoding","gzip,deflate"),r.timeout=3e3,r.send()},encodeFormData:function(e){var t=[],n=/%20/g;for(var a in e){var i=e[a].toString(),r=encodeURIComponent(a).replace(n,"+")+"="+encodeURIComponent(i).replace(n,"+");t.push(r)}return t.join("&")},httpPost:function(e,t,n,i,r){var c=cc.loader.getXMLHttpRequest();c.onreadystatechange=function(){if(4===c.readyState)if(c.status>=200&&c.status<300){var e=c.responseText;n&&n(e,r)}else i&&i(r)},c.open("POST",a.baseURL+e,!0),null!==a.authorization&&c.setRequestHeader("authorization",a.authorization),cc.sys.isNative&&c.setRequestHeader("Accept-Encoding","gzip,deflate"),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.timeout=5e3,c.send(a.encodeFormData(t))}},onLoad:function(){}});cc._RF.pop()},{}],HandCards:[function(e,t,n){"use strict";cc._RF.push(t,"d89e7SPXOxAH5GfGr2osS+E","HandCards"),cc.Class({extends:cc.Component,properties:{mj:cc.Node,atlas:{default:null,type:cc.SpriteAtlas},weijifen0:{default:null,type:cc.SpriteAtlas},cardvalue:{default:null,type:cc.Node},target:{default:null,type:cc.Node},csImageTop:{default:null,type:cc.Node}},onLoad:function(){this.lastonecard=!1,this.take=!1,this.node.on("mousedown",function(e){console.log("Hello!")}),this.node.on("mousemove",function(e){console.log("Hello Mover!")})},init:function(e,t){this.cardcolor(),this.caishen=!1,this.take=!1,this.value=e;var n=void 0,a=parseInt(this.value/4),i=parseInt(a/9);this.mjtype=i,this.mjvalue=parseInt(this.value%36/4);var r=void 0;this.lastonecard=!1;var c=void 0,o=void 0,s=void 0,l=void 0,d=void 0,u=void 0;cc.weijifen.powerCard&&(s=parseInt(cc.weijifen.powerCard[0]/4),c=parseInt(s/9),d=parseInt(cc.weijifen.powerCard[0]%36/4)+1,2==cc.weijifen.powerCard.length&&(l=parseInt(cc.weijifen.powerCard[1]/4),o=parseInt(l/9),u=parseInt(cc.weijifen.powerCard[1]%36/4)+1)),a<0?(-7==a?r="M_wind_east":-6==a?r="M_wind_south":-5==a?r="M_wind_west":-4==a?r="M_wind_north":-3==a?r="M_red":-2==a?r="M_green":-1==a&&(r="M_white"),(a==s||null!=l&&a==l||this.value>=-39&&this.value<=-36)&&this.caishenCards()):(0==i?r="M_character_"+(parseInt(this.value%36/4)+1):1==i?r="M_dot_"+(parseInt(this.value%36/4)+1):2==i&&(r="M_bamboo_"+(parseInt(this.value%36/4)+1)),i==c&&parseInt(this.value%36/4)+1==d?this.caishenCards():i==o&&parseInt(this.value%36/4)+1==u&&this.caishenCards()),null==r&&(-38==e?r="M_autumn":-35==e?r="M_bamboo":-34==e?r="M_chrysanthemum":-33==e?r="M_orchid":-32==e?r="M_plum":-36==e?r="M_spring":-37==e?r="M_summer":-39==e&&(r="M_winter")),n=this.atlas.getSpriteFrame(r),this.cardvalue.getComponent(cc.Sprite).spriteFrame=n,cc.weijifen.cardNum>14&&!t?(this.cardvalue.width=65,this.cardvalue.height=100,this.cardvalue.children[0].y=42,this.cardvalue.children[0].width=70,this.cardvalue.children[1].y=42,this.cardvalue.children[1].width=70,this.target.width=63,cc.find("Canvas/cards/handcards/current/currenthandcards").y=5):t||(this.target.width=73),null==t&&this.getComponent(cc.Animation).play("majiang_current"),"true"==cc.sys.localStorage.getItem("alting")&&1!=t?this.mj.getComponent(cc.Button).interactable=!1:1!=t&&(this.mj.getComponent(cc.Button).interactable=!0)},caishenCards:function(){this.csImageTop.active=!0,this.target.zIndex=-999+this.value,this.target.children[0].getComponent(cc.Button).enabled=!1,this.cardvalue.color=new cc.Color(118,118,118),this.caishen=!0},lastone:function(){0==this.lastonecard&&(this.lastonecard=!0,cc.weijifen.cardNum>14?this.target.width=80:this.target.width=100,this.target.y=0,"true"==cc.sys.localStorage.getItem("alting")?this.mj.getComponent(cc.Button).interactable=!1:this.mj.getComponent(cc.Button).interactable=!0)},relastone:function(){1==this.lastonecard&&(this.lastonecard=!1,cc.weijifen.cardNum>14?(this.cardvalue.width=65,this.cardvalue.height=100,this.target.width=63):this.target.width=73,this.target.y=0)},reinit:function(){this.relastone(),this.lastonecard=!1,this.cardvalue.opacity=255,this.take&&(this.target.y=0,this.take=!1)},tingcolor:function(){this.cardvalue.color=new cc.Color(118,118,118)},cardcolor:function(){"yellow"==cc.sys.localStorage.getItem("cardcolor")?(this.cardvalue.children[0].active=!1,this.cardvalue.children[1].active=!1):"green"==cc.sys.localStorage.getItem("cardcolor")?(this.cardvalue.children[0].active=!0,this.cardvalue.children[1].active=!1):"red"==cc.sys.localStorage.getItem("cardcolor")&&(this.cardvalue.children[0].active=!1,this.cardvalue.children[1].active=!0)}}),cc._RF.pop()},{}],IOUtils:[function(e,t,n){"use strict";cc._RF.push(t,"d687d/F2I9HkrkXGTqAzG5C","IOUtils"),cc.Class({extends:cc.Component,properties:{},statics:{get:function(e){return cc.sys.localStorage.getItem(e)},put:function(e,t){cc.sys.localStorage.setItem(e,t)},remove:function(e){cc.sys.localStorage.removeItem(e)}}}),cc._RF.pop()},{}],JXcreteRoom:[function(e,t,n){"use strict";cc._RF.push(t,"a8510U9m6ZHY7o4e1kev1Dm","JXcreteRoom");var a,i,r,c,o,s=e("createRoom");cc.Class({extends:s,properties:{},onLoad:function(){i="both@@",a="2",r="4",c="100",o={}},clickmoshi:function(e){a=this.mosiOrpepleClick(e)},clickfanshu:function(e){c=this.mosiOrpepleClick(e)},clickPlayway:function(e){i=this.gameTypeClick(e,i)},createClick:function(){(i=i.split("@@")).pop(),o.player=i,o.game="JX",o.pepNums=r,o.count=a,o.player2=c,cc.weijifen.authorization&&(o.token=cc.weijifen.authorization),this.onClick(o)}}),cc._RF.pop()},{createRoom:"createRoom"}],Kongcards:[function(e,t,n){"use strict";cc._RF.push(t,"5bb73H496ZHXpQn0JDXqghM","Kongcards"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(e){this.action=e,this.length=this.node.children.length,this.type=null;for(var t=0;t<this.length;t++){var n=this.node.children[t].getComponent("DanAction");if(n.cardcolors>=-7&&n.cardcolors<=-4){this.type="wind";break}if(n.cardcolors<=-1&&n.cardcolors>=-3){this.type="xi";break}if(8==parseInt(n.value%36/4)){this.type="jiu";break}if((0==n.cardtype||1==n.cardtype)&&0==parseInt(n.value%36/4)){this.type="yao";break}}}}),cc._RF.pop()},{}],LGcreateRoom:[function(e,t,n){"use strict";cc._RF.push(t,"79bb9ShWP1INInRcSWItsOY","LGcreateRoom");var a,i,r,c,o,s=e("createRoom");cc.Class({extends:s,properties:{jushu:cc.Node,people:cc.Node},onLoad:function(){i="classic",r="3-6-9-12",a="8",c="4",o={}},clickmoshi:function(e){a=this.mosiOrpepleClick(e)},clickPepNum:function(e){c=this.mosiOrpepleClick(e)},clickPlayway1:function(e){"yiGu"==(i=e.target.name)?this.toggleClick(!1):this.toggleClick(!0),i=this.mosiOrpepleClick(e)},clickPlayway2:function(e){r=this.mosiOrpepleClick(e)},createClick:function(){(i=i.split("@@")).pop(),o.player=i,o.player2=r,o.pepNums=c,o.modeltype=a,o.game="LG",cc.weijifen.playType="LG",cc.weijifen.authorization&&(o.token=cc.weijifen.authorization),this.onClick(o)},toggleClick:function(e){for(var t=1;t<3;t++)this.people.children[t].active=e;this.jushu.active=e,c=4}}),cc._RF.pop()},{createRoom:"createRoom"}],LYAudio:[function(e,t,n){"use strict";cc._RF.push(t,"06d54bp3qtCzrNEe/iYixka","LYAudio");var a=e("WJFCommon");cc.Class({extends:a,properties:{},onLoad:function(){this.init()},init:function(){var e=this;e.START=0,e.END=0;try{cc.promise=navigator.mediaDevices.getUserMedia({audio:!0}),cc.promise.then(function(t){cc.recorder=new MediaRecorder(t),cc.recorder.ondataavailable=function(t){console.log(t.data);var n=new FileReader;n.readAsArrayBuffer(t.data),console.log(n),n.onloadend=function(){var t=e.ab2str(n.result);e.socket().emit("sayOnSound",JSON.stringify({userid:cc.weijifen.user.id,file:t,start:e.START,end:e.END}))}}})}catch(e){cc.weijifen.browserType=null}},talkPlay:function(e){if("string"==typeof e.file){var t=this.str2ab(e.file),n=new Audio,a=new Blob([t],{type:"video/webm"});n.src=URL.createObjectURL(a),n.play&&n.play()}},talkRecordStart:function(){try{this.START=(new Date).getTime(),cc.recorder.start()}catch(e){cc.find("Canvas/YY").active=!0,setTimeout(function(){cc.find("Canvas/YY").active=!1},2e3)}},talkRecordEnd:function(){try{"inactive"!=cc.recorder.state&&(this.END=(new Date).getTime(),cc.recorder.stop())}catch(e){}}}),cc._RF.pop()},{WJFCommon:"WJFCommon"}],MJCardsValue:[function(e,t,n){"use strict";cc._RF.push(t,"2ff4eGKAPNNTbzKsQTZcTlo","MJCardsValue"),cc.Class({extends:cc.Component,mjcardvalue:function(e,t,n,a,i){var r=parseInt(e/4),c=parseInt(r/9),o=void 0,s=void 0;r<0?-7==r?o=t+"_wind_east":-6==r?o=t+"_wind_south":-5==r?o=t+"_wind_west":-4==r?o=t+"_wind_north":-3==r?o=t+"_red":-2==r?o=t+"_green":-1==r&&(o=t+"_white"):0==c?o=t+"_character_"+(parseInt(e%36/4)+1):1==c?o=t+"_dot_"+(parseInt(e%36/4)+1):2==c&&(o=t+"_bamboo_"+(parseInt(e%36/4)+1)),null==o&&(-38==e?o=t+"_autumn":-35==e?o=t+"_bamboo":-34==e?o=t+"_chrysanthemum":-33==e?o=t+"_orchid":-32==e?o=t+"_plum":-36==e?o=t+"_spring":-37==e?o=t+"_summer":-39==e&&(o=t+"_winter"),"B"==t&&(s=-36==e?a[0]:-34==e?a[1]:-33==e?a[2]:-37==e?a[3]:-35==e?a[4]:a[5].getSpriteFrame(o))),"B"!=t&&(s=this.images.getSpriteFrame(o)),this.target.getComponent(cc.Sprite).spriteFrame=s},majiangColor:function(e,t){e.color=new Color(t[0],t[1],t[2])}}),cc._RF.pop()},{}],MJDataBind:[function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"8bd7eb6ZplBxIx2msga8LgN","MJDataBind");var i,r=e("WJFCommon");cc.Class((i={extends:r,properties:{right_player:cc.Node,left_player:cc.Node,top_player:cc.Node,current_player:cc.Node,playerprefab:{default:null,type:cc.Prefab},cards_current:{default:null,type:cc.Prefab},statebtn:{default:null,type:cc.Node},deskcards_current_panel:{default:null,type:cc.Node},deskcards_right_panel:{default:null,type:cc.Node},deskcards_top_panel:{default:null,type:cc.Node},deskcards_left_panel:{default:null,type:cc.Node},desk_tip:{default:null,type:cc.Node},actionnode_deal:{default:null,type:cc.Node},searchlight:{default:null,type:cc.Node},setting_coin:cc.Node,right_ready:cc.Node,left_ready:cc.Node,top_ready:cc.Node,current_ready:cc.Node,starttime:cc.Label,roomInfo:cc.Node,mjtimer:{default:null,type:cc.Label},selectfather:cc.Node,actionnode_two:{default:null,type:cc.Node},dan_childrend:cc.Node,mjUnit:cc.Prefab,card4:cc.Node,cards_panel:{default:null,type:cc.Node},tingSelect:cc.Node,tingSelectch:cc.Prefab,tingting:cc.Node,currentting:cc.Node,topting:cc.Node,rightting:cc.Node,leftting:cc.Node},onLoad:function(){var t=this.socket();this.playerIsReady(),this.init_pool();var n=this,a=e("RoomInit"),i=e("GameStartInit");this.map("joinroom",a.joinroom_event),this.map("banker",i.banker_event),this.map("players",i.players_event),this.map("play",i.play_event);var r=e("GamePlay");this.map("lasthands",r.lasthands_event),this.map("takecards",r.takecard_event),this.map("dealcard",r.dealcard_event);var c=e("GameEvent");this.map("action",c.action_event),this.map("selectaction",c.selectaction_event);var o=new(o=e("settingClick")),s=e("GameOver");this.map("allcards",s.allcards_event),this.map("isOver",o.isOver_event),this.map("gameOver",o.gameOver_event),this.map("over",o.over_event),this.map("unOver",o.unOver_event),t.on("command",function(e){var t=n.getSelf().parse(e);console.log(t.command),console.log(t),n.getSelf().route(t.command)(t,n)}),t.on("players",function(e){var t=n.getSelf().parse(e);console.log("players"),console.log(t),n.getSelf().route("players")(t,n)}),t.on("talkOnSay",function(e){n.talk_event(e,null)}),this.node.on("overGame",function(e){var t=n.getSelf().socket();e.getUserData()?t.emit("overGame",JSON.stringify({REFUSE:e.getUserData()})):t.emit("overGame",JSON.stringify({}))}),this.node.on("readyGM",function(e){cc.find("Canvas").getComponent("MJDataBind").current_ready.active=!0,n.getSelf().socket().emit("readyGame",JSON.stringify({}))}),this.node.on("takecard",function(e){var t=cc.find("Canvas").getComponent("MJDataBind");if("true"==cc.sys.localStorage.getItem("take")){var a=e.target.getComponent("TakeMJCard");if(null!=a){var i=a.target.getComponent("HandCards");r.takecard_event({userid:cc.weijifen.user.id,card:i.value},n);var c=a.target.getComponent("HandCards"),o=n.getSelf().socket();if("true"==cc.sys.localStorage.getItem("ting")){t.tingting.active=!0,setTimeout(function(){t.tingting.active=!1},2e3);var s=n.getSelf().socket();cc.sys.localStorage.removeItem("ting"),s.emit("selectaction",JSON.stringify({action:"ting",actionCard:[c.value]})),n.getSelf().tingAction()}else o.emit("doplaycards",c.value)}e.stopPropagation()}}),this.node.on("mjSelection",function(e){var t=cc.find("Canvas").getComponent("MJDataBind").selectfather;t.active=!1,t.children[0].children[1].children.splice(0,t.children[0].children[1].children.length);var a=n.getSelf().socket(),i=[],r=void 0;console.log(e),e.getUserData()&&(r=e.getUserData().name,i=e.getUserData().params),a.emit("selectaction",JSON.stringify({action:r,actionCard:i})),n.getSelf().shouOperationMune(),e.stopPropagation()}),this.node.on("peng",function(e){cc.sys.localStorage.removeItem("guo"),n.getSelf().socket().emit("selectaction",JSON.stringify({action:"peng",actionCard:[]})),n.getSelf().shouOperationMune(),e.stopPropagation()}),this.node.on("dan",function(e){cc.sys.localStorage.removeItem("guo");var t=cc.find("Canvas").getComponent("MJDataBind");if(t.dans&&t.dans.length>1)cc.sys.localStorage.removeItem("take"),t.mjOperation("dan",t.dans,t);else{var a=n.getSelf().socket(),i=[];t.dans&&(i=t.dans[0]),a.emit("selectaction",JSON.stringify({action:"dan",actionCard:i}))}n.getSelf().shouOperationMune(),e.stopPropagation()}),this.node.on("gang",function(e){cc.sys.localStorage.removeItem("guo");var t=cc.find("Canvas").getComponent("MJDataBind");if(t.gangs&&t.gangs.length>1)cc.sys.localStorage.removeItem("take"),t.mjOperation("gang",t.gangs,t);else{var a=n.getSelf().socket(),i=[];t.gangs&&(i=t.gangs[0]),a.emit("selectaction",JSON.stringify({action:"gang",actionCard:i}))}n.getSelf().shouOperationMune(),e.stopPropagation()}),this.node.on("chi",function(e){cc.sys.localStorage.removeItem("guo");var t=cc.find("Canvas").getComponent("MJDataBind");if(t.chis&&t.chis.length>1){cc.sys.localStorage.removeItem("take");for(var a=[],i=[],r=0;r<t.chis.length;r++){var c={};t.chis[r].sort(function(e,t){return e-t}),c.id=t.chis[r][0],c.value=t.chis[r],a.push(c)}a.sort(function(e,t){return t.id-e.id});for(var o=0;o<a.length;o++)i.push(a[o].value);t.mjOperation("chi",i,t)}else n.getSelf().socket().emit("selectaction",JSON.stringify({action:"chi",actionCard:t.chis[0]}));n.getSelf().shouOperationMune(),e.stopPropagation()}),this.node.on("ting",function(t){cc.sys.localStorage.removeItem("guo");var a=cc.find("Canvas").getComponent("MJDataBind"),i=e("GameStartInit");if(cc.sys.localStorage.setItem("ting","true"),cc.sys.localStorage.setItem("alting","true"),i.initcardwidth(!0),n.getSelf().tingAction(),a.tings)for(var r=cc.find("Canvas/cards/handcards/current/currenthandcards").children.length,c=0;c<a.tings.length;c++)for(var o=a.tings[c].card,s=0;s<r;s++){var l=cc.find("Canvas/cards/handcards/current/currenthandcards").children[s],d=cc.find("Canvas/cards/handcards/current/currenthandcards").children[s].children[0],u=l.getComponent("HandCards");(o<0&&parseInt(o/4)==parseInt(u.value/4)||o>=0&&u.mjtype==parseInt(o/36)&&parseInt(u.value%36/4)==parseInt(o%36/4))&&(u.cardvalue.color=new cc.Color(255,255,255),d.getComponent(cc.Button).interactable=!0)}t.stopPropagation(),n.getSelf().shouOperationMune()}),this.node.on("hu",function(e){cc.sys.localStorage.removeItem("guo"),n.getSelf().socket().emit("selectaction",JSON.stringify({action:"hu",actionCard:[]})),n.getSelf().shouOperationMune(),e.stopPropagation()}),this.node.on("guo",function(e){"true"!=cc.sys.localStorage.getItem("guo")||"true"==cc.sys.localStorage.getItem("alting")?(cc.sys.localStorage.removeItem("altake"),n.getSelf().socket().emit("selectaction",JSON.stringify({action:"guo",actionCard:[]}))):cc.sys.localStorage.setItem("take","true"),cc.sys.localStorage.removeItem("guo"),n.getSelf().shouOperationMune(),e.stopPropagation()}),cc.sys.localStorage.setItem("count","0"),cc.sys.localStorage.removeItem("current"),cc.sys.localStorage.removeItem("right"),cc.sys.localStorage.removeItem("left"),cc.sys.localStorage.removeItem("top"),cc.sys.localStorage.removeItem("altake"),cc.sys.localStorage.removeItem("alting"),cc.sys.localStorage.removeItem("guo"),cc.sys.localStorage.removeItem("unOver"),cc.sys.localStorage.removeItem("clear"),cc.sys.localStorage.removeItem("cb")},getSelf:function(){return cc.find("Canvas").getComponent("MJDataBind")},shouOperationMune:function(){cc.moveTo(.5,1122,-100);this.actionnode_two.x=1122,cc.sys.localStorage.removeItem("altake")},playerIsReady:function(){if("wz"==cc.weijifen.GameBase.gameModel?"LG"==cc.weijifen.playType?sprite.spriteFrame=this.bkLogoImgLG:sprite.spriteFrame=this.bkLogoImgTP:"jx"==cc.weijifen.GameBase.gameModel&&(sprite.spriteFrame=this.jxLogoImgLG),cc.weijifen.playersss=0,"wechat"==cc.weijifen.browserType){this.wxButton.node.active=!0;var e="";"true"!=cc.weijifen.match&&(e=cc.weijifen.room),cc.weijifen.WXorBlow.shareRoom(e)}else null!=cc.weijifen.browserType&&(this.ggButton.node.active=!0);if(this.joinRoom(),2==cc.weijifen.playerNum?(this.left_player.active=!1,this.right_player.active=!1,this.deskcards_current_panel.width=650,this.deskcards_top_panel.width=650,this.deskcards_top_panel.y=10):3==cc.weijifen.playerNum&&(this.left_player.active=!1,this.deskcards_current_panel.width=600,this.deskcards_top_panel.width=600,this.deskcards_current_panel.x=-154,this.deskcards_top_panel.x=-144,this.deskcards_right_panel.x=-83,this.deskcards_top_panel.y=10),"false"==cc.weijifen.match){var t=cc.find("Canvas/roomNum").getChildByName("room")._components[0];t.string=cc.weijifen.room,cc.log(t)}else"true"==cc.weijifen.match&&(this.setting_coin.children[0].children[0].children[0].getCompoCanent(cc.Label).string="退出",this.setting_coin.children[1].active=!1,this.room_num.parent.children[2].active=!1,this.room_num.parent.children[1].getComponent(cc.Label).string="比赛模式",this.room_num.parent.children[1].x=this.room_num.parent.children[1].x+20,this.ready2.active=!1,this.readybth.x=-4);var n=cc.find("Canvas/roomNum").getChildByName("quan")._components[0];this.maxRound=0,cc.weijifen.maxRound&&(this.maxRound=cc.weijifen.maxRound),this.routes={},n.string="0/"+this.maxRound},init_pool:function(e){this.playersarray=new Array,this.playercards=new Array,this.leftcards=new Array,this.rightcards=new Array,this.topcards=new Array,this.deskcards=new Array,this.chis=[],this.gangs=[],this.dans=[],this.right="",this.left="",this.top="",cc.weijifen.wanfa=null,this.centertimer=null,this.playerspool=new cc.NodePool,this.cardpool=new cc.NodePool,this.alert=new cc.NodePool,this.setting=new cc.NodePool,this.leave=new cc.NodePool;for(t=0;t<4;t++)this.playerspool.put(cc.instantiate(this.playerprefab));if(cc.weijifen.cardNum)for(t=0;t<cc.weijifen.cardNum+1;t++)this.cardpool.put(cc.instantiate(this.cards_current));else for(var t=0;t<14;t++)this.cardpool.put(cc.instantiate(this.cards_current));this.exchange_state("init",this)},joinRoom:function(){console.log("--------------");var e=this.socket(),t={token:cc.weijifen.authorization,playway:cc.weijifen.playway,orgi:cc.weijifen.user.orgi};cc.weijifen.room?t.room=cc.weijifen.room:(t.playway="402888815e6f0177015e71529f3a0001",t.match=1),e.emit("joinroom",JSON.stringify(t))},exchange_state:function(e,t){cc.weijifen.state=e,t=cc.find("Canvas").getComponent("MJDataBind");for(var n=null,a=null,i=null,r=null,c=null,o=0;o<t.statebtn.children.length;o++){var s=t.statebtn.children[o];"readybtn"==s.name?n=s:"waitting"==s.name?a=s:"select"==s.name?i=s:"banker"==s.name?r=s:"friendButton"==s.name&&(c=s),s.active=!1}switch(e){case"init":t.desk_tip.active=!1,n.active=!0,6==cc.weijifen.room.length&&(c.active=!0),t.exchange_searchlight("none",t);break;case"ready":a.active=!0;break;case"begin":t.readyNoActive(t),t.desk_tip.active=!0,t.canceltimer(t);break;case"play":cc.weijifen.bankers&&(r.active=!0),t.readyNoActive(t),t.timer(t,0);break;case"selectcolor":t.exchange_searchlight("current",t),i.active=!0,t.timer(t,0);break;case"selectresult":i.active=!1,t.canceltimer(t);break;case"lasthands":r.active=!0,t.timer(t,8);break;case"otherplayer":cc.weijifen.match?t.timer(t,15):t.timer(t,8);break;case"takecard":r.active=!1;break;case"nextplayer":t.action&&("two"==t.action||("three"==t.action?t.actionnode_three.getComponent(cc.Animation).play("majiang_three_action_end"):"deal"==t.action&&(t.actionnode_deal.active=!1))),t.action=null,cc.weijifen.match?t.timer(t,15):t.timer(t,8)}},mjOperation:function(e,t,n){this.selectfather.active=!0;for(var a=0;a<t.length;a++){var i=cc.instantiate(n.card4);i.getComponent("operation").setAction({name:e,params:t[a]}),i.parent=n.dan_childrend;for(var r=0;r<t[a].length;r++){var c=cc.instantiate(n.mjUnit);c.getComponent("HandCards").init(t[a][r],!0),c.parent=i}}},exchange_searchlight:function(e,t){cc.sys.localStorage.removeItem("cl"),t=cc.find("Canvas").getComponent("MJDataBind");for(var n=0;n<t.searchlight.children.length;n++)e==t.searchlight.children[n].name?t.searchlight.children[n].active=!0:t.searchlight.children[n].active=!1},readyNoActive:function(e){e.right_ready.active=!1,e.left_ready.active=!1,e.top_ready.active=!1,e.current_ready.active=!1},canceltimer:function(e){e.unscheduleAllCallbacks(),e.mjtimer.string="00"},timer:function(e,t){e.mjtimer.string=t>9?t:"0"+t,e.callback=function(){if((t-=1)>=0){var n=t;t<10&&(n="0"+t),e.mjtimer.string=n}},e.unscheduleAllCallbacks(),e.schedule(e.callback,1,t,0)}},a(i,"exchange_searchlight",function(e,t){cc.sys.localStorage.removeItem("cl"),t=cc.find("Canvas").getComponent("MJDataBind");for(var n=0;n<t.searchlight.children.length;n++)e==t.searchlight.children[n].name?t.searchlight.children[n].active=!0:t.searchlight.children[n].active=!1}),a(i,"tingAction",function(e){for(var t=cc.find("Canvas/cards/handcards/current/currenthandcards").children.length,n=0;n<t;n++){var a=cc.find("Canvas/cards/handcards/current/currenthandcards").children[n],i=cc.find("Canvas/cards/handcards/current/currenthandcards").children[n].children[0],r=a.getComponent("HandCards");r.cardvalue.color=e?new cc.Color(255,255,255):new cc.Color(118,118,118),i.getComponent(cc.Button).interactable=!1}}),i)),cc._RF.pop()},{GameEvent:"GameEvent",GameOver:"GameOver",GamePlay:"GamePlay",GameStartInit:"GameStartInit",RoomInit:"RoomInit",WJFCommon:"WJFCommon",settingClick:"settingClick"}],MaJiangPlayer:[function(e,t,n){"use strict";cc._RF.push(t,"80d59jWupNF1ITqC4enkivH","MaJiangPlayer"),cc.Class({extends:cc.Component,properties:{target:cc.Node,dong:cc.Node,nan:cc.Node,xi:cc.Node,bei:cc.Node,headimg:cc.Node,on_off_line:cc.Node,username:{default:null,type:cc.Label},goldcoins:{default:null,type:cc.Label},selected:{default:null,type:cc.Node},creator:{default:null,type:cc.Node},selectcards:{default:null,type:cc.Node},selectcolor:{default:null,type:cc.Node}},onLoad:function(){this.creator.active=!1},init:function(e,t,n,a){if(this.creator.active=!1,this.data=e,this.tablepos=n,this.count=a,e.online||(this.on_off_line.active=!0,this.headimg.color=new cc.Color(42,25,25)),e.headimgurl){var i=e.headimgurl,r=this.headimg.getComponent(cc.Sprite),c=this.headimg;cc.loader.load({url:i,type:"jpg"},function(e,t){r.spriteFrame=new cc.SpriteFrame(t),c.width=75,c.height=75})}this.username.string=e.username,this.goldcoins.string=e.goldcoins},banker:function(){this.creator.active=!0},selecting:function(){if(this.data.id!=cc.beimi.user.id){this.selectcards.active=!0;var e=this.selectcolor.getComponent(cc.Animation);this.animState=e.play("majiang_select"),this.animState.wrapMode=cc.WrapMode.Loop,this.animState.repeatCount=20}},selectresult:function(e){for(var t=0;t<this.selected.children.length;t++)this.selected.children[t].active=!1,this.selected.children[t].name==e.color&&(this.selected.children[t].active=!0);this.selected.active=!0,this.data.id!=cc.beimi.user.id&&null!=this.animState&&this.animState.stop("majiang_select")},winds:function(e){this.dong.active=!1,this.nan.active=!1,this.xi.active=!1,this.bei.active=!1,this[e].active=!0,this.wind=e},nowind:function(){this[this.wind].active=!1},windss:function(e){0==e?this.winds("dong"):1==e?this.winds("nan"):2==e?this.winds("xi"):3==e&&this.winds("bei")}}),cc._RF.pop()},{}],RoomInit:[function(e,t,n){"use strict";cc._RF.push(t,"d1d18Qqw+NMaqEok1q9zrHN","RoomInit");var a=e("WJFCommon");cc.Class({extends:a,properties:{room_num:{default:null,type:cc.Node}},onLoad:function(){},statics:{joinroom_event:function(e,t){var n=cc.find("Canvas/js/GameStartInit").getComponent("GameStartInit");if(console.log("------------join------"),console.log(this),t=cc.find("Canvas").getComponent("MJDataBind"),2==cc.weijifen.playerNum){if(e.id!=cc.sys.localStorage.getItem("current")&&e.id!=cc.sys.localStorage.getItem("top")){var a=(d=t.playerspool.get()).getComponent("MaJiangPlayer"),i=null,r="";e.id==cc.weijifen.user.id?(d.setPosition(-596,-236),d.parent=t.root(),r="current",cc.sys.localStorage.setItem("current",e.id),cc.sys.localStorage.setItem("count","0")):(d.parent=t.top_player,r="top",cc.sys.localStorage.setItem("top",e.id),d.setPosition(0,0),cc.sys.localStorage.setItem("count","2")),a.init(e,i,r,Number(cc.sys.localStorage.getItem("count"))),t.playersarray.push(d),"READY"==e.status&&(cc.find("Canvas/players/ok_"+r).active=!0,e.id==cc.weijifen.user.id&&(t.readybth.active=!1,t.ready2.active=!1))}else if(u=t.playersarray)for(var c=0;c<u.length;c++){var r=(h=u[c].getComponent("MaJiangPlayer")).tablepos,o=h.on_off_line,s=h.headimg;e.id==h.data.id&&("READY"==e.status&&(cc.find("Canvas/players/ok_"+r).active=!0),0==e.online?(o.active=!0,s.color=new cc.Color(42,25,25)):(o.active=!1,s.color=new cc.Color(255,255,255)),"136"!=n.desk_cards.string&&t.readyNoActive(t))}}else if(3==cc.weijifen.playerNum){if(e.id!=cc.sys.localStorage.getItem("current")&&e.id!=cc.sys.localStorage.getItem("right")&&e.id!=cc.sys.localStorage.getItem("top")){a=(d=t.playerspool.get()).getComponent("MaJiangPlayer");r="";i=cc.sys.localStorage.getItem("count");e.id==cc.weijifen.user.id?(d.setPosition(-584,-269),d.parent=t.root(),r="current",cc.sys.localStorage.setItem("current",e.id)):(0==i||2==i?(d.parent=t.right_player,r="right",cc.sys.localStorage.setItem("right",e.id),cc.sys.localStorage.setItem("count","1")):1==i&&(d.parent=t.top_player,r="top",cc.sys.localStorage.setItem("top",e.id),cc.sys.localStorage.setItem("count","2")),d.setPosition(0,0)),a.init(e,t.inx,r,Number(cc.sys.localStorage.getItem("count"))),t.playersarray.push(d),"READY"==e.status&&(cc.find("Canvas/players/ok_"+r).active=!0,e.id==cc.weijifen.user.id&&(t.readybth.active=!1,t.ready2.active=!1))}else if(u=t.playersarray)for(var l=0;l<u.length;l++){var r=(h=u[l].getComponent("MaJiangPlayer")).tablepos,o=h.on_off_line,s=h.headimg;e.id==h.data.id&&("READY"==e.status&&(cc.find("Canvas/players/ok_"+r).active=!0,e.id==cc.weijifen.user.id&&(t.readybth.active=!1,t.ready2.active=!1)),0==e.online?(o.active=!0,s.color=new cc.Color(42,25,25)):(o.active=!1,s.color=new cc.Color(255,255,255)),"136"!=n.desk_cards.string&&t.readyNoActive(t))}}else if(e.id!=cc.sys.localStorage.getItem("current")&&e.id!=cc.sys.localStorage.getItem("right")&&e.id!=cc.sys.localStorage.getItem("left")&&e.id!=cc.sys.localStorage.getItem("top")){var d=t.playerspool.get(),a=d.getComponent("MaJiangPlayer");r="";i=cc.sys.localStorage.getItem("count");e.id==cc.weijifen.user.id?(d.setPosition(-584,-269),d.parent=t.root(),r="current",cc.sys.localStorage.setItem("current",e.id)):(0==i||3==i?(d.parent=t.right_player,r="right",cc.sys.localStorage.setItem("right",e.id),cc.sys.localStorage.setItem("count","1")):1==i?(d.parent=t.top_player,r="top",cc.sys.localStorage.setItem("top",e.id),cc.sys.localStorage.setItem("count","2")):2==i&&(d.parent=t.left_player,r="left",cc.sys.localStorage.setItem("left",e.id),cc.sys.localStorage.setItem("count","3")),d.setPosition(0,0)),a.init(e,t.inx,r,Number(cc.sys.localStorage.getItem("count"))),t.playersarray.push(d),"READY"==e.status&&(cc.find("Canvas/players/ok_"+r).active=!0,e.id==cc.weijifen.user.id&&(t.readybth.active=!1,t.ready2.active=!1))}else{var u=t.playersarray;if(u)for(var p=0;p<u.length;p++){var h=u[p].getComponent("MaJiangPlayer"),r=h.tablepos,o=h.on_off_line,s=h.headimg;e.id==h.data.id&&("READY"==e.status&&(cc.find("Canvas/players/ok_"+r).active=!0,e.id==cc.weijifen.user.id&&(t.readybth.active=!1)),0==e.online?(o.active=!0,s.color=new cc.Color(42,25,25)):(o.active=!1,s.color=new cc.Color(255,255,255)),"136"!=n.desk_cards.string&&t.readyNoActive(t))}}}},onClick:function(e){cc.find("Canvas").getComponent("MJDataBind"),this.socket();var t={token:cc.weijifen.authorization,playway:cc.weijifen.playway,orgi:cc.weijifen.user.orgi};cc.weijifen.room&&(t.room=cc.weijifen.room),this.waittingForPlayers(),this.node.dispatchEvent(new cc.Event.EventCustom("readyGM",!0))},waittingForPlayers:function(){var e=cc.find("Canvas").getComponent("MJDataBind");e.exchange_state("ready",e)}}),cc._RF.pop()},{WJFCommon:"WJFCommon"}],SettingClide:[function(e,t,n){"use strict";cc._RF.push(t,"acf49Qcda1OaKZe6CSWk9RI","SettingClide"),cc.Class({extends:cc.Component,properties:{music:{default:null,type:cc.Sprite},musicSlider:{default:null,type:cc.Slider},sound:{default:null,type:cc.Sprite},soundSlider:{default:null,type:cc.Slider},musicon:{default:null,type:cc.Node},musicoff:{default:null,type:cc.Node},soundon:{default:null,type:cc.Node},soundoff:{default:null,type:cc.Node},danji:cc.Node,shuangji:cc.Node,Ycard:cc.Node,Bcard:cc.Node,Rcard:cc.Node,YBG:cc.Node,BBG:cc.Node,RBG:cc.Node},onLoad:function(){cc.find("Canvas/global")&&(this.bgonload(),this.cardonload()),cc.beimi.audio.getState()==cc.audioEngine.AudioState.PLAYING?(this.musicon.active=!0,this.musicoff.active=!1):(this.musicon.active=!1,this.musicoff.active=!0),cc.beimi.audio.getSFXVolume()>0?(this.soundon.active=!0,this.soundoff.active=!1):(this.soundon.active=!1,this.soundoff.active=!0),1==cc.beimi.click?(this.danji.active=!0,this.shuangji.active=!1):(this.danji.active=!1,this.shuangji.active=!0)},onSoundBtnClick:function(){cc.beimi.audio.getSFXVolume()>0?(this.soundon.active=!1,this.soundoff.active=!0,cc.beimi.audio.setSFXVolume(0)):(this.soundon.active=!0,this.soundoff.active=!1,cc.beimi.audio.setSFXVolume(1))},onMusiceBtnClick:function(){cc.beimi.audio.getState()==cc.audioEngine.AudioState.PLAYING?(this.musicon.active=!1,this.musicoff.active=!0,cc.beimi.audio.pauseAll(),cc.sys.localStorage.setItem("nobgm","true")):(this.musicon.active=!0,this.musicoff.active=!1,cc.beimi.audio.playBGM("bgFight.mp3"),cc.beimi.audio.setBGMVolume(1),cc.sys.localStorage.removeItem("nobgm"))},dnajiClick:function(){1==cc.beimi.click?(this.danji.active=!1,this.shuangji.active=!0,cc.beimi.click=2,cc.sys.localStorage.setItem("click",2)):(this.danji.active=!0,this.shuangji.active=!1,cc.beimi.click=1,cc.sys.localStorage.setItem("click",1))},cardClick:function(e){for(var t=e.target.parent.parent,n=cc.find("Canvas").getComponent("MajiangDataBind"),a=0;a<t.children.length;a++)t.children[a].children[0].active=!1;e.target.parent.children[0].active=!0,cc.sys.localStorage.setItem("cardcolor",e.target.name),cc.find("Canvas/global")&&n.cardsetting()},BGClick:function(e){for(var t=e.target.parent,n=0;n<t.children.length;n++)t.children[n].children[0].active=!1;e.target.children[0].active=!0,cc.sys.localStorage.setItem("bgcolor",e.target.name),cc.find("Canvas/global/main/bg/背景")&&cc.find("Canvas").getComponent("MajiangDataBind").bgsetting()},bgonload:function(){"green"==cc.sys.localStorage.getItem("bgcolor")?(this.YBG.active=!0,this.BBG.active=!1,this.RBG.active=!1):"blue"==cc.sys.localStorage.getItem("bgcolor")?(this.YBG.active=!1,this.BBG.active=!0,this.RBG.active=!1):"red"==cc.sys.localStorage.getItem("bgcolor")&&(this.YBG.active=!1,this.BBG.active=!1,this.RBG.active=!0)},cardonload:function(){"yellow"==cc.sys.localStorage.getItem("cardcolor")?(this.Ycard.active=!0,this.Bcard.active=!1,this.Rcard.active=!1):"green"==cc.sys.localStorage.getItem("cardcolor")?(this.Ycard.active=!1,this.Bcard.active=!0,this.Rcard.active=!1):"red"==cc.sys.localStorage.getItem("cardcolor")&&(this.Ycard.active=!1,this.Bcard.active=!1,this.Rcard.active=!0)}}),cc._RF.pop()},{}],ShareWx:[function(e,t,n){"use strict";cc._RF.push(t,"9835ctxoxpBhajvEGrTc7zX","ShareWx");var a=e("WJFCommon");cc.Class({extends:a,properties:{tape:cc.Button,tape2:cc.Button},onLoad:function(){this.init()},init:function(){var e=this;e.talk=!1,e.recordTimer=0,cc.weijifen.http.httpPost("/wxController/getWxConfig",{url:window.location.href},e.sucess,e.error,e)},sucess:function(t,n){var a=JSON.parse(t);if(wx.config({appId:a.appId,timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","startRecord","stopRecord","translateVoice","onVoicePlayEnd","playVoice","uploadVoice","downloadVoice"]}),wx.ready(function(){if("wechat"!=cc.weijifen.browserTyp){var t=e("ShareWx");cc.weijifen.WXorBlow=new t}cc.weijifen.browserType="wechat",wx.onVoicePlayEnd({success:function(e){stopWave()}}),n.shareRoom()}),"wechat"!=cc.weijifen.browserTyp){var i=e("LYAudio");cc.weijifen.WXorBlow=new i,cc.weijifen.WXorBlow.init(),cc.weijifen.browserType="brow"}},shareRoom:function(e){var t=void 0,n=void 0,a="";"wz"==cc.weijifen.GameBase.gameModel?(t="首游宝-温州棋牌",n="toWZAuth"):"ch"==cc.weijifen.GameBase.gameModel&&(t="巡天游-心缘长春",n="toCHAuth"),cc.weijifen.room&&(a="房间号："+cc.weijifen.room),console.log("game.bizpartner.cn/wxController/"+n+"?roomNum="+e),wx.onMenuShareAppMessage({title:t,desc:"您的好友"+cc.weijifen.user.nickname+"邀请您一起游戏"+a,link:"http://game.bizpartner.cn/wxController/"+n+"?roomNum="+e,imgUrl:cc.weijifen.user.headimgurl,trigger:function(e){console.log("用户点击发送给朋友")},success:function(e){console.log("已分享")},cancel:function(e){console.log("已取消")},fail:function(e){console.log(JSON.stringify(e))}}),wx.onMenuShareTimeline({title:t,link:"http://game.bizpartner.cn/wxController/"+n+"?roomNum="+e,imgUrl:cc.weijifen.user.headimgurl,trigger:function(e){console.log("用户点击分享到朋友圈")},success:function(e){console.log("已分享")},cancel:function(e){console.log("已取消")},fail:function(e){console.log(JSON.stringify(e))}})},error:function(t){var n=e("LYAudio");cc.weijifen.WXorBlow=new n,cc.weijifen.WXorBlow.init(),cc.weijifen.browserType="brow"},touchendClick:function(e){var t=this;cc.find("Canvas/录音/发送语音2").active=!1,t.END=(new Date).getTime(),new Date(t.end-t.start).getSeconds()>3?wx.stopRecord({success:function(e){wx.uploadVoice({localId:e.localId,isShowProgressTips:1,success:function(e){t.socket().emit("sayOnSound",JSON.stringify({userid:cc.weijifen.user.id,serverId:e.serverId,start:t.START,end:t.END}))}})},fail:function(e){cc.find("Canvas/录音/发送语音1").active=!0,setTimeout(function(){cc.find("Canvas/录音/发送语音1").active=!1},1e3)}}):(cc.find("Canvas/录音/发送语音1").active=!0,setTimeout(function(){cc.find("Canvas/录音/发送语音1").active=!1},1e3))},talkClick:function(e){var t=this;this.wxButton=e;var e=e;1==t.talk?(t.talk=!1,e.node.children[1].active=!1,e.node.children[0].active=!0,t.END=(new Date).getTime(),wx.stopRecord({success:function(e){console.log(e),console.log("-------"),wx.uploadVoice({localId:e.localId,isShowProgressTips:1,success:function(e){t.socket().emit("sayOnSound",JSON.stringify({userid:cc.weijifen.user.id,serverId:e.serverId,start:t.START,end:t.END}))}})}})):(t.talk=!0,e.node.children[1].active=!0,e.node.children[0].active=!1,t.START=(new Date).getTime(),t.recordTimer=setTimeout(function(){wx.startRecord({success:function(){localStorage.rainAllowRecord="true"},cancel:function(){alert("用户拒绝授权录音")}})},300))},settime:function(){this.time=this.time-1,0==this.time?(this.talkClick(this.wxButton),clearTimeout(this.t)):this.wxButton.node.children[1].children[0].children[1].getComponent(cc.Label).string=this.time},talkPlay:function(e){wx.downloadVoice({serverId:e.serverId,isShowProgressTips:1,success:function(e){wx.playVoice({localId:e.localId})}})}}),cc._RF.pop()},{LYAudio:"LYAudio",ShareWx:"ShareWx",WJFCommon:"WJFCommon"}],SpecCards:[function(e,t,n){"use strict";cc._RF.push(t,"d51b9dEnnJCD61Ot0jdE4XH","SpecCards"),cc.Class({extends:cc.Component,properties:{cardvalue:{default:null,type:cc.Node}},onLoad:function(){},init:function(e,t){this.cardcolor(),this.spec=e,this.inx=t,1==this.spec&&(0==this.inx||2==this.inx?this.node.height=this.node.height+50:this.node.width=this.node.width+30)},reinit:function(){this.node.height=this.node.height=0,this.node.width=this.node.width=0,this.spec=!1},cardcolor:function(){"yellow"==cc.sys.localStorage.getItem("cardcolor")?(this.cardvalue.children[0].active=!1,this.cardvalue.children[1].active=!1):"green"==cc.sys.localStorage.getItem("cardcolor")?(this.cardvalue.children[0].active=!0,this.cardvalue.children[1].active=!1):"red"==cc.sys.localStorage.getItem("cardcolor")&&(this.cardvalue.children[0].active=!1,this.cardvalue.children[1].active=!0)}}),cc._RF.pop()},{}],SummaryClick:[function(e,t,n){"use strict";cc._RF.push(t,"e2ad9JXL4FEGqsIinwW8Krh","SummaryClick"),cc.Class({extends:cc.Component,properties:{miao:cc.Label,list:cc.Prefab,endlist:cc.Prefab,layout:cc.Node,layout2:cc.Node,action:{default:null},win:cc.Node,lose:cc.Node,liuju:cc.Node,bp:cc.Prefab,bpb:cc.Prefab,bpp:cc.Node,num:cc.Label,dabaopai:cc.Node,gameend:cc.Node,op:cc.Label,time:cc.Label,close1:cc.Node,close2:cc.Node,goon1:cc.Node,goon2:cc.Node,csNode:{default:null,type:cc.Node},cs1:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.times=60,cc.weijifen.wanfa&&(this.op.string=cc.weijifen.wanfa);var e=new Date,t=e.getHours(),n=e.getMinutes();t<10&&(t="0"+t),n<10&&(n="0"+n);var a=this.csNode.getComponent(cc.Sprite);"wz"==cc.weijifen.GameBase.gameModel&&(a.spriteFrame=this.cs1,this.csNode.width=this.csNode.width-40,this.csNode.y=this.csNode.y-10,this.csNode.x=this.csNode.x+10),this.time.string="时间："+e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+"  "+t+": "+n},daojishi:function(){this.times=this.times-1,this.miao&&(this.miao.string=this.times,0==this.times&&(clearTimeout(this.t),cc.find("Canvas/summary").destroy()))},init:function(){var e=this;this.goon1.active=!0,this.close1.active=!0,"true"==cc.weijifen.match?this.t=setInterval(function(){e.daojishi()},1e3):this.miao.node.active=!1;var t=this.data;this.dabaopai.active=!0,console.log(t);var n=void 0,a=void 0;if("wz"==cc.weijifen.GameBase.gameModel)if(cc.weijifen.baopai)for(var i=0;i<cc.weijifen.baopai.length;i++)a=(n=cc.instantiate(this.bp)).getComponent("DeskCards"),null!=cc.weijifen.powerCard&&(a.node.children[1].active=!0),a.init(cc.weijifen.baopai[i],"B",!0),n.parent=this.bpp;else(n=cc.instantiate(this.bpb)).parent=this.bpp;if(this.num.string=cc.find("Canvas").getComponent("MajiangDataBind").gddesk_cards,t.playOvers){for(var r=0;r<t.playOvers.length;r++){var c=cc.instantiate(this.list);c.getComponent("EndCards").setData(t.playOvers[r]),c.parent=this.layout,t.playOvers[r].win,t.playOvers[r].user==cc.weijifen.user.id&&(1==t.playOvers[r].win?this.win.active=!0:t.playOvers[r].count<0&&(this.lose.active=!0))}1==t.unHu&&(this.liuju.active=!0,this.lose.active=!1)}},init2:function(){this.goon2.active=!0,this.close2.active=!0;var e=this.data;if(this.gameend.active=!0,console.log(e),e.players)for(var t=0;t<e.players.length;t++){var n=cc.instantiate(this.endlist),a=this.dayingjia("pointCount",t),i=this.dayingjia("dianCount",t);n.getComponent("endUserInfo").setData(e.players[t],a,i),n.parent=this.layout2}},dayingjia:function(e,t){for(var n=!0,a=this.data.players[t][e],i=0;i<this.data.players.length;i++)if(0==a||i!=t&&this.data.players[i][e]>a){n=!1;break}return n},onBGClick:function(e){this.node.dispatchEvent(new cc.Event.EventCustom("restar",!0))},onCloseClick:function(){},setData:function(e){this.data=e,this.init()},setDataEnd:function(e){this.data=e,this.init2()}}),cc._RF.pop()},{}],TPcreateRoom:[function(e,t,n){"use strict";cc._RF.push(t,"439dd5FI2FMzoeSG06keBfz","TPcreateRoom");var a,i,r,c,o,s,l,d,u=e("createRoom");cc.Class({extends:u,properties:{shuang:cc.Node,taishu:cc.Node},onLoad:function(){i="bigGun",l="15",a="8",r="4",c=!1,o="unlimited",s="householderPay",d={}},clickmoshi:function(e){a=this.mosiOrpepleClick(e)},clickPepNum:function(e){r=this.mosiOrpepleClick(e)},clickTPPlayer:function(e){"smallGun"==(i=this.mosiOrpepleClick(e))?this.bigClicks(!1,"10"):this.bigClicks(!0,"15")},clickTPQiHu:function(e){o=this.mosiOrpepleClick(e)},clickTPPayType:function(e){s=this.mosiOrpepleClick(e)},clickTPTaiFan:function(e){l="smallGun"==i?10:this.mosiOrpepleClick(e)},dobleClick:function(){c=!c},createClick:function(){d.game="TP",cc.weijifen.playType="TP",d.player=i,d.taiFan=l,d.QiHu=o,d.pepNums=r,d.pay=s,d.count=a,d.twoFan=c,cc.weijifen.authorization&&(d.token=cc.weijifen.authorization),this.onClick(d)},bigClicks:function(e,t){this.shuang.active=e,this.shuang.getComponent(cc.Toggle).isChecked=!1,c=!1,l=t,this.taishu.children[1].active=e,this.taishu.children[0].children[2].getComponent(cc.Label).string=t+"台番"}}),cc._RF.pop()},{createRoom:"createRoom"}],TakeCards:[function(e,t,n){"use strict";cc._RF.push(t,"ae303D/QetM34OFtHWSRxma","TakeCards");var a=e("MJCardsValue");cc.Class({extends:a,properties:{target:cc.Node,majing:cc.Node,atlas:cc.SpriteAtlas,chun:cc.SpriteFrame,ju:cc.SpriteFrame,lan:cc.SpriteFrame,xia:cc.SpriteFrame,zhu:cc.SpriteFrame},onLoad:function(){},init:function(e,t){this.majiangValue(e,t)},majiangValue:function(e,t){atlas="B"==t?[this.chun,this.ju,this.lan,this.xia,this.zhu,this.atlas]:this.atlas,this.mjcardvalue(cvalue,t,this.target,atlas)}}),cc._RF.pop()},{MJCardsValue:"MJCardsValue"}],TakeMJCard:[function(e,t,n){"use strict";cc._RF.push(t,"55ed5g2JNlCuYS1630r7h00","TakeMJCard"),cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node},tape:cc.Button},onLoad:function(){this.tape.node.on("touchmove",this.touchendClick,this),this.tape.node.on("touchend",this.mouseupClick,this)},mouseupClick:function(e){console.log(this.y),cc.sys.localStorage.getItem("delta")>90&&(e.target.x=0,e.target.y=0,this.node.dispatchEvent(new cc.Event.EventCustom("takecard",!0))),e.target.x=0,e.target.y=0,cc.sys.localStorage.removeItem("delta")},touchendClick:function(e){var t=e.target.parent.getComponent("HandCards");if("true"!=cc.sys.localStorage.getItem("alting")&&"true"!=cc.sys.localStorage.getItem("ting")&&!t.caishen){var n=e.touch.getDelta();e.target.x+=n.x,e.target.y+=n.y,cc.sys.localStorage.setItem("delta",e.target.y)}},onClick:function(e){var t=cc.find("Canvas").getComponent("MJDataBind"),n=this.target.getComponent("HandCards");if(1==cc.weijifen.click&&"true"!=cc.sys.localStorage.getItem("alting"))this.huifu(),this.node.dispatchEvent(new cc.Event.EventCustom("takecard",!0));else if(1==n.take){if(t.tings&&"true"==cc.sys.localStorage.getItem("ting")){t.tingSelect.active=!1;for(var a=t.tingSelect.children[0].children.length,i=0;i<a;i++)t.tingSelect.children[0].children[i].destroy()}e.target.x=0,e.target.y=0,this.node.dispatchEvent(new cc.Event.EventCustom("takecard",!0))}else if(this.huifu(),"true"==cc.sys.localStorage.getItem("alting")&&cc.sys.localStorage.setItem("take","true"),n.target.y=n.target.y+20,n.cardvalue.color=new cc.Color(230,190,190),n.take=!0,t.tings&&"true"==cc.sys.localStorage.getItem("ting")){for(var r=t.tingSelect.children[0].children.length,c=0;c<r;c++)t.tingSelect.children[0].children[c].destroy();for(var o=0;o<t.tings.length;o++){var s=t.tings[o].card;if(s<0&&parseInt(s/4)==parseInt(n.value/4)||s>=0&&n.mjtype==parseInt(s/36)&&parseInt(n.value%36/4)==parseInt(s%36/4)){var l=t.decode(t.tings[o].cards);console.log(l),t.tingSelect.active=!0;for(var d=0;d<l.length;d++){var u=cc.instantiate(t.tingSelectch);u.getComponent("tingAction").target.getComponent("HandCards").init(l[d],!0),u.parent=t.tingSelect.children[0],!0}break}}}},huifu:function(){for(var e=cc.find("Canvas/cards/handcards/current/currenthandcards").children.length,t=0;t<e;t++){var n=cc.find("Canvas/cards/handcards/current/currenthandcards").children[t],a=n.getComponent("HandCards");a.take=!1;var i=cc.find("Canvas/cards/handcards/current/currenthandcards").children[t].children[0],r=n.getComponent("HandCards");cc.weijifen.cardNum>14?(r.cardvalue.width=67.5,r.cardvalue.height=102.5,n.width=65.5):n.width=73,a.target.y=0,i.getComponent(cc.Button).interactable&&!r.caishen&&(a.cardvalue.color=new cc.Color(255,255,255))}}}),cc._RF.pop()},{}],WJFCommon:[function(e,t,n){"use strict";cc._RF.push(t,"71dcfAMsIxGvo2RVGEC9OQN","WJFCommon"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},ready:function(){var e=!1;return cc.weijifen?e=!0:this.scene("login",this),e},connect:function(){return this.disconnect(),cc.weijifen.socket=window.io.connect(cc.weijifen.http.wsURL+"/bm/game"),cc.weijifen.socket.ondisconnect=function(){console.log("user disconnected")},cc.weijifen.socket},disconnect:function(){null!=cc.weijifen.socket&&(cc.weijifen.socket.disconnect(),cc.weijifen.socket=null)},getCommon:function(e){return cc.find("Canvas/script/"+e).getComponent(e)},loadding:function(){if(cc.weijifen.loadding.size()>0){this.loaddingDialog=cc.weijifen.loadding.get(),this.loaddingDialog.parent=cc.find("Canvas"),this._animCtrl=this.loaddingDialog.getComponent(cc.Animation);this._animCtrl.play("loadding")}},alert:function(e){if(cc.weijifen.dialog.size()>0){this.alertdialog=cc.weijifen.dialog.get(),this.alertdialog.parent=cc.find("Canvas");var t=this.alertdialog.getChildByName("message");null!=t&&t.getComponent(cc.Label)&&(t.getComponent(cc.Label).string=e)}return this.alertdialog},closeloadding:function(){cc.weijifen.loadding.put(cc.find("Canvas/loadding"))},closealert:function(){cc.find("Canvas/alert")&&cc.weijifen.dialog.put(cc.find("Canvas/alert"))},scene:function(e,t){cc.director.preloadScene(e,function(){cc.weijifen&&t.closeloadding(t.loaddingDialog),cc.director.loadScene(e)})},root:function(){return cc.find("Canvas")},decode:function(t){var n=new Array;if(cc.sys.isNative){var a=e("Base64").decode(t);if(a&&a.length>0)for(r=0;r<a.length;r++)n[r]=a[r]}else for(var i=new DataView(t),r=0;r<t.byteLength;r++)n[r]=i.getInt8(r);return n},parse:function(e){return cc.sys.isNative?JSON.parse(e):e},reset:function(e,t){e.token&&(e.token.id?cc.weijifen.authorization=e.token.id:cc.weijifen.authorization=e.token),e.data&&(cc.weijifen.user=e.data),e.playUser&&(cc.weijifen.user=e.playUser),e.game&&(cc.weijifen.games=e.games),cc.weijifen.playway=null,cc.weijifen.localStorage.put("userinfo",t)},logout:function(){null!=cc.weijifen.dialog&&(cc.weijifen.dialog.destroy(),cc.weijifen.dialog=null),cc.weijifen.authorization=null,cc.weijifen.user=null,cc.weijifen.games=null,cc.weijifen.playway=null,this.disconnect()},socket:function(){var e=cc.weijifen.socket;return null==e&&(e=this.connect()),e},map:function(e,t){this.routes[e]=t||function(){}},route:function(e){return this.routes[e]||function(){}},talkPlay:function(){},talkRecord:function(){},ab2str:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},str2ab:function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint8Array(t),a=0,i=e.length;a<i;a++)n[a]=e.charCodeAt(a);return t},getGame:function(e,t){e.match&&(cc.weijifen.match=e.match),e.room?cc.weijifen.room=e.room:t&&(cc.weijifen.room=e.room),e.playway&&(cc.weijifen.playway=e.playway),e.playerNum&&(cc.weijifen.playerNum=e.playerNum),e.cardNum&&(cc.weijifen.cardNum=e.cardNum),e.maxRound&&(cc.weijifen.maxRound=e.maxRound)},headImg:function(e,t,n){if(t){var a=t,i=e.getComponent(cc.Sprite);cc.loader.load({url:a,type:"jpg"},function(t,a){i.spriteFrame=new cc.SpriteFrame(a),e.width=64,e.height=64,1==n&&(e.radius=10)})}},hall:function(e){var t=cc.weijifen.menu.get(),n=t.getComponent("menuSet");t.parent=cc.find("Canvas"),n.init(e)},wrong:function(){var e=cc.find("Canvas/menu");cc.weijifen.menu.put(e)}}),cc._RF.pop()},{Base64:"Base64"}],allclose:[function(e,t,n){"use strict";cc._RF.push(t,"8e3d8OELiJCdKhO35O3haDr","allclose"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},closeAlert:function(){var e=cc.find("Canvas/alert");cc.weijifen.dialog.put(e)},closeMenu:function(){var e=cc.find("Canvas/menu");cc.weijifen.menu.put(e)},toHall:function(){cc.director.loadScene("gameMain")},closeWIND:function(){cc.find("Canvas/alert").destroy()},leavaNotice:function(){this.node.dispatchEvent(new cc.Event.EventCustom("leaveGame",!0))},leaveGameClick:function(){var t=new(e("WJFCommon"));t.scene("gameMain",t),this.node.dispatchEvent(new cc.Event.EventCustom("leaveGame",!0))},overNotice:function(){console.log("***********进入overNotice"),this.node.dispatchEvent(new cc.Event.EventCustom("overGame",!0))}}),cc._RF.pop()},{WJFCommon:"WJFCommon"}],closeAlert:[function(e,t,n){"use strict";cc._RF.push(t,"08fa0KWg0RERqOAYA8JcbIf","closeAlert"),cc.Class({extends:cc.Component,properties:{button:cc.Button},onLoad:function(){this.button.node.on("click",this.closeAlert,this)},closeAlert:function(){var e=cc.find("Canvas/alert");cc.weijifen.dialog.put(e)},toHall:function(){cc.director.loadScene("gameMain")}}),cc._RF.pop()},{}],close:[function(e,t,n){"use strict";cc._RF.push(t,"803fcuwAIBI1Y4mhUz6+tAB","close");var a=e("allclose");cc.Class({extends:a,properties:{button:cc.Button},onLoad:function(){console.log(this.button),this.button&&this.button.node.on("click",this.callback,this)},callback:function(e){this[this.button.clickEvents[0].customEventData]()},alert:function(){this.closeAlert()},menu:function(){this.closeMenu()},hall:function(){this.leavaNotice(),this.toHall()},wind:function(){this.closeWIND()},over:function(){this.overNotice()}}),cc._RF.pop()},{allclose:"allclose"}],common:[function(e,t,n){"use strict";cc._RF.push(t,"aaf63EFxwFB8qQkVsFSA2Bo","common");var a=e("WJFCommon"),r=!0;cc.Class({extends:a,properties:{agree:{default:null,type:cc.Node},successBtn:{default:null,type:cc.Node},loginLogoNode:{default:null,type:cc.Node},WZLogo:{default:null,type:cc.SpriteFrame},CCLogo:{default:null,type:cc.SpriteFrame},JXLogo:cc.SpriteFrame},onLoad:function(){var t=void 0;r=!0;var n=this.loginLogoNode.getComponent(cc.Sprite);"wz"==cc.weijifen.GameBase.gameModel?n.spriteFrame=this.WZLogo:"ch"==cc.weijifen.GameBase.gameModel?n.spriteFrame=this.CCLogo:"jx"==cc.weijifen.GameBase.gameModel&&(n.spriteFrame=this.JXLogo);var a=cc.weijifen.localStorage.get("xySuccess");this.tourist(),1==a&&(this.successBtn.active=!1,this.login()),t=e("ShareWx"),cc.weijifen.WXorBlow=new t,cc.weijifen.http.httpGet("/api/room/reConnection?token="+cc.weijifen.authorization,this.roomSuccess,this.roomError,this),cc.weijifen.WXorBlow.init()},roomSuccess:function(e,t){var n=JSON.parse(e);e.room?t.getGame(n):cc.weijifen.room=null},roomError:function(e){e.alert("网络异常")},tourist:function(){if(r)if(this.loadding(),null==cc.weijifen.localStorage.get("userinfo"))cc.weijifen.http.httpGet("/api/guest",this.guestSucess,this.error,this);else{var e=JSON.parse(cc.weijifen.localStorage.get("userinfo"));if(null!=e.token)cc.weijifen.http.httpGet("/api/guest?token="+e.token.id,this.guestSucess,this.error,this)}else this.alert("请同意用户使用协议")},click:function(e){r=e.isChecked},guestSucess:function(e,t){var n=JSON.parse(e);n.error?(t.alert(n.msg),t.closeloadding()):null!=n&&null!=n.token&&null!=n.data&&(t.closealert(),t.reset(n,e),t.scene("gameMain",t))},wxlogin:function(){r?(cc.weijifen.localStorage.put("xySuccess","1"),this.login()):this.alert("请同意用户使用协议")},login:function(){if(this.loadding(),this.getUrlParam("invitationcode")){values[i].split("=")[1];cc.weijifen.http.httpGet("/wxController/getLoginCode?invitationcode="+this.getUrlParam("invitationcode"),this.wxseccess,this.error,this)}this.getUrlParam("status")&&(cc.weijifen.paystatus=this.getUrlParam("invitationcode")),this.getUrlParam("userId")&&cc.weijifen.http.httpGet("/wxController/getWxUserToken?userId="+this.getUrlParam("userId"),this.sucess,this.error,this)},sucess:function(e,t){var n=JSON.parse(e);if(n.error)t.alert(n.msg),t.closeloadding();else if(null!=n&&1==n.success&&null!=n.token)if(t.reset(n,e),"null"!=t.getUrlParam("roomNum")&&null!=t.getUrlParam("roomNum")){var a=t.getUrlParam("roomNum");if("number"==typeof a&&(null!=cc.weijifen.room&&cc.weijifen.room==a||null==cc.weijifen.room)){var i={};i.token=cc.weijifen.authorization,i.room=a}cc.weijifen.http.httpPost("/api/room/query",i,t.JRsucess,t.JRerror,t)}else t.closealert(),t.connect(),t.scene("gameMain",t)},error:function(e){e.closeloadding(),e.alert("网络异常，服务访问失败")},JRsucess:function(e,t){var n=JSON.parse(e),a=t.getUrlParam("roomNum");n.error?(t.alert(n.msg),t.closeloadding()):(t.closealert(),n.playway&&n.room?(t.getGame(n,a),cc.director.preloadScene("majiang",function(){cc.director.loadScene("majiang")})):(t.connect(),t.scene("gameMain",t)))},JRerror:function(e){e.closeloadding(),e.alert("房间加入失败")},getUrlParam:function(e){var t=window.location.search.replace("amp;",""),n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=t.substr(1).match(n);return null!=a?unescape(a[2]):null}}),cc._RF.pop()},{ShareWx:"ShareWx",WJFCommon:"WJFCommon"}],createRoomPreb:[function(e,t,n){"use strict";cc._RF.push(t,"9d5caHRhklIHaA5JwZPRXtK","createRoomPreb"),cc.Class({extends:cc.Component,properties:{ch:cc.Prefab,lanzi:cc.Node,left:cc.Node,lg:cc.Prefab,tp:cc.Prefab,ph:cc.Prefab},onLoad:function(){console.log("ppp"),"ch"==cc.weijifen.GameBase.gameModel?this.allfunction(["长春"],[this.ch]):"wz"==cc.weijifen.GameBase.gameModel?this.allfunction(["龙港","台炮"],[this.lg,this.tp]):"jx"==cc.weijifen.GameBase.gameModel&&this.allfunction(["平湖"],[this.ph])},allfunction:function(e,t){for(var n in e){var a=cc.instantiate(this.lanzi);a.active=!0,a.parent=this.left,a.children[2].getComponent(cc.Label).string=e[n],cc.instantiate(t[n]).parent=a.children[1]}}}),cc._RF.pop()},{}],createRoom:[function(e,t,n){"use strict";cc._RF.push(t,"87a10oDpdxAu6wTBJJp71qE","createRoom");var a=e("WJFCommon");cc.Class({extends:a,properties:{},onLoad:function(){},mosiOrpepleClick:function(e){var t=e.target.name;return console.log(t),t},gameTypeClick:function(e,t){return e.isChecked?t+=e.node.name+"@@":t=t.replace(e.node.name+"@@",""),t},onClick:function(e){this.loadding(),cc.weijifen.http.httpPost("/api/room/create",e,this.sucess,this.error,this)},sucess:function(e,t){var n=JSON.parse(e);t.closeloadding(),n.room&&n.playway?(t.getGame(n),cc.director.loadScene("majiang")):n.error?t.alert(n.msg):t.alert("请求失败"),t.wrong()},error:function(e){e.wrong(),e.closeloadding(),e.alert("连接出错")}}),cc._RF.pop()},{WJFCommon:"WJFCommon"}],endUserInfo:[function(e,t,n){"use strict";cc._RF.push(t,"b3bafG9PohD5or5PCxzE5/L","endUserInfo"),cc.Class({extends:cc.Component,properties:{dianpao:cc.Node,dayingjia:cc.Node,username:cc.Label,myself:cc.Node,totalcount:cc.Label,huCount:cc.Label,dianCount:cc.Label,touchBao:cc.Label,bankerCount:cc.Label,bk:cc.Node,yinse:cc.SpriteFrame,yintiao:cc.SpriteFrame,headimgs:cc.Node},onLoad:function(){},init:function(){var e=cc.find("Canvas").getComponent("MJDataBind").playersarray,t=this.data,n=void 0;console.log(this.data),this.huCount.string=t.huCount,this.dianCount.string=t.dianCount,this.touchBao.string=t.touchBao,this.bankerCount.string=t.bankerCount,this.totalcount.string="总分："+t.pointCount;for(var a=0;a<e.length;a++){var i=e[a].getComponent("MaJiangPlayer");i.data.id==this.data.user&&(n=i.data.headimgurl,this.username.string=i.data.username),this.data.user==cc.weijifen.user.id&&(this.myself.active=!0)}if(t.pointCount<0&&(this.bk.getComponent(cc.Sprite).spriteFrame=this.yinse),this.dyj&&(this.dayingjia.active=!0),this.dp&&!this.dyj&&(this.dianpao.active=!0),n){var r=n,c=this.headimgs.getComponent(cc.Sprite),o=this.headimgs;cc.loader.load({url:r,type:"jpg"},function(e,t){c.spriteFrame=new cc.SpriteFrame(t),o.width=90,o.height=90})}},setData:function(e,t,n){this.data=e,this.dyj=t,this.dp=n,this.init()}}),cc._RF.pop()},{}],event_receive:[function(e,t,n){"use strict";cc._RF.push(t,"99e15nqdHtFToW6LPthNhVE","event_receive");var a=e("WJFCommon");cc.Class({extends:a,properties:{},onLoad:function(){},readyGM_receive:function(){this.node.on("readyGM",function(e){cc.find("Canvas").getComponent("MajiangDataBind").current_ready.active=!0,cc.log(self),self.getSelf().socket().emit("readyGame",JSON.stringify({}))})},restar_receive:function(){this.node.on("restar",function(e){if(e.getUserData())"wz"==cc.weijifen.GameBase.gameModel?cc.director.loadScene("温州"):cc.director.loadScene("gameMain");else{if("true"!=cc.sys.localStorage.getItem("clear")){var t=cc.find("Canvas").getComponent("MajiangDataBind"),n=cc.find("Canvas/global/main/button/readybtn");"true"!=cc.weijifen.match&&(n.active=!0,n.x=-10);var a=cc.find("Canvas/global/main/godcard/child").children;if(a)for(var i=0;i<a.length;i++)cc.find("Canvas/global/main/godcard/child").children[i].destroy();t.reinitGame(t)}cc.sys.localStorage.removeItem("clear"),self.getSelf().shouOperationMune(),e.target.parent.destroy()}})},click_receive:function(){this.node.on("click",function(e){var t=cc.find("Canvas").getComponent("MajiangDataBind"),n=cc.moveTo(.5,880,274);t.setting_coin.runAction(n),t.initcardwidth()})},setting_receive:function(){this.node.on("leaveGame",function(){self.getSelf().socket().emit("leaveGame",JSON.stringify({}))}),this.node.on("overGame",function(e){cc.log("ecent_getUserData",e.getUserData);var t=self.getSelf().socket();e.getUserData()?t.emit("overGame",JSON.stringify({REFUSE:e.getUserData()})):t.emit("overGame",JSON.stringify({}))})},net_receive:function(){this.node.on("duankai",function(e){cc.find("Canvas").getComponent("MajiangDataBind").duankai.active=!0,cc.sys.localStorage.setItem("duankai","true")}),this.node.on("chonglian",function(e){cc.find("Canvas").getComponent("MajiangDataBind").duankai.active=!1,cc.director.loadScene("majiang")})},takecard_receive:function(){this.node.on("takecard",function(e){var t=cc.find("Canvas").getComponent("MajiangDataBind");if(cc.weijifen.audio.playSFX("select.mp3"),"true"==cc.sys.localStorage.getItem("take")){var n=e.target.getComponent("TakeMJCard");if(null!=n){var a=n.target.getComponent("HandCards");self.getSelf().takecard_event({userid:cc.weijifen.user.id,card:a.value},self);var i=n.target.getComponent("HandCards"),r=self.getSelf().socket();if("true"==cc.sys.localStorage.getItem("ting")){t.tingting.active=!0,setTimeout(function(){t.tingting.active=!1},2e3),cc.weijifen.audio.playSFX("nv/ting.mp3");var c=self.getSelf().socket();cc.sys.localStorage.removeItem("ting"),c.emit("selectaction",JSON.stringify({action:"ting",actionCard:[i.value]})),self.getSelf().tingAction()}else r.emit("doplaycards",i.value);self.getSelf().shouOperationMune()}e.stopPropagation()}})},mySelection_receive:function(){this.node.on("mjSelection",function(e){var t=cc.find("Canvas").getComponent("MajiangDataBind").selectfather;t.active=!1,t.children[0].children[1].children.splice(0,t.children[0].children[1].children.length);var n=self.getSelf().socket(),a=[],i=void 0;console.log(e),e.getUserData()&&(i=e.getUserData().name,a=e.getUserData().params),n.emit("selectaction",JSON.stringify({action:i,actionCard:a})),self.getSelf().shouOperationMune(),e.stopPropagation()})},dan_receive:function(e){this.node.on("dan",function(e){cc.sys.localStorage.removeItem("guo");var t=cc.find("Canvas").getComponent("MajiangDataBind");if(t.dans&&t.dans.length>1)cc.sys.localStorage.removeItem("take"),t.mjOperation("dan",t.dans,t);else{var n=self.getSelf().socket(),a=[];t.dans&&(a=t.dans[0]),n.emit("selectaction",JSON.stringify({action:"dan",actionCard:a}))}self.getSelf().shouOperationMune(),e.stopPropagation()})},peng_receive:function(e){this.node.on("peng",function(e){cc.sys.localStorage.removeItem("guo"),self.getSelf().socket().emit("selectaction",JSON.stringify({action:"peng",actionCard:[]})),self.getSelf().shouOperationMune(),e.stopPropagation()})},gang_receive:function(e){this.node.on("gang",function(e){cc.sys.localStorage.removeItem("guo");var t=cc.find("Canvas").getComponent("MajiangDataBind");if(t.gangs&&t.gangs.length>1)cc.sys.localStorage.removeItem("take"),t.mjOperation("gang",t.gangs,t);else{var n=self.getSelf().socket(),a=[];t.gangs&&(a=t.gangs[0]),n.emit("selectaction",JSON.stringify({action:"gang",actionCard:a}))}self.getSelf().shouOperationMune(),e.stopPropagation()})},chi_receive:function(e){this.node.on("chi",function(e){cc.sys.localStorage.removeItem("guo");var t=cc.find("Canvas").getComponent("MajiangDataBind");if(t.chis&&t.chis.length>1){cc.sys.localStorage.removeItem("take");for(var n=[],a=[],i=0;i<t.chis.length;i++){var r={};t.chis[i].sort(function(e,t){return e-t}),r.id=t.chis[i][0],r.value=t.chis[i],n.push(r)}n.sort(function(e,t){return t.id-e.id});for(var c=0;c<n.length;c++)a.push(n[c].value);t.mjOperation("chi",a,t)}else self.getSelf().socket().emit("selectaction",JSON.stringify({action:"chi",actionCard:t.chis[0]}));self.getSelf().shouOperationMune(),e.stopPropagation()})},guo_receive:function(e){this.node.on("hu",function(e){cc.sys.localStorage.removeItem("guo"),self.getSelf().socket().emit("selectaction",JSON.stringify({action:"hu",actionCard:[]})),self.getSelf().shouOperationMune(),e.stopPropagation()})}}),cc._RF.pop()},{WJFCommon:"WJFCommon"}],event_send:[function(e,t,n){"use strict";cc._RF.push(t,"ed130e6LixB4K2PmZzSZtpC","event_send");var a=e("WJFCommon");cc.Class({extends:a,properties:{},onLoad:function(){},command:function(){socket.on("command",function(e){var t=self.getSelf().parse(e);console.log(t.command),console.log(t),self.getSelf().route(t.command)(t,self)})},players:function(){socket.on("players",function(e){var t=self.getSelf().parse(e);self.getSelf().route("players")(t,self)})},talkOnSay:function(){socket.on("talkOnSay",function(e){self.talk_event(e,null)})},disconnect:function(){cc.weijifen.socket.on("disconnect",function(){var e=cc.find("Canvas");if(e){var t=e.getComponent("MajiangDataBind");t.duankai2.active=!0,t.duankai.active=!1,"true"!=cc.sys.localStorage.getItem("dis")&&cc.director.loadScene("majiang")}})}}),cc._RF.pop()},{WJFCommon:"WJFCommon"}],hallDataBind:[function(e,t,n){"use strict";cc._RF.push(t,"fb566ee9PJCvaohyw/5Rbiz","hallDataBind");var a=e("WJFCommon");cc.Class({extends:a,properties:{username:{default:null,type:cc.Label},goldcoins:{default:null,type:cc.Label},cards:{default:null,type:cc.Label},headimg:{default:null,type:cc.Node},message:{default:null,type:cc.Label},backRoomImg:{default:null,type:cc.SpriteFrame},backRoom:cc.Node},onLoad:function(){this.ready()&&("wechat"==cc.weijifen.browserType&&cc.weijifen.WXorBlow.shareRoom(),cc.weijifen.paystatus&&("true"==cc.weijifen.paystatus?(this.alert("充值成功"),cc.weijifen.paystatus=null):(this.alert("充值失败"),cc.weijifen.paystatus=null)),null!=cc.weijifen.user.nickname&&""!=cc.weijifen.user.nickname||(cc.weijifen.user.nickname="游客_"+Date.parse(new Date)),this.username.string=cc.weijifen.user.nickname,this.headImg(this.headimg,cc.weijifen.user.headimgurl,!0),cc.weijifen.http.httpGet("/api/room/reConnection?token="+cc.weijifen.authorization,this.roomSuccess,this.roomError,this),cc.weijifen.http.httpGet("/api/room/queryRoomCard?token="+cc.weijifen.authorization,this.cardsucess,this.carderror,this),this.gundongText(),cc.weijifen.http.httpGet("/activity/findActivityListGame?token="+cc.weijifen.authorization,this.tzsucess,this.tzerror,this))},carderror:function(e,t){},cardsucess:function(e,t){var n=JSON.parse(e);cc.weijifen.user.cards=n.cards,t.cards.string=cc.weijifen.user.cards,t.goldcoins.string=cc.weijifen.user.goldcoins},tzsucess:function(e,t){JSON.parse(e).tz&&t.hall(3)},tzerror:function(e,t){},roomSuccess:function(e,t){var n=JSON.parse(e);n.room?(t.getGame(n),t.backRoom.getComponent(cc.Sprite).spriteFrame=t.backRoomImg):cc.weijifen.room=null},roomError:function(e){e.alert("网络异常")},gundongText:function(){var e=this,t=e.message,n=e.message.node.parent.width;t.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(t.node.width/n*10,cc.p(-t.node.width-n/5,t.node.y)),cc.callFunc(function(){t.node.x=n}))),1e3)},createRoom:function(){"null"!=cc.weijifen.room&&null!=cc.weijifen.room?cc.director.loadScene("majiang"):this.hall(11)},joinInRoom:function(){this.hall(10)}}),cc._RF.pop()},{WJFCommon:"WJFCommon"}],init:[function(e,t,n){"use strict";cc._RF.push(t,"693a6Sif2FEXoXCM2AJeCaG","init");var a={};a.gameModel="ch";var i=e("WJFCommon");cc.Class({extends:i,properties:{loaddingPrefab:{default:null,type:cc.Prefab},alertPrefab:{default:null,type:cc.Prefab},menuPrefab:{default:null,type:cc.Prefab}},onLoad:function(){this.initMgr();if(!cc.sys.isNative&&cc.sys.isMobile){var e=this.node.getComponent(cc.Canvas);e.fitHeight=!0,e.fitWidth=!0}cc.director.preloadScene("majiang")},initMgr:function(){if(null==cc.weijifen){cc.weijifen={},cc.weijifen.settingflag=!1,cc.weijifen.GameBase=a,cc.weijifen.http=e("HTTP"),cc.weijifen.localStorage=e("IOUtils"),cc.weijifen.seckey="weijifen",cc.weijifen.dialog=null,cc.weijifen.dialogtwo=null,cc.weijifen.paystatus=null,cc.weijifen.starttime="",cc.weijifen.room=null,cc.weijifen.loadding=new cc.NodePool,cc.weijifen.loadding.put(cc.instantiate(this.loaddingPrefab)),cc.weijifen.dialog=new cc.NodePool,cc.weijifen.dialog.put(cc.instantiate(this.alertPrefab)),cc.weijifen.menu=new cc.NodePool,cc.weijifen.menu.put(cc.instantiate(this.menuPrefab)),cc.weijifen.click=cc.sys.localStorage.getItem("click"),cc.weijifen.bgcolor=cc.sys.localStorage.getItem("bgcolor"),cc.weijifen.cardcolor=cc.sys.localStorage.getItem("cardcolor");var t=e("Audios");cc.weijifen.audio=new t,cc.weijifen.audio.init(),cc.sys.isNative?window.io=SocketIO:window.io=e("socket.io"),"true"!=cc.sys.localStorage.getItem("nobgm")&&cc.weijifen.audio.playBGM("bgFight.mp3")}}}),cc._RF.pop()},{Audios:"Audios",HTTP:"HTTP",IOUtils:"IOUtils",WJFCommon:"WJFCommon","socket.io":"socket.io"}],inputNum:[function(e,t,n){"use strict";cc._RF.push(t,"930caCUcQxLxpTOazwLEOOD","inputNum");var a=e("WJFCommon"),i="";cc.Class({extends:a,properties:{cardNum:cc.Label,inputNum1:{default:null,type:cc.Label},inputNum2:{default:null,type:cc.Label},inputNum3:{default:null,type:cc.Label},inputNum4:{default:null,type:cc.Label},inputNum5:{default:null,type:cc.Label},inputNum6:{default:null,type:cc.Label},notice:{default:null,type:cc.Label}},onLoad:function(){i="",this.cardNum&&(this.cardNum.string=cc.weijifen.user.cards+"张"),this.zhoupic&&cc.weijifen.http.httpGet("/api/room/queryUserWinner?token="+cc.weijifen.authorization,this.countsucess,this.counterror,this)},clickNum:function(e){var t=e.currentTarget.name;e.currentTarget.parent.parent;this.notice.string="",0==i.length?this.inputNum1.string=t:1==i.length?this.inputNum2.string=t:2==i.length?this.inputNum3.string=t:3==i.length?this.inputNum4.string=t:4==i.length?this.inputNum5.string=t:5==i.length&&(this.inputNum6.string=t),6==(i+=t).length&&this.click()},click:function(){var e={};e.room=i,console.log(e),cc.weijifen.authorization?(cc.weijifen.room=i,e.token=cc.weijifen.authorization,cc.weijifen.http.httpPost("/api/room/query",e,this.JRsucess,this.JRerror,this)):(i="",this.notice.getComponent("cc.Label").string="not found token",object.inputNum1.string="",object.inputNum2.string="",object.inputNum3.string="",object.inputNum4.string="",object.inputNum5.string="",object.inputNum6.string="")},JRsucess:function(e,t){var n=JSON.parse(e);n.playway&&n.room?(cc.weijifen.playway=n.playway,n.match&&(cc.weijifen.match=n.match),n.game&&(cc.weijifen.playType=n.game),n.playerNum&&(cc.weijifen.playerNum=n.playerNum),n.cardNum&&(cc.weijifen.cardNum=n.cardNum),n.maxRound&&(cc.weijifen.maxRound=n.maxRound),cc.director.preloadScene("majiang",function(){cc.director.loadScene("majiang")})):n.error&&(t.notice.string=n.msg,t.inputNum1.string="",t.inputNum2.string="",t.inputNum3.string="",t.inputNum4.string="",t.inputNum5.string="",t.inputNum6.string="",i="",0==cc.weijifen.user.cards&&(cc.weijifen.dialog.destroy(),cc.weijifen.dialog=null,cc.weijifen.dialog=cc.instantiate(t.shopping),cc.weijifen.dialog.parent=cc.find("Canvas")))},JRerror:function(e){e.notice.string="连接失败",e.inputNum1.string="",e.inputNum2.string="",e.inputNum3.string="",e.inputNum4.string="",e.inputNum5.string="",e.inputNum6.string="",i=""},emptyClick:function(){i="",this.inputNum1.string="",this.inputNum2.string="",this.inputNum3.string="",this.inputNum4.string="",this.inputNum5.string="",this.inputNum6.string=""},removeOneClick:function(){""!=i&&(1==i.length?this.inputNum1.string="":2==i.length?this.inputNum2.string="":3==i.length?this.inputNum3.string="":4==i.length?this.inputNum4.string="":5==i.length?this.inputNum5.string="":6==i.length&&(this.inputNum6.string=""),i=i.substr(0,i.length-1))},helpClick:function(){cc.weijifen.dialog1=cc.instantiate(this.help),cc.weijifen.dialog1.parent=this.root()},jjroom:function(e){var t=e.target.name,n=e.target.children[0].getComponent(cc.Label).string.split(" ");cc.weijifen.starttime=n[1],this.loadding(),cc.weijifen.http.httpGet("/api/room/match?token="+cc.weijifen.authorization+"&type="+t,this.jjsucess,this.jjerror,this)},jjsucess:function(e,t){console.log(e);var n=JSON.parse(e);n.error?(t.closeloadding(),t.alert2("比赛未开始或者您没资格进入比赛")):(n.match&&(cc.weijifen.match=n.match),n.playway&&(cc.weijifen.playway=n.playway),n.room&&(cc.weijifen.room=n.room),n.playerNum&&(cc.weijifen.playerNum=n.playerNum),n.cardNum&&(cc.weijifen.cardNum=n.cardNum),n.maxRound&&(cc.weijifen.maxRound=n.maxRound),cc.director.loadScene("majiang"))},jjerror:function(e,t){t.closeloadding(),t.alert2("比赛未开始或者您没资格进入比赛")}}),cc._RF.pop()},{WJFCommon:"WJFCommon"}],menuSet:[function(e,t,n){"use strict";cc._RF.push(t,"62e1d99fz5Ms7v//JNzRdrj","menuSet"),cc.Class({extends:cc.Component,properties:{title:cc.Node,joinRoom:cc.Prefab,createRoom:cc.Prefab,setting:cc.Prefab},onLoad:function(){},init:function(e){this.clearPerfab();var t=this.title.parent.children[2];for(var n in this.title.children)this.title.children[n].active=!1;if(this.title.children[e].active=!0,10==e||11==e||14==e){var a=void 0;t.active=!1,10==e?a=cc.instantiate(this.joinRoom):11==e?a=cc.instantiate(this.createRoom):14==e&&(a=cc.instantiate(this.setting)),a.parent=this.node}else{t.active=!0,t=t.getComponent(cc.WebView);var i=["服务协议内嵌url地址","家长监护工程内嵌url地址","/gamePrizeActivity/prizeDzp?token="+cc.weijifen.authorization+"&type="+cc.weijifen.GameBase+"&activityId=27","/gameNotice/goNoticePage?token="+cc.weijifen.authorization+"&type="+cc.weijifen.GameBase,"帮助内嵌url地址","/shop/shopPage?token="+cc.weijifen.authorization+"&type="+cc.weijifen.GameBase,"提现内嵌url地址","/situation/goSituationPage?token="+cc.weijifen.authorization+"&type="+cc.weijifen.GameBase,"/rankingList/goRankingPage?token="+cc.weijifen.authorization+"&type="+cc.weijifen.GameBase,"","","","","/userInfo/goUserInfoPage?token="+cc.weijifen.authorization];t.url=cc.weijifen.url+i[e]}},clearPerfab:function(){cc.find("Canvas/menu/joinroom")&&cc.find("Canvas/menu/joinroom").destroy(),cc.find("Canvas/menu/createroom")&&cc.find("Canvas/menu/createroom").destroy(),cc.find("Canvas/menu/setting")&&cc.find("Canvas/menu/setting").destroy()}}),cc._RF.pop()},{}],menuToggle:[function(e,t,n){"use strict";cc._RF.push(t,"bae74URcBVIN5EEmAukqFWa","menuToggle");var a=e("WJFCommon");cc.Class({extends:a,properties:{},onLoad:function(){},close:function(){var e=cc.find("Canvas/menu");cc.weijifen.menu.put(e)},open:function(e){this.hall(e.target.name)}}),cc._RF.pop()},{WJFCommon:"WJFCommon"}],operation:[function(e,t,n){"use strict";cc._RF.push(t,"c410fOzFvxAg4E6cDyOZ0jU","operation"),cc.Class({extends:cc.Component,properties:{action:{default:null}},onLoad:function(){},setAction:function(e){this.action=e},click:function(e){var t=e.target.getComponent("operation").action;1!=cc.sys.localStorage.getItem("altake")&&cc.sys.localStorage.setItem("take","true");var n=new cc.Event.EventCustom("mjSelection",!0);n.setUserData(t),this.node.dispatchEvent(n)},quxiao:function(e){var t=cc.find("Canvas").getComponent("MJDataBind").selectfather;t.active=!1,t.children[0].children[1].children.splice(0,t.children[0].children[1].children.length),cc.sys.localStorage.setItem("take","true"),this.node.dispatchEvent(new cc.Event.EventCustom("guo",!0))}}),cc._RF.pop()},{}],settingClick:[function(e,t,n){"use strict";cc._RF.push(t,"b8b03JIEDJDNKTHYwpV7YpB","settingClick");var a=e("MJDataBind");cc.Class({extends:a,properties:{alert2:cc.Prefab,summary:{default:null,type:cc.Prefab}},onLoad:function(){console.log("th*/**/*/*/*/*/*/*/",cc.find("Canvas/js/settingClick").getComponent("settingClick"))},settingBtnClick:function(e){var t=cc.find("Canvas/other/setting");if(cc.weijifen.settingflag=!cc.weijifen.settingflag,cc.weijifen.settingflag){t.active=!0;n=cc.moveTo(.5,cc.p(408,306));t.runAction(n)}else{var n=cc.moveTo(.5,cc.p(850,306));t.runAction(n)}},leaveClick:function(){this.openAlert("是否退出房间","hall"),cc.find("Canvas").getChildByName("alert").getChildByName("button").active=!1},overClick:function(){cc.log("解散按钮"),this.openAlert("是否解散房间","over"),cc.find("Canvas").getChildByName("alert").getChildByName("button").active=!0},openAlert:function(e,t){var n=cc.instantiate(this.alert2);n.children[2].getComponent(cc.Label).string=e,n.children[4].getComponent(cc.Button).clickEvents[0].customEventData=t,n.parent=cc.find("Canvas")},isOver_event:function(){cc.log("isOver_event");var e=cc.find("Canvas").getComponent("MJDataBind");if(cc.sys.localStorage.setItem("unOver","true"),e.alert.size()>0){var t=e.alert.get();t.parent=cc.find("Canvas");var n=t.getComponent("overGameClick");n.txt.string="你的好友请求解散房间",n.button.active=!1,n.button2.active=!0,n.labei.active=!1,n.labei2.active=!0,n.time=30,e.t=setInterval(function(){n.daojishi()},1e3)}},gameOver_event:function(e,t){console.log("this****************",this);var n=cc.find("Canvas/js/settingClick").getComponent("settingClick");console.log("进入Game_over_event",n.endGameOver);var a=void 0;"true"==cc.sys.localStorage.getItem("unOver")?(a=0,cc.sys.localStorage.removeItem("unOver")):a=3e3,setTimeout(function(){n.endGameOver(e,t)},a)},endGameOver:function(e,t){console.log("进入endGameOver");var n=cc.instantiate(this.summary);n.parent=t.root(),n.getComponent("SummaryClick").setDataEnd(e)},over_event:function(){cc.weijifen.maxRound=null,cc.weijifen.op=null,cc.weijifen.playerNum=null,cc.weijifen.room=null,cc.weijifen.cardNum=null,cc.sys.localStorage.setItem("dis","true"),"wz"==cc.weijifen.GameBase.gameModel?cc.director.loadScene("温州"):cc.director.loadScene("gameMain");var e=cc.find("Canvas").getComponent("MJDataBind");clearTimeout(e.t)},unOver_event:function(){var e=cc.find("Canvas").getComponent("MJDataBind");cc.sys.localStorage.removeItem("unOver");var t=cc.find("Canvas/isover");clearTimeout(e.t),e.alert.put(t)}}),cc._RF.pop()},{MJDataBind:"MJDataBind"}],"socket.io":[function(e,t,n){(function(a){"use strict";cc._RF.push(t,"2c637kmxfZEF7BdWd4kXVy9","socket.io");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.sys.isNative||function(e){if("object"===(void 0===n?"undefined":i(n))&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==a?a:"undefined"!=typeof self?self:this).io=e()}}(function(){return function t(n,a,i){function r(o,s){if(!a[o]){if(!n[o]){var l="function"==typeof e&&e;if(!s&&l)return l(o,!0);if(c)return c(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=a[o]={exports:{}};n[o][0].call(u.exports,function(e){var t=n[o][1][e];return r(t||e)},u,u.exports,t,n,a,i)}return a[o].exports}for(var c="function"==typeof e&&e,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(e,t,n){(function(n){function a(e,t){if(!(this instanceof a))return new a(e,t);t=t||{},e&&"object"==(void 0===e?"undefined":i(e))&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?null:t.rejectUnauthorized;var r="object"==(void 0===n?"undefined":i(n))&&n;r.global===r&&t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),this.open()}function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var c=e("./transports"),o=e("component-emitter"),s=e("debug")("engine.io-client:socket"),l=e("indexof"),d=e("engine.io-parser"),u=e("parseuri"),p=e("parsejson"),h=e("parseqs");t.exports=a,a.priorWebsocketSuccess=!1,o(a.prototype),a.protocol=d.protocol,a.Socket=a,a.Transport=e("./transport"),a.transports=e("./transports"),a.parser=e("engine.io-parser"),a.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=r(this.query);return t.EIO=d.protocol,t.transport=e,this.id&&(t.sid=this.id),new c[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},a.prototype.open=function(){var e;if(this.rememberUpgrade&&a.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},a.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},a.prototype.probe=function(e){function t(){if(p.onlyBinaryUpgrades){var t=!this.supportsBinary&&p.transport.supportsBinary;u=u||t}u||(s('probe transport "%s" opened',e),d.send([{type:"ping",data:"probe"}]),d.once("packet",function(t){if(!u)if("pong"==t.type&&"probe"==t.data){if(s('probe transport "%s" pong',e),p.upgrading=!0,p.emit("upgrading",d),!d)return;a.priorWebsocketSuccess="websocket"==d.name,s('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){u||"closed"!=p.readyState&&(s("changing transport and sending upgrade packet"),l(),p.setTransport(d),d.send([{type:"upgrade"}]),p.emit("upgrade",d),d=null,p.upgrading=!1,p.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=d.name,p.emit("upgradeError",n)}}))}function n(){u||(u=!0,l(),d.close(),d=null)}function i(t){var a=new Error("probe error: "+t);a.transport=d.name,n(),s('probe transport "%s" failed because of error: %s',e,t),p.emit("upgradeError",a)}function r(){i("transport closed")}function c(){i("socket closed")}function o(e){d&&e.name!=d.name&&(s('"%s" works - aborting "%s"',e.name,d.name),n())}function l(){d.removeListener("open",t),d.removeListener("error",i),d.removeListener("close",r),p.removeListener("close",c),p.removeListener("upgrading",o)}s('probing transport "%s"',e);var d=this.createTransport(e,{probe:1}),u=!1,p=this;a.priorWebsocketSuccess=!1,d.once("open",t),d.once("error",i),d.once("close",r),this.once("close",c),this.once("upgrading",o),d.open()},a.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",a.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},a.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(p(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},a.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},a.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},a.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},a.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},a.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},a.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},a.prototype.write=a.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},a.prototype.sendPacket=function(e,t,n,a){if("function"==typeof t&&(a=t,t=void 0),"function"==typeof n&&(a=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}},a.prototype.close=function(){function e(){a.onClose("forced close"),s("socket closing - telling transport to close"),a.transport.close()}function t(){a.removeListener("upgrade",t),a.removeListener("upgradeError",t),e()}function n(){a.once("upgrade",t),a.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var a=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},a.prototype.onError=function(e){s("socket error %j",e),a.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},a.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},a.prototype.filterUpgrades=function(e){for(var t=[],n=0,a=e.length;n<a;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(e,t,n){function a(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}var i=e("engine.io-parser"),r=e("component-emitter");t.exports=a,r(a.prototype),a.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},a.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},a.prototype.onPacket=function(e){this.emit("packet",e)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(e,t,n){(function(t){var a=e("xmlhttprequest-ssl"),i=e("./polling-xhr"),r=e("./polling-jsonp"),c=e("./websocket");n.polling=function(e){var n=!1,c=!1,o=!1!==e.jsonp;if(t.location){var s="https:"==location.protocol,l=location.port;l||(l=s?443:80),n=e.hostname!=location.hostname||l!=e.port,c=e.secure!=s}if(e.xdomain=n,e.xscheme=c,"open"in new a(e)&&!e.forceJSONP)return new i(e);if(!o)throw new Error("JSONP disabled");return new r(e)},n.websocket=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(e,t,n){(function(n){function a(){}function i(e){r.call(this,e),this.query=this.query||{},o||(n.___eio||(n.___eio=[]),o=n.___eio),this.index=o.length;var t=this;o.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=a)},!1)}var r=e("./polling"),c=e("component-inherit");t.exports=i;var o,s=/\n/g,l=/\\n/g;c(i,r),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function n(){a(),t()}function a(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=i.iframeId,r.src="javascript:0"}r.id=i.iframeId,i.form.appendChild(r),i.iframe=r}var i=this;if(!this.form){var r,c=document.createElement("form"),o=document.createElement("textarea"),d=this.iframeId="eio_iframe_"+this.index;c.className="socketio",c.style.position="absolute",c.style.top="-1000px",c.style.left="-1000px",c.target=d,c.method="POST",c.setAttribute("accept-charset","utf-8"),o.name="d",c.appendChild(o),document.body.appendChild(c),this.form=c,this.area=o}this.form.action=this.uri(),a(),e=e.replace(l,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{"./polling":8,"component-inherit":16}],7:[function(e,t,n){(function(n){function a(){}function i(e){if(s.call(this,e),n.location){var t="https:"==location.protocol,a=location.port;a||(a=t?443:80),this.xd=e.hostname!=n.location.hostname||a!=e.port,this.xs=e.secure!=t}else this.extraHeaders=e.extraHeaders}function r(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function c(){for(var e in r.requests)r.requests.hasOwnProperty(e)&&r.requests[e].abort()}var o=e("xmlhttprequest-ssl"),s=e("./polling"),l=e("component-emitter"),d=e("component-inherit"),u=e("debug")("engine.io-client:polling-xhr");t.exports=i,t.exports.Request=r,d(i,s),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new r(e)},i.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,a=this.request({method:"POST",data:e,isBinary:n}),i=this;a.on("success",t),a.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=a},i.prototype.doPoll=function(){u("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(r.prototype),r.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new o(e),a=this;try{u("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck(!0);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}}catch(e){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){a.onLoad()},t.onerror=function(){a.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?a.onLoad():setTimeout(function(){a.onError(t.status)},0))},u("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){a.onError(e)},0)}n.document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},r.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},r.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},r.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=a:this.xhr.onreadystatechange=a,e)try{this.xhr.abort()}catch(e){}n.document&&delete r.requests[this.index],this.xhr=null}},r.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),a=[],i=0,r=n.length;i<r;i++)a.push(n[i]);e=String.fromCharCode.apply(null,a)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},r.prototype.hasXDR=function(){return void 0!==n.XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},n.document&&(r.requestsCount=0,r.requests={},n.attachEvent?n.attachEvent("onunload",c):n.addEventListener&&n.addEventListener("beforeunload",c,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(e,t,n){function a(e){var t=e&&e.forceBase64;d&&!t||(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),r=e("parseqs"),c=e("engine.io-parser"),o=e("component-inherit"),s=e("yeast"),l=e("debug")("engine.io-client:polling");t.exports=a;var d=null!=new(e("xmlhttprequest-ssl"))({xdomain:!1}).responseType;o(a,i),a.prototype.name="polling",a.prototype.doOpen=function(){this.poll()},a.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var a=0;this.polling&&(l("we are currently polling - waiting to pause"),a++,this.once("pollComplete",function(){l("pre-pause polling complete"),--a||t()})),this.writable||(l("we are currently writing - waiting to pause"),a++,this.once("drain",function(){l("pre-pause writing complete"),--a||t()}))}else t()},a.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},a.prototype.onData=function(e){var t=this;l("polling got data %s",e);c.decodePayload(e,this.socket.binaryType,function(e,n,a){if("opening"==t.readyState&&t.onOpen(),"close"==e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},a.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},a.prototype.write=function(e){n=this;this.writable=!1;var t=function(){n.writable=!0,n.emit("drain")},n=this;c.encodePayload(e,this.supportsBinary,function(e){n.doWrite(e,t)})},a.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=r.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(e,t,n){(function(n){function a(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,i.call(this,e)}var i=e("../transport"),r=e("engine.io-parser"),c=e("parseqs"),o=e("component-inherit"),s=e("yeast"),l=e("debug")("engine.io-client:websocket"),d=n.WebSocket||n.MozWebSocket,u=d||("undefined"!=typeof window?null:e("ws"));t.exports=a,o(a,i),a.prototype.name="websocket",a.prototype.supportsBinary=!0,a.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.ws=d?new u(e):new u(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},a.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(a.prototype.onData=function(e){var t=this;setTimeout(function(){i.prototype.onData.call(t,e)},0)}),a.prototype.write=function(e){function t(){a.emit("flush"),setTimeout(function(){a.writable=!0,a.emit("drain")},0)}var a=this;this.writable=!1;for(var i=e.length,c=0,o=i;c<o;c++)!function(e){r.encodePacket(e,a.supportsBinary,function(r){if(!d){var c={};e.options&&(c.compress=e.options.compress),a.perMessageDeflate&&("string"==typeof r?n.Buffer.byteLength(r):r.length)<a.perMessageDeflate.threshold&&(c.compress=!1)}try{d?a.ws.send(r):a.ws.send(r,c)}catch(e){l("websocket closed before onclose event")}--i||t()})}(e[c])},a.prototype.onClose=function(){i.prototype.onClose.call(this)},a.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},a.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||(e.b64=1),(e=c.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},a.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===a.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(e,t,n){var a=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||a))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":22}],11:[function(e,t,n){function a(){}t.exports=function(e,t,n){function i(e,a){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(r=!0,t(e),t=n):0!==i.count||r||t(null,a)}var r=!1;return n=n||a,i.count=e,0===e?t():i}},{}],12:[function(e,t,n){t.exports=function(e,t,n){var a=e.byteLength;if(t=t||0,n=n||a,e.slice)return e.slice(t,n);if(t<0&&(t+=a),n<0&&(n+=a),n>a&&(n=a),t>=a||t>=n||0===a)return new ArrayBuffer(0);for(var i=new Uint8Array(e),r=new Uint8Array(n-t),c=t,o=0;c<n;c++,o++)r[o]=i[c];return r.buffer}},{}],13:[function(e,t,n){!function(e){n.encode=function(t){var n,a=new Uint8Array(t),i=a.length,r="";for(n=0;n<i;n+=3)r+=e[a[n]>>2],r+=e[(3&a[n])<<4|a[n+1]>>4],r+=e[(15&a[n+1])<<2|a[n+2]>>6],r+=e[63&a[n+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r},n.decode=function(t){var n,a,i,r,c,o=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var d=new ArrayBuffer(o),u=new Uint8Array(d);for(n=0;n<s;n+=4)a=e.indexOf(t[n]),i=e.indexOf(t[n+1]),r=e.indexOf(t[n+2]),c=e.indexOf(t[n+3]),u[l++]=a<<2|i>>4,u[l++]=(15&i)<<4|r>>2,u[l++]=(3&r)<<6|63&c;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(e,t,n){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var a=n.buffer;if(n.byteLength!==a.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(a,n.byteOffset,n.byteLength)),a=i.buffer}e[t]=a}}}function a(e,t){t=t||{};var a=new r;n(e);for(var i=0;i<e.length;i++)a.append(e[i]);return t.type?a.getBlob(t.type):a.getBlob()}function i(e,t){return n(e),new Blob(e,t||{})}var r=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,c=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=c&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),s=r&&r.prototype.append&&r.prototype.getBlob;t.exports=c?o?e.Blob:i:s?a:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{}],15:[function(e,t,n){function a(e){if(e)return i(e)}function i(e){for(var t in a.prototype)e[t]=a.prototype[t];return e}t.exports=a,a.prototype.on=a.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},a.prototype.once=function(e,t){function n(){a.off(e,n),t.apply(this,arguments)}var a=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=a.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var a,i=0;i<n.length;i++)if((a=n[i])===t||a.fn===t){n.splice(i,1);break}return this},a.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var a=0,i=(n=n.slice(0)).length;a<i;++a)n[a].apply(this,t);return this},a.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},a.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],16:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],17:[function(e,t,n){function a(){var e;try{e=n.storage.debug}catch(e){}return e}(n=t.exports=e("./debug")).log=function(){return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var a="color: "+this.color,i=0,r=0;return(e=[e[0],a,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(r=i))}),e.splice(r,0,a),e},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=a,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{"./debug":18}],18:[function(e,t,n){function a(){return n.colors[r++%n.colors.length]}(n=t.exports=function(e){function t(){}function r(){var e=r,t=+new Date,c=t-(i||t);e.diff=c,e.prev=i,e.curr=t,i=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=a());var o=Array.prototype.slice.call(arguments);o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var s=0;o[0]=o[0].replace(/%([a-z%])/g,function(t,a){if("%%"===t)return t;s++;var i=n.formatters[a];if("function"==typeof i){var r=o[s];t=i.call(e,r),o.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(o=n.formatArgs.apply(e,o)),(r.log||n.log||console.log.bind(console)).apply(e,o)}t.enabled=!1,r.enabled=!0;var c=n.enabled(e)?r:t;return c.namespace=e,c}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),a=t.length,i=0;i<a;i++)t[i]&&("-"===(e=t[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,a;for(t=0,a=n.skips.length;t<a;t++)if(n.skips[t].test(e))return!1;for(t=0,a=n.names.length;t<a;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var i,r=0},{ms:25}],19:[function(e,t,n){(function(t){function a(e,t){return t("b"+n.packets[e.type]+e.data.data)}function i(e,t,a){if(!t)return n.encodeBase64Packet(e,a);var i=e.data,r=new Uint8Array(i),c=new Uint8Array(1+i.byteLength);c[0]=v[e.type];for(var o=0;o<r.length;o++)c[o+1]=r[o];return a(c.buffer)}function r(e,t,a){if(!t)return n.encodeBase64Packet(e,a);var i=new FileReader;return i.onload=function(){e.data=i.result,n.encodePacket(e,t,!0,a)},i.readAsArrayBuffer(e.data)}function c(e,t,a){if(!t)return n.encodeBase64Packet(e,a);if(m)return r(e,t,a);var i=new Uint8Array(1);return i[0]=v[e.type],a(new w([i.buffer,e.data]))}function o(e,t,n){for(var a=new Array(e.length),i=p(e.length,n),r=0;r<e.length;r++)!function(e,n,i){t(n,function(t,n){a[e]=n,i(t,a)})}(r,e[r],i)}var s=e("./keys"),l=e("has-binary"),d=e("arraybuffer.slice"),u=e("base64-arraybuffer"),p=e("after"),h=e("utf8"),f=navigator.userAgent.match(/Android/i),g=/PhantomJS/i.test(navigator.userAgent),m=f||g;n.protocol=3;var v=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=s(v),C={type:"error",data:"parser error"},w=e("blob");n.encodePacket=function(e,n,r,o){"function"==typeof n&&(o=n,n=!1),"function"==typeof r&&(o=r,r=null);var s=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&s instanceof ArrayBuffer)return i(e,n,o);if(w&&s instanceof t.Blob)return c(e,n,o);if(s&&s.base64)return a(e,o);var l=v[e.type];return void 0!==e.data&&(l+=r?h.encode(String(e.data)):String(e.data)),o(""+l)},n.encodeBase64Packet=function(e,a){var i="b"+n.packets[e.type];if(w&&e.data instanceof t.Blob){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];a(i+e)},r.readAsDataURL(e.data)}var c;try{c=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var o=new Uint8Array(e.data),s=new Array(o.length),l=0;l<o.length;l++)s[l]=o[l];c=String.fromCharCode.apply(null,s)}return i+=t.btoa(c),a(i)},n.decodePacket=function(e,t,a){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(a)try{e=h.decode(e)}catch(e){return C}i=e.charAt(0);return Number(i)==i&&y[i]?e.length>1?{type:y[i],data:e.substring(1)}:{type:y[i]}:C}var i=new Uint8Array(e)[0],r=d(e,1);return w&&"blob"===t&&(r=new w([r])),{type:y[i],data:r}},n.decodeBase64Packet=function(e,n){var a=y[e.charAt(0)];if(!t.ArrayBuffer)return{type:a,data:{base64:!0,data:e.substr(1)}};var i=u.decode(e.substr(1));return"blob"===n&&w&&(i=new w([i])),{type:a,data:i}},n.encodePayload=function(e,t,a){function i(e){return e.length+":"+e}"function"==typeof t&&(a=t,t=null);var r=l(e);return t&&r?w&&!m?n.encodePayloadAsBlob(e,a):n.encodePayloadAsArrayBuffer(e,a):e.length?void o(e,function(e,a){n.encodePacket(e,!!r&&t,!0,function(e){a(null,i(e))})},function(e,t){return a(t.join(""))}):a("0:")},n.decodePayload=function(e,t,a){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,a);"function"==typeof t&&(a=t,t=null);var i;if(""==e)return a(C,0,1);for(var r,c,o="",s=0,l=e.length;s<l;s++){var d=e.charAt(s);if(":"!=d)o+=d;else{if(""==o||o!=(r=Number(o)))return a(C,0,1);if(c=e.substr(s+1,r),o!=c.length)return a(C,0,1);if(c.length){if(i=n.decodePacket(c,t,!0),C.type==i.type&&C.data==i.data)return a(C,0,1);if(!1===a(i,s+r,l))return}s+=r,o=""}}return""!=o?a(C,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));o(e,function(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,n){var a=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),i=new Uint8Array(a),r=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var a=new Uint8Array(e.length),c=0;c<e.length;c++)a[c]=e.charCodeAt(c);n=a.buffer}i[r++]=t?0:1;for(var o=n.byteLength.toString(),c=0;c<o.length;c++)i[r++]=parseInt(o[c]);i[r++]=255;for(var a=new Uint8Array(n),c=0;c<a.length;c++)i[r++]=a[c]}),t(i.buffer)})},n.encodePayloadAsBlob=function(e,t){o(e,function(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var a=new Uint8Array(e.length),i=0;i<e.length;i++)a[i]=e.charCodeAt(i);e=a.buffer,n[0]=0}for(var r=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),c=new Uint8Array(r.length+1),i=0;i<r.length;i++)c[i]=parseInt(r[i]);if(c[r.length]=255,w){var o=new w([n.buffer,c.buffer,e]);t(null,o)}})},function(e,n){return t(new w(n))})},n.decodePayloadAsBinary=function(e,t,a){"function"==typeof t&&(a=t,t=null);for(var i=e,r=[],c=!1;i.byteLength>0;){for(var o=new Uint8Array(i),s=0===o[0],l="",u=1;255!=o[u];u++){if(l.length>310){c=!0;break}l+=o[u]}if(c)return a(C,0,1);i=d(i,2+l.length),l=parseInt(l);var p=d(i,0,l);if(s)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(e){var h=new Uint8Array(p);p="";for(u=0;u<h.length;u++)p+=String.fromCharCode(h[u])}r.push(p),i=d(i,l)}var f=r.length;r.forEach(function(e,i){a(n.decodePacket(e,t,!0),i,f)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var a in e)n.call(e,a)&&t.push(a);return t}},{}],21:[function(e,t,n){(function(n){var a=e("isarray");t.exports=function(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(a(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==(void 0===e?"undefined":i(e))){e.toJSON&&(e=e.toJSON());for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)&&t(e[c]))return!0}return!1}return t(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{isarray:24}],22:[function(e,t,n){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},{}],23:[function(e,t,n){var a=[].indexOf;t.exports=function(e,t){if(a)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],24:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],25:[function(e,t,n){function a(e){if(!((e=""+e).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(e){return e>=d?Math.round(e/d)+"d":e>=l?Math.round(e/l)+"h":e>=s?Math.round(e/s)+"m":e>=o?Math.round(e/o)+"s":e+"ms"}function r(e){return c(e,d,"day")||c(e,l,"hour")||c(e,s,"minute")||c(e,o,"second")||e+" ms"}function c(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var o=1e3,s=60*o,l=60*s,d=24*l,u=365.25*d;t.exports=function(e,t){return t=t||{},"string"==typeof e?a(e):t.long?r(e):i(e)}},{}],26:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,a=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,r=/(?:^|:|,)(?:\s*\[)+/g,c=/^\s+/,o=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(c,"").replace(o,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(a,"@").replace(i,"]").replace(r,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{}],27:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),a=0,i=n.length;a<i;a++){var r=n[a].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},{}],28:[function(e,t,n){var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var c=a.exec(e||""),o={},s=14;s--;)o[i[s]]=c[s]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o}},{}],29:[function(e,t,n){(function(e){!function(a){function r(e){for(var t,n,a=[],i=0,r=e.length;i<r;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<r?56320==(64512&(n=e.charCodeAt(i++)))?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),i--):a.push(t);return a}function c(e){for(var t,n=e.length,a=-1,i="";++a<n;)(t=e[a])>65535&&(i+=y((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=y(t);return i}function o(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function s(e,t){return y(e>>t&63|128)}function l(e){if(0==(4294967168&e))return y(e);var t="";return 0==(4294965248&e)?t=y(e>>6&31|192):0==(4294901760&e)?(o(e),t=y(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=y(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+=y(63&e|128)}function d(){if(v>=m)throw Error("Invalid byte index");var e=255&g[v];if(v++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(){var e,t,n,a,i;if(v>m)throw Error("Invalid byte index");if(v==m)return!1;if(e=255&g[v],v++,0==(128&e))return e;if(192==(224&e)){if((i=(31&e)<<6|(t=d()))>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=d(),n=d(),(i=(15&e)<<12|t<<6|n)>=2048)return o(i),i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=d(),n=d(),a=d(),(i=(15&e)<<18|t<<12|n<<6|a)>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}var p="object"==(void 0===n?"undefined":i(n))&&n,h="object"==(void 0===t?"undefined":i(t))&&t&&t.exports==p&&t,f="object"==(void 0===e?"undefined":i(e))&&e;f.global!==f&&f.window!==f||(a=f);var g,m,v,y=String.fromCharCode,C={version:"2.0.0",encode:function(e){for(var t=r(e),n=t.length,a=-1,i="";++a<n;)i+=l(t[a]);return i},decode:function(e){g=r(e),m=g.length,v=0;for(var t,n=[];!1!==(t=u());)n.push(t);return c(n)}};if(p&&!p.nodeType)if(h)h.exports=C;else{var w={}.hasOwnProperty;for(var b in C)w.call(C,b)&&(p[b]=C[b])}else a.utf8=C}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{}],30:[function(e,t,n){function a(e){var t="";do{t=c[e%o]+t,e=Math.floor(e/o)}while(e>0);return t}function i(){var e=a(+new Date);return e!==r?(l=0,r=e):e+"."+a(l++)}for(var r,c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},l=0,d=0;d<o;d++)s[c[d]]=d;i.encode=a,i.decode=function(e){var t=0;for(d=0;d<e.length;d++)t=t*o+s[e.charAt(d)];return t},t.exports=i},{}],31:[function(e,t,n){function a(e,t){"object"==(void 0===e?"undefined":i(e))&&(t=e,e=void 0),t=t||{};var n,a=r(e),c=a.source,d=a.id,u=a.path,p=l[d]&&u in l[d].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||p?(s("ignoring socket cache for %s",c),n=o(c,t)):(l[d]||(s("new io instance for %s",c),l[d]=o(c,t)),n=l[d]),n.socket(a.path)}var r=e("./url"),c=e("socket.io-parser"),o=e("./manager"),s=e("debug")("socket.io-client");t.exports=n=a;var l=n.managers={};n.protocol=c.protocol,n.connect=a,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(e,t,n){function a(e,t){if(!(this instanceof a))return new a(e,t);e&&"object"==(void 0===e?"undefined":i(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var r=e("engine.io-client"),c=e("./socket"),o=e("component-emitter"),s=e("socket.io-parser"),l=e("./on"),d=e("component-bind"),u=e("debug")("socket.io-client:manager"),p=e("indexof"),h=e("backo2"),f=Object.prototype.hasOwnProperty;t.exports=a,a.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},a.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},o(a.prototype),a.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},a.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},a.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},a.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},a.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},a.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},a.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},a.prototype.open=a.prototype.connect=function(e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var a=l(t,"open",function(){n.onopen(),e&&e()}),i=l(t,"error",function(t){if(u("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var a=new Error("Connection error");a.data=t,e(a)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var c=this._timeout;u("connect attempt will timeout after %d",c);var o=setTimeout(function(){u("connect attempt timed out after %d",c),a.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",c)},c);this.subs.push({destroy:function(){clearTimeout(o)}})}return this.subs.push(a),this.subs.push(i),this},a.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",d(this,"ondata"))),this.subs.push(l(e,"ping",d(this,"onping"))),this.subs.push(l(e,"pong",d(this,"onpong"))),this.subs.push(l(e,"error",d(this,"onerror"))),this.subs.push(l(e,"close",d(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",d(this,"ondecoded")))},a.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},a.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},a.prototype.ondata=function(e){this.decoder.add(e)},a.prototype.ondecoded=function(e){this.emit("packet",e)},a.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},a.prototype.socket=function(e){function t(){~p(a.connecting,n)||a.connecting.push(n)}var n=this.nsps[e];if(!n){n=new c(this,e),this.nsps[e]=n;var a=this;n.on("connecting",t),n.on("connect",function(){n.id=a.engine.id}),this.autoConnect&&t()}return n},a.prototype.destroy=function(e){var t=p(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},a.prototype.packet=function(e){u("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var a=0;a<n.length;a++)t.engine.write(n[a],e.options);t.encoding=!1,t.processPacketQueue()}))},a.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},a.prototype.cleanup=function(){u("cleanup");for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},a.prototype.close=a.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},a.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},a.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},a.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(e,t,n){t.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},{}],34:[function(e,t,n){function a(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var i=e("socket.io-parser"),r=e("component-emitter"),c=e("to-array"),o=e("./on"),s=e("component-bind"),l=e("debug")("socket.io-client:socket"),d=e("has-binary");t.exports=a;var u={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=r.prototype.emit;r(a.prototype),a.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[o(e,"open",s(this,"onopen")),o(e,"packet",s(this,"onpacket")),o(e,"close",s(this,"onclose"))]}},a.prototype.open=a.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},a.prototype.send=function(){var e=c(arguments);return e.unshift("message"),this.emit.apply(this,e),this},a.prototype.emit=function(e){if(u.hasOwnProperty(e))return p.apply(this,arguments),this;var t=c(arguments),n=i.EVENT;d(t)&&(n=i.BINARY_EVENT);var a={type:n,data:t};return a.options={},a.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),a.id=this.ids++),this.connected?this.packet(a):this.sendBuffer.push(a),delete this.flags,this},a.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},a.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:i.CONNECT})},a.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},a.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},a.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},a.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var a=c(arguments);l("sending ack %j",a);var r=d(a)?i.BINARY_ACK:i.ACK;t.packet({type:r,id:e,data:a})}}},a.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},a.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},a.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},a.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},a.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},a.prototype.close=a.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},a.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(e,t,n){(function(n){var a=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=function(e,t){var r=e,t=t||n.location;null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),r=a(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var c=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+c+":"+r.port,r.href=r.protocol+"://"+c+(t&&t.port==r.port?"":":"+r.port),r}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{debug:39,parseuri:45}],36:[function(e,t,n){function a(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=a,a.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},a.prototype.reset=function(){this.attempts=0},a.prototype.setMin=function(e){this.ms=e},a.prototype.setMax=function(e){this.max=e},a.prototype.setJitter=function(e){this.jitter=e}},{}],37:[function(e,t,n){var a=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=a.call(arguments,2);return function(){return t.apply(e,n.concat(a.call(arguments)))}}},{}],38:[function(e,t,n){function a(e){if(e)return i(e)}function i(e){for(var t in a.prototype)e[t]=a.prototype[t];return e}t.exports=a,a.prototype.on=a.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},a.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=a.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a,i=0;i<n.length;i++)if((a=n[i])===t||a.fn===t){n.splice(i,1);break}return this},a.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var a=0,i=(n=n.slice(0)).length;a<i;++a)n[a].apply(this,t);return this},a.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},a.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],39:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{"./debug":40,dup:17}],40:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{dup:18,ms:44}],41:[function(e,t,n){(function(n){var a=e("isarray");t.exports=function(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(a(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==(void 0===e?"undefined":i(e))){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)&&t(e[c]))return!0}return!1}return t(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{isarray:43}],42:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23}],43:[function(e,t,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],44:[function(e,t,n){arguments[4][25][0].apply(n,arguments)},{dup:25}],45:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{dup:28}],46:[function(e,t,n){(function(t){var a=e("isarray"),r=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(r(e)){var c={_placeholder:!0,num:n.length};return n.push(e),c}if(a(e)){for(var o=new Array(e.length),s=0;s<e.length;s++)o[s]=t(e[s]);return o}if("object"==(void 0===e?"undefined":i(e))&&!(e instanceof Date)){o={};for(var l in e)o[l]=t(e[l]);return o}return e}var n=[],c=e.data,o=e;return o.data=t(c),o.attachments=n.length,{packet:o,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder)return t[e.num];if(a(e)){for(var r=0;r<e.length;r++)e[r]=n(e[r]);return e}if(e&&"object"==(void 0===e?"undefined":i(e))){for(var c in e)e[c]=n(e[c]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function c(e,l,d){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){o++;var u=new FileReader;u.onload=function(){d?d[l]=this.result:s=this.result,--o||n(s)},u.readAsArrayBuffer(e)}else if(a(e))for(var p=0;p<e.length;p++)c(e[p],p,e);else if(e&&"object"==(void 0===e?"undefined":i(e))&&!r(e))for(var h in e)c(e[h],h,e)}var o=0,s=e;c(s),o||n(s)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{"./is-buffer":48,isarray:43}],47:[function(e,t,n){function a(){}function i(e){var t="",a=!1;return t+=e.type,n.BINARY_EVENT!=e.type&&n.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(a=!0,t+=e.nsp),null!=e.id&&(a&&(t+=",",a=!1),t+=e.id),null!=e.data&&(a&&(t+=","),t+=u.stringify(e.data)),d("encoded %j as %s",e,t),t}function r(e,t){h.removeBlobs(e,function(e){var n=h.deconstructPacket(e),a=i(n.packet),r=n.buffers;r.unshift(a),t(r)})}function c(){this.reconstructor=null}function o(e){var t={},a=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return l();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var i="";"-"!=e.charAt(++a)&&(i+=e.charAt(a),a!=e.length););if(i!=Number(i)||"-"!=e.charAt(a))throw new Error("Illegal attachments");t.attachments=Number(i)}if("/"==e.charAt(a+1))for(t.nsp="";++a&&","!=(c=e.charAt(a))&&(t.nsp+=c,a!=e.length););else t.nsp="/";var r=e.charAt(a+1);if(""!==r&&Number(r)==r){for(t.id="";++a;){var c=e.charAt(a);if(null==c||Number(c)!=c){--a;break}if(t.id+=e.charAt(a),a==e.length)break}t.id=Number(t.id)}if(e.charAt(++a))try{t.data=u.parse(e.substr(a))}catch(e){return l()}return d("decoded %s as %j",e,t),t}function s(e){this.reconPack=e,this.buffers=[]}function l(e){return{type:n.ERROR,data:"parser error"}}var d=e("debug")("socket.io-parser"),u=e("json3"),p=(e("isarray"),e("component-emitter")),h=e("./binary"),f=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=a,n.Decoder=c,a.prototype.encode=function(e,t){d("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type?r(e,t):t([i(e)])},p(c.prototype),c.prototype.add=function(e){var t;if("string"==typeof e)t=o(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new s(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!f(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},c.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},s.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},s.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(e,t,n){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{}],49:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],50:[function(e,t,n){(function(e){(function(){function a(e,t){function n(e){if(n[e]!==v)return n[e];var a;if("bug-string-char-index"==e)a="a"!="a"[0];else if("json"==e)a=n("json-stringify")&&n("json-parse");else{var i,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=t.stringify,l="function"==typeof o&&w;if(l){(i=function(){return 1}).toJSON=i;try{l="0"===o(0)&&"0"===o(new c)&&'""'==o(new s)&&o(C)===v&&o(v)===v&&o()===v&&"1"===o(i)&&"[1]"==o([i])&&"[null]"==o([v])&&"null"==o(null)&&"[null,null,null]"==o([v,C,null])&&o({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===o(null,i)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new d(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new d(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new d(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new d(-1))}catch(e){l=!1}}a=l}if("json-parse"==e){var u=t.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){var p=5==(i=u(r)).a.length&&1===i.a[0];if(p){try{p=!u('"\t"')}catch(e){}if(p)try{p=1!==u("01")}catch(e){}if(p)try{p=1!==u("1.")}catch(e){}}}}catch(e){p=!1}a=p}}return n[e]=!!a}e||(e=o.Object()),t||(t=o.Object());var c=e.Number||o.Number,s=e.String||o.String,l=e.Object||o.Object,d=e.Date||o.Date,u=e.SyntaxError||o.SyntaxError,p=e.TypeError||o.TypeError,h=e.Math||o.Math,f=e.JSON||o.JSON;"object"==(void 0===f?"undefined":i(f))&&f&&(t.stringify=f.stringify,t.parse=f.parse);var g,m,v,y=l.prototype,C=y.toString,w=new d(-0xc782b5b800cec);try{w=-109252==w.getUTCFullYear()&&0===w.getUTCMonth()&&1===w.getUTCDate()&&10==w.getUTCHours()&&37==w.getUTCMinutes()&&6==w.getUTCSeconds()&&708==w.getUTCMilliseconds()}catch(e){}if(!n("json")){var b=n("bug-string-char-index");if(!w)var k=h.floor,_=[0,31,59,90,120,151,181,212,243,273,304,334],S=function(e,t){return _[t]+365*(e-1970)+k((e-1969+(t=+(t>1)))/4)-k((e-1901+t)/100)+k((e-1601+t)/400)};if((g=y.hasOwnProperty)||(g=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=C?g=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,g=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,g.call(this,e)}),m=function(e,t){var n,a,c,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,a=new n;for(c in a)g.call(a,c)&&o++;return n=a=null,o?m=2==o?function(e,t){var n,a={},i="[object Function]"==C.call(e);for(n in e)i&&"prototype"==n||g.call(a,n)||!(a[n]=1)||!g.call(e,n)||t(n)}:function(e,t){var n,a,i="[object Function]"==C.call(e);for(n in e)i&&"prototype"==n||!g.call(e,n)||(a="constructor"===n)||t(n);(a||g.call(e,n="constructor"))&&t(n)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,c,o="[object Function]"==C.call(e),s=!o&&"function"!=typeof e.constructor&&r[i(e.hasOwnProperty)]&&e.hasOwnProperty||g;for(n in e)o&&"prototype"==n||!s.call(e,n)||t(n);for(c=a.length;n=a[--c];s.call(e,n)&&t(n));}),m(e,t)},!n("json-stringify")){var j={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},I=function(e,t){return("000000"+(t||0)).slice(-e)},N=function(e){for(var t='"',n=0,a=e.length,i=!b||a>10,r=i&&(b?e.split(""):e);n<a;n++){var c=e.charCodeAt(n);switch(c){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=j[c];break;default:if(c<32){t+="\\u00"+I(2,c.toString(16));break}t+=i?r[n]:e.charAt(n)}}return t+'"'},x=function e(t,n,a,r,c,o,s){var l,d,u,h,f,y,w,b,_,j,x,A,B,R,D,F;try{l=n[t]}catch(e){}if("object"==(void 0===l?"undefined":i(l))&&l)if("[object Date]"!=(d=C.call(l))||g.call(l,"toJSON"))"function"==typeof l.toJSON&&("[object Number]"!=d&&"[object String]"!=d&&"[object Array]"!=d||g.call(l,"toJSON"))&&(l=l.toJSON(t));else if(l>-1/0&&l<1/0){if(S){for(f=k(l/864e5),u=k(f/365.2425)+1970-1;S(u+1,0)<=f;u++);for(h=k((f-S(u,0))/30.42);S(u,h+1)<=f;h++);f=1+f-S(u,h),w=k((y=(l%864e5+864e5)%864e5)/36e5)%24,b=k(y/6e4)%60,_=k(y/1e3)%60,j=y%1e3}else u=l.getUTCFullYear(),h=l.getUTCMonth(),f=l.getUTCDate(),w=l.getUTCHours(),b=l.getUTCMinutes(),_=l.getUTCSeconds(),j=l.getUTCMilliseconds();l=(u<=0||u>=1e4?(u<0?"-":"+")+I(6,u<0?-u:u):I(4,u))+"-"+I(2,h+1)+"-"+I(2,f)+"T"+I(2,w)+":"+I(2,b)+":"+I(2,_)+"."+I(3,j)+"Z"}else l=null;if(a&&(l=a.call(n,t,l)),null===l)return"null";if("[object Boolean]"==(d=C.call(l)))return""+l;if("[object Number]"==d)return l>-1/0&&l<1/0?""+l:"null";if("[object String]"==d)return N(""+l);if("object"==(void 0===l?"undefined":i(l))){for(R=s.length;R--;)if(s[R]===l)throw p();if(s.push(l),x=[],D=o,o+=c,"[object Array]"==d){for(B=0,R=l.length;B<R;B++)A=e(B,l,a,r,c,o,s),x.push(A===v?"null":A);F=x.length?c?"[\n"+o+x.join(",\n"+o)+"\n"+D+"]":"["+x.join(",")+"]":"[]"}else m(r||l,function(t){var n=e(t,l,a,r,c,o,s);n!==v&&x.push(N(t)+":"+(c?" ":"")+n)}),F=x.length?c?"{\n"+o+x.join(",\n"+o)+"\n"+D+"}":"{"+x.join(",")+"}":"{}";return s.pop(),F}};t.stringify=function(e,t,n){var a,c,o,s;if(r[void 0===t?"undefined":i(t)]&&t)if("[object Function]"==(s=C.call(t)))c=t;else if("[object Array]"==s){o={};for(var l,d=0,u=t.length;d<u;l=t[d++],("[object String]"==(s=C.call(l))||"[object Number]"==s)&&(o[l]=1));}if(n)if("[object Number]"==(s=C.call(n))){if((n-=n%1)>0)for(a="",n>10&&(n=10);a.length<n;a+=" ");}else"[object String]"==s&&(a=n.length<=10?n:n.slice(0,10));return x("",(l={},l[""]=e,l),c,o,a,"",[])}}if(!n("json-parse")){var A,B,R=s.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw A=B=null,u()},P=function(){for(var e,t,n,a,i,r=B,c=r.length;A<c;)switch(i=r.charCodeAt(A)){case 9:case 10:case 13:case 32:A++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=b?r.charAt(A):r[A],A++,e;case 34:for(e="@",A++;A<c;)if((i=r.charCodeAt(A))<32)F();else if(92==i)switch(i=r.charCodeAt(++A)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=D[i],A++;break;case 117:for(t=++A,n=A+4;A<n;A++)(i=r.charCodeAt(A))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||F();e+=R("0x"+r.slice(t,A));break;default:F()}else{if(34==i)break;for(i=r.charCodeAt(A),t=A;i>=32&&92!=i&&34!=i;)i=r.charCodeAt(++A);e+=r.slice(t,A)}if(34==r.charCodeAt(A))return A++,e;F();default:if(t=A,45==i&&(a=!0,i=r.charCodeAt(++A)),i>=48&&i<=57){for(48==i&&(i=r.charCodeAt(A+1))>=48&&i<=57&&F(),a=!1;A<c&&(i=r.charCodeAt(A))>=48&&i<=57;A++);if(46==r.charCodeAt(A)){for(n=++A;n<c&&(i=r.charCodeAt(n))>=48&&i<=57;n++);n==A&&F(),A=n}if(101==(i=r.charCodeAt(A))||69==i){for(43!=(i=r.charCodeAt(++A))&&45!=i||A++,n=A;n<c&&(i=r.charCodeAt(n))>=48&&i<=57;n++);n==A&&F(),A=n}return+r.slice(t,A)}if(a&&F(),"true"==r.slice(A,A+4))return A+=4,!0;if("false"==r.slice(A,A+5))return A+=5,!1;if("null"==r.slice(A,A+4))return A+=4,null;F()}return"$"},M=function e(t){var n,a;if("$"==t&&F(),"string"==typeof t){if("@"==(b?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=P());a||(a=!0))a&&(","==t?"]"==(t=P())&&F():F()),","==t&&F(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=P());a||(a=!0))a&&(","==t?"}"==(t=P())&&F():F()),","!=t&&"string"==typeof t&&"@"==(b?t.charAt(0):t[0])&&":"==P()||F(),n[t.slice(1)]=e(P());return n}F()}return t},O=function(e,t,n){var a=E(e,t,n);a===v?delete e[t]:e[t]=a},E=function(e,t,n){var a,r=e[t];if("object"==(void 0===r?"undefined":i(r))&&r)if("[object Array]"==C.call(r))for(a=r.length;a--;)O(r,a,n);else m(r,function(e){O(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,a;return A=0,B=""+e,n=M(P()),"$"!=P()&&F(),A=B=null,t&&"[object Function]"==C.call(t)?E((a={},a[""]=n,a),"",t):n}}}return t.runInContext=a,t}var r={function:!0,object:!0},c=r[void 0===n?"undefined":i(n)]&&n&&!n.nodeType&&n,o=r["undefined"==typeof window?"undefined":i(window)]&&window||this,s=c&&r[void 0===t?"undefined":i(t)]&&t&&!t.nodeType&&"object"==(void 0===e?"undefined":i(e))&&e;if(!s||s.global!==s&&s.window!==s&&s.self!==s||(o=s),c)a(o,c);else{var l=o.JSON,d=o.JSON3,u=!1,p=a(o,o.JSON3={noConflict:function(){return u||(u=!0,o.JSON=l,o.JSON3=d,l=d=null),p}});o.JSON={parse:p.parse,stringify:p.stringify}}}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:{})},{}],51:[function(e,t,n){t.exports=function(e,t){for(var n=[],a=(t=t||0)||0;a<e.length;a++)n[a-t]=e[a];return n}},{}]},{},[31])(31)}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],suClick:[function(e,t,n){"use strict";cc._RF.push(t,"16a46hQTYBIsKllkbfiQxe+","suClick"),cc.Class({extends:cc.Component,properties:{time:cc.Label},onLoad:function(){},onBGClick:function(e){console.log("已经点击返回大厅按钮"),"true"==cc.beimi.match&&this.node.dispatchEvent(new cc.Event.EventCustom("readyGM",!0)),this.node.dispatchEvent(new cc.Event.EventCustom("restar",!0))},endclick:function(e){var t={};t.key=!0;var n=new cc.Event.EventCustom("restar",!0);n.setUserData(t),this.node.dispatchEvent(n)}}),cc._RF.pop()},{}],tingAction:[function(e,t,n){"use strict";cc._RF.push(t,"93fabL/i9RFDbFAhYT0MJc0","tingAction"),cc.Class({extends:cc.Component,properties:{label:cc.Label,target:cc.Node},onLoad:function(){}}),cc._RF.pop()},{}]},{},["CHcreateRoom","hallDataBind","inputNum","JXcreteRoom","LGcreateRoom","TPcreateRoom","common","init","MJDataBind","GameEvent","DanAction","GangAction","Kongcards","operation","tingAction","GameOver","endUserInfo","GamePlay","DeskCards","EndCards","HandCards","SpecCards","TakeMJCard","GameStartInit","MaJiangPlayer","BuHuaAction","MJCardsValue","TakeCards","RoomInit","SettingClide","SummaryClick","settingClick","suClick","IOUtils","LYAudio","ShareWx","WJFCommon","createRoom","createRoomPreb","allclose","close","closeAlert","menuSet","menuToggle","Audios","Base64","HTTP","event_receive","event_send","socket.io"]);