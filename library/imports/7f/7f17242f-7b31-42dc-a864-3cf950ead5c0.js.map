{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\resources\\script\\lib/assets\\resources\\script\\lib\\HTTP.js"],"names":["HTTP","cc","Class","extends","Component","properties","statics","baseURL","wsURL","authorization","httpGet","url","success","error","object","xhr","loader","getXMLHttpRequest","weijifen","onreadystatechange","readyState","status","respone","responseText","open","setRequestHeader","sys","isNative","timeout","send","encodeFormData","data","pairs","regexp","name","value","toString","pair","encodeURIComponent","replace","push","join","httpPost","params","onLoad"],"mappings":";;;;;;AAAA,IAAIA,OAAOC,GAAGC,KAAH,CAAS;AAChBC,aAASF,GAAGG,SADI;;AAGhBC,gBAAY,EAHI;AAKhBC,aAAS;AACL;AACA;AACAC,iBAAQ,iCAHH;AAILC,eAAQ,sCAJH;;AAML;AACA;AACA;;AAEF;;;;AAKEC,uBAAe,IAfV;AAgBLC,iBAAS,iBAAUC,GAAV,EAAgBC,OAAhB,EAA0BC,KAA1B,EAAkCC,MAAlC,EAA0C;AACnD,gBAAIC,MAAMd,GAAGe,MAAH,CAAUC,iBAAV,EAAV;AACAhB,eAAGiB,QAAH,CAAYP,GAAZ,GAAkBX,KAAKO,OAAvB;;AAEAQ,gBAAII,kBAAJ,GAAyB,YAAY;AACjC,oBAAIJ,IAAIK,UAAJ,KAAmB,CAAvB,EAA0B;AACtB,wBAAGL,IAAIM,MAAJ,IAAc,GAAd,IAAqBN,IAAIM,MAAJ,GAAa,GAArC,EAAyC;AACrC,4BAAIC,UAAUP,IAAIQ,YAAlB;AACA,4BAAGX,OAAH,EAAW;AACPA,oCAAQU,OAAR,EAAkBR,MAAlB;AACH;AACJ,qBALD,MAKK;AACD,4BAAGD,KAAH,EAAS;AACLA,kCAAMC,MAAN;AACH;AACJ;AACJ;AACJ,aAbD;AAcAC,gBAAIS,IAAJ,CAAS,KAAT,EAAgBxB,KAAKO,OAAL,GAAaI,GAA7B,EAAkC,IAAlC;AACA,gBAAGX,KAAKS,aAAL,IAAsB,IAAzB,EAA8B;AAC1BM,oBAAIU,gBAAJ,CAAqB,eAArB,EAAsCzB,KAAKS,aAA3C;AACH;AACD,gBAAIR,GAAGyB,GAAH,CAAOC,QAAX,EAAqB;AACjBZ,oBAAIU,gBAAJ,CAAqB,iBAArB,EAAwC,cAAxC;AACH;AACDV,gBAAIa,OAAJ,GAAc,IAAd,CAzBmD,CAyBhC;;AAEnBb,gBAAIc,IAAJ;AACC,SA5CI;AA6CLC,wBAAiB,wBAASC,IAAT,EACjB;AACI,gBAAIC,QAAQ,EAAZ;AACA,gBAAIC,SAAS,MAAb;;AAEA,iBAAK,IAAIC,IAAT,IAAiBH,IAAjB,EAAsB;AAClB,oBAAII,QAAQJ,KAAKG,IAAL,EAAWE,QAAX,EAAZ;AACA,oBAAIC,OAAOC,mBAAmBJ,IAAnB,EAAyBK,OAAzB,CAAiCN,MAAjC,EAAyC,GAAzC,IAAgD,GAAhD,GACPK,mBAAmBH,KAAnB,EAA0BI,OAA1B,CAAkCN,MAAlC,EAA0C,GAA1C,CADJ;AAEAD,sBAAMQ,IAAN,CAAWH,IAAX;AACH;AACD,mBAAOL,MAAMS,IAAN,CAAW,GAAX,CAAP;AACH,SAzDI;AA0DLC,kBAAU,kBAAU/B,GAAV,EAAegC,MAAf,EAAuB/B,OAAvB,EAAiCC,KAAjC,EAAyCC,MAAzC,EAAiD;AACvD,gBAAIC,MAAMd,GAAGe,MAAH,CAAUC,iBAAV,EAAV;;AAEAF,gBAAII,kBAAJ,GAAyB,YAAY;AACjC,oBAAIJ,IAAIK,UAAJ,KAAmB,CAAvB,EAA0B;AACtB,wBAAGL,IAAIM,MAAJ,IAAc,GAAd,IAAqBN,IAAIM,MAAJ,GAAa,GAArC,EAAyC;AACrC,4BAAIC,UAAUP,IAAIQ,YAAlB;AACA,4BAAGX,OAAH,EAAW;AACPA,oCAAQU,OAAR,EAAkBR,MAAlB;AACH;AACJ,qBALD,MAKK;AACD,4BAAGD,KAAH,EAAS;AACLA,kCAAMC,MAAN;AACH;AACJ;AACJ;AACJ,aAbD;AAcAC,gBAAIS,IAAJ,CAAS,MAAT,EAAiBxB,KAAKO,OAAL,GAAaI,GAA9B,EAAmC,IAAnC;AACA,gBAAGX,KAAKS,aAAL,KAAuB,IAA1B,EAA+B;AAC3BM,oBAAIU,gBAAJ,CAAqB,eAArB,EAAsCzB,KAAKS,aAA3C;AACH;AACD,gBAAIR,GAAGyB,GAAH,CAAOC,QAAX,EAAqB;AACjBZ,oBAAIU,gBAAJ,CAAqB,iBAArB,EAAwC,cAAxC;AACH;AACDV,gBAAIU,gBAAJ,CAAqB,cAArB,EAAoC,mCAApC;AACAV,gBAAIa,OAAJ,GAAc,IAAd,CAzBuD,CAyBpC;AACnBb,gBAAIc,IAAJ,CAAU7B,KAAK8B,cAAL,CAAoBa,MAApB,CAAV;AACH;AArFI,KALO;;AA6FhB;AACAC,YAAQ,kBAAY,CACnB;;AA/Fe,CAAT,CAAX","file":"HTTP.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\resources\\script\\lib","sourcesContent":["var HTTP = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    },\r\n    statics: {\r\n        //127.0.0.1:8188 192.168.0.101\r\n        // 测试\r\n        baseURL:\"http://game.daily.bizpartner.cn\",\r\n        wsURL : \"http://game.daily.bizpartner.cn:9081\",\r\n        \r\n        // 正式\r\n        // baseURL:\"http://game.bizpartner.cn\",\r\n        // wsURL : \"http://game.bizpartner.cn:9081\",\r\n\r\n      /*  // 于浩\r\n        baseURL:\"http://192.168.123.222:8081\",\r\n        wsURL : \"http://192.168.123.222:9081\",*/\r\n\r\n        \r\n        authorization: null,\r\n        httpGet: function (url , success , error , object) {\r\n        var xhr = cc.loader.getXMLHttpRequest();\r\n        cc.weijifen.url = HTTP.baseURL;\r\n        \r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState === 4) {\r\n                if(xhr.status >= 200 && xhr.status < 300){\r\n                    var respone = xhr.responseText;\r\n                    if(success){\r\n                        success(respone , object);\r\n                    }\r\n                }else{\r\n                    if(error){\r\n                        error(object);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        xhr.open(\"GET\", HTTP.baseURL+url, true);\r\n        if(HTTP.authorization != null){\r\n            xhr.setRequestHeader(\"authorization\", HTTP.authorization) ;\r\n        }\r\n        if (cc.sys.isNative) {\r\n            xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");\r\n        }\r\n        xhr.timeout = 3000;// 5 seconds for timeout\r\n\r\n        xhr.send();\r\n        },\r\n        encodeFormData : function(data)  \r\n        {  \r\n            var pairs = [];  \r\n            var regexp = /%20/g;  \r\n          \r\n            for (var name in data){  \r\n                var value = data[name].toString();  \r\n                var pair = encodeURIComponent(name).replace(regexp, \"+\") + \"=\" +  \r\n                    encodeURIComponent(value).replace(regexp, \"+\");  \r\n                pairs.push(pair);  \r\n            }  \r\n            return pairs.join(\"&\");  \r\n        },\r\n        httpPost: function (url, params, success , error , object) {\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4) {\r\n                    if(xhr.status >= 200 && xhr.status < 300){\r\n                        var respone = xhr.responseText;\r\n                        if(success){\r\n                            success(respone , object);\r\n                        }\r\n                    }else{\r\n                        if(error){\r\n                            error(object);\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            xhr.open(\"POST\", HTTP.baseURL+url, true);\r\n            if(HTTP.authorization !== null){\r\n                xhr.setRequestHeader(\"authorization\", HTTP.authorization) ;\r\n            }\r\n            if (cc.sys.isNative) {\r\n                xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");\r\n            }\r\n            xhr.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\r\n            xhr.timeout = 5000;// 5 seconds for timeout\r\n            xhr.send( HTTP.encodeFormData(params));\r\n        }\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n    },\r\n\r\n    \r\n});"]}