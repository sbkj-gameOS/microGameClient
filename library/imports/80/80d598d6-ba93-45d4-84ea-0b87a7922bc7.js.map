{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js\\gameStartInit/assets\\module\\majiang\\js\\gameStartInit\\MaJiangPlayer.js"],"names":["cc","Class","extends","Component","properties","target","Node","dong","nan","xi","bei","headimg","on_off_line","username","default","type","Label","goldcoins","selected","creator","selectcards","selectcolor","onLoad","active","init","playerdata","inx","tablepos","count","data","online","color","Color","headimgurl","imgurl","sprite","getComponent","Sprite","head","loader","load","url","suc","texture","spriteFrame","SpriteFrame","width","height","string","banker","selecting","id","beimi","user","ani","Animation","animState","play","wrapMode","WrapMode","Loop","repeatCount","selectresult","i","children","length","name","stop","winds","wind","nowind","windss","num"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAQL,GAAGM,IADH;AAERC,cAAKP,GAAGM,IAFA;AAGRE,aAAIR,GAAGM,IAHC;AAIRG,YAAGT,GAAGM,IAJE;AAKRI,aAAIV,GAAGM,IALC;AAMRK,iBAAQX,GAAGM,IANH;AAORM,qBAAYZ,GAAGM,IAPP;AAQRO,kBAAS;AACLC,qBAAQ,IADH;AAELC,kBAAKf,GAAGgB;AAFH,SARD;AAYRC,mBAAU;AACNH,qBAAQ,IADF;AAENC,kBAAKf,GAAGgB;AAFF,SAZF;AAgBRE,kBAAS;AACLJ,qBAAQ,IADH;AAELC,kBAAOf,GAAGM;AAFL,SAhBD;AAoBRa,iBAAQ;AACJL,qBAAQ,IADJ;AAEJC,kBAAOf,GAAGM;AAFN,SApBA;AAwBRc,qBAAY;AACRN,qBAAQ,IADA;AAERC,kBAAOf,GAAGM;AAFF,SAxBJ;AA4BRe,qBAAY;AACRP,qBAAQ,IADA;AAERC,kBAAOf,GAAGM;AAFF;AA5BJ,KAHP;;AAqCL;AACAgB,YAAQ,kBAAY;AAChB;AACA;AACA,aAAKH,OAAL,CAAaI,MAAb,GAAsB,KAAtB;AAEH,KA3CI;AA4CLC,UAAK,cAASC,UAAT,EAAsBC,GAAtB,EAA4BC,QAA5B,EAAqCC,KAArC,EAA2C;AAC5C,aAAKT,OAAL,CAAaI,MAAb,GAAsB,KAAtB;AACA,aAAKM,IAAL,GAAYJ,UAAZ,CAF4C,CAEhB;AAC5B,aAAKE,QAAL,GAAgBA,QAAhB;AACA,aAAKC,KAAL,GAAaA,KAAb;AACA,YAAG,CAACH,WAAWK,MAAf,EAAsB;AAClB,iBAAKlB,WAAL,CAAiBW,MAAjB,GAA0B,IAA1B;AACA,iBAAKZ,OAAL,CAAaoB,KAAb,GAAqB,IAAI/B,GAAGgC,KAAP,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,CAArB;AACH,SAHD,MAGK,CAGJ;AAFG;AACA;;AAEJ;AACA;AACA;AACA;AACA;AACA,YAAGP,WAAWQ,UAAd,EAAyB;AACrB,gBAAIC,SAAST,WAAWQ,UAAxB;AACA,gBAAIE,SAAS,KAAKxB,OAAL,CAAayB,YAAb,CAA0BpC,GAAGqC,MAA7B,CAAb;AACA,gBAAIC,OAAO,KAAK3B,OAAhB;AACAX,eAAGuC,MAAH,CAAUC,IAAV,CAAe,EAACC,KAAIP,MAAL,EAAYnB,MAAK,KAAjB,EAAf,EAAuC,UAAS2B,GAAT,EAAaC,OAAb,EAAqB;AACxDR,uBAAOS,WAAP,GAAqB,IAAI5C,GAAG6C,WAAP,CAAmBF,OAAnB,CAArB;AACAL,qBAAKQ,KAAL,GAAa,EAAb;AACAR,qBAAKS,MAAL,GAAc,EAAd;AACH,aAJD;AAKH;AACD,aAAKlC,QAAL,CAAcmC,MAAd,GAAuBvB,WAAWZ,QAAlC;AACA,aAAKI,SAAL,CAAe+B,MAAf,GAAwBvB,WAAWR,SAAnC;AAEH,KA1EI;AA2ELgC,YAAO,kBAAU;AACb,aAAK9B,OAAL,CAAaI,MAAb,GAAsB,IAAtB;AACH,KA7EI;AA8EL2B,eAAU,qBAAU;AAChB,YAAG,KAAKrB,IAAL,CAAUsB,EAAV,IAAgBnD,GAAGoD,KAAH,CAASC,IAAT,CAAcF,EAAjC,EAAoC;AAChC,iBAAK/B,WAAL,CAAiBG,MAAjB,GAA0B,IAA1B;AACA,gBAAI+B,MAAM,KAAKjC,WAAL,CAAiBe,YAAjB,CAA8BpC,GAAGuD,SAAjC,CAAV;AACA,iBAAKC,SAAL,GAAiBF,IAAIG,IAAJ,CAAS,gBAAT,CAAjB;AACA;AACA,iBAAKD,SAAL,CAAeE,QAAf,GAA0B1D,GAAG2D,QAAH,CAAYC,IAAtC;AACA,iBAAKJ,SAAL,CAAeK,WAAf,GAA6B,EAA7B,CANgC,CAMC;AACpC;AACJ,KAvFI;AAwFLC,kBAAa,sBAASjC,IAAT,EAAc;AACvB,aAAI,IAAIkC,IAAI,CAAZ,EAAgBA,IAAI,KAAK7C,QAAL,CAAc8C,QAAd,CAAuBC,MAA3C,EAAoDF,GAApD,EAAwD;AACpD,iBAAK7C,QAAL,CAAc8C,QAAd,CAAuBD,CAAvB,EAA0BxC,MAA1B,GAAmC,KAAnC;AACA,gBAAG,KAAKL,QAAL,CAAc8C,QAAd,CAAuBD,CAAvB,EAA0BG,IAA1B,IAAkCrC,KAAKE,KAA1C,EAAgD;AAC5C,qBAAKb,QAAL,CAAc8C,QAAd,CAAuBD,CAAvB,EAA0BxC,MAA1B,GAAmC,IAAnC;AACH;AACJ;AACD,aAAKL,QAAL,CAAcK,MAAd,GAAuB,IAAvB;AACA,YAAG,KAAKM,IAAL,CAAUsB,EAAV,IAAgBnD,GAAGoD,KAAH,CAASC,IAAT,CAAcF,EAAjC,EAAqC;AACjC,gBAAI,KAAKK,SAAL,IAAkB,IAAtB,EAA4B;AACxB,qBAAKA,SAAL,CAAeW,IAAf,CAAoB,gBAApB;AACH;AACJ;AACJ,KArGI;AAsGLC,WAAM,eAASC,IAAT,EAAc;AAChB,aAAK9D,IAAL,CAAUgB,MAAV,GAAmB,KAAnB;AACA,aAAKf,GAAL,CAASe,MAAT,GAAkB,KAAlB;AACA,aAAKd,EAAL,CAAQc,MAAR,GAAiB,KAAjB;AACA,aAAKb,GAAL,CAASa,MAAT,GAAkB,KAAlB;AACA,aAAK8C,IAAL,EAAW9C,MAAX,GAAoB,IAApB;AACA,aAAK8C,IAAL,GAAYA,IAAZ;AACH,KA7GI;AA8GLC,YAAQ,kBAAU;AACd,aAAK,KAAKD,IAAV,EAAgB9C,MAAhB,GAAyB,KAAzB;AACH,KAhHI;AAiHLgD,YAAQ,gBAASC,GAAT,EAAa;AACjB,YAAGA,OAAO,CAAV,EAAY;AACR,iBAAKJ,KAAL,CAAW,MAAX;AACH,SAFD,MAEM,IAAGI,OAAO,CAAV,EAAY;AACd,iBAAKJ,KAAL,CAAW,KAAX;AACH,SAFK,MAEA,IAAGI,OAAO,CAAV,EAAY;AACd,iBAAKJ,KAAL,CAAW,IAAX;AACH,SAFK,MAEA,IAAGI,OAAO,CAAV,EAAY;AACd,iBAAKJ,KAAL,CAAW,KAAX;AACH;AACJ;AACD;AACA;;AAEA;AA/HK,CAAT","file":"MaJiangPlayer.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js\\gameStartInit","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        target: cc.Node,\r\n        dong:cc.Node,\r\n        nan:cc.Node,\r\n        xi:cc.Node,\r\n        bei:cc.Node,\r\n        headimg:cc.Node,\r\n        on_off_line:cc.Node,\r\n        username:{\r\n            default:null ,\r\n            type:cc.Label\r\n        },\r\n        goldcoins:{\r\n            default:null ,\r\n            type:cc.Label\r\n        },\r\n        selected:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        creator:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        selectcards:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        selectcolor:{\r\n            default:null ,\r\n            type : cc.Node\r\n        }\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        // this.on_off_line.active = false;\r\n        // this.selected.active = false ;\r\n        this.creator.active = false ;\r\n        \r\n    },\r\n    init:function(playerdata , inx , tablepos,count){\r\n        this.creator.active = false ;\r\n        this.data = playerdata ;    //存放玩家数据\r\n        this.tablepos = tablepos ;\r\n        this.count = count;\r\n        if(!playerdata.online){\r\n            this.on_off_line.active = true;\r\n            this.headimg.color = new cc.Color(42, 25, 25);\r\n        }else{\r\n            // this.on_off_line.active = false;//是否离线\r\n            // this.headimg.color = new cc.Color(255, 255, 255);\r\n        }\r\n        // if(inx == 0){\r\n        //     this.selectcards.parent.x = this.selectcards.parent.x * -1 ;\r\n        // }else if(inx == 1){\r\n        //     this.selectcards.parent.x = this.selectcards.parent.x * -1 ;\r\n        // }\r\n        if(playerdata.headimgurl){\r\n            var imgurl = playerdata.headimgurl;\r\n            var sprite = this.headimg.getComponent(cc.Sprite);\r\n            var head = this.headimg;\r\n            cc.loader.load({url:imgurl,type:'jpg'},function(suc,texture){\r\n                sprite.spriteFrame = new cc.SpriteFrame(texture);\r\n                head.width = 75;\r\n                head.height = 75;\r\n            });\r\n        }\r\n        this.username.string = playerdata.username ;\r\n        this.goldcoins.string = playerdata.goldcoins ;\r\n        \r\n    },\r\n    banker:function(){\r\n        this.creator.active = true;\r\n    },\r\n    selecting:function(){\r\n        if(this.data.id != cc.beimi.user.id){\r\n            this.selectcards.active = true ;\r\n            let ani = this.selectcolor.getComponent(cc.Animation);\r\n            this.animState = ani.play(\"majiang_select\") ;\r\n            // 设置循环模式为 Loop\r\n            this.animState.wrapMode = cc.WrapMode.Loop;\r\n            this.animState.repeatCount = 20; //最大不超过 20次\r\n        }\r\n    },\r\n    selectresult:function(data){\r\n        for(var i = 0 ; i < this.selected.children.length ; i++){\r\n            this.selected.children[i].active = false ;\r\n            if(this.selected.children[i].name == data.color){\r\n                this.selected.children[i].active = true;\r\n            }\r\n        }\r\n        this.selected.active = true ;\r\n        if(this.data.id != cc.beimi.user.id) {\r\n            if (this.animState != null) {\r\n                this.animState.stop(\"majiang_select\");\r\n            }\r\n        }\r\n    },\r\n    winds:function(wind){\r\n        this.dong.active = false;\r\n        this.nan.active = false ; \r\n        this.xi.active = false ;\r\n        this.bei.active = false ;\r\n        this[wind].active = true;\r\n        this.wind = wind;\r\n    },\r\n    nowind: function(){\r\n        this[this.wind].active = false;\r\n    },\r\n    windss: function(num){\r\n        if(num == 0){\r\n            this.winds('dong');\r\n        }else if(num == 1){\r\n            this.winds('nan');\r\n        }else if(num == 2){\r\n            this.winds('xi');\r\n        }else if(num == 3){\r\n            this.winds('bei');\r\n        }\r\n    }\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}