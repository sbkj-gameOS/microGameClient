{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js\\gamePlay/assets\\module\\majiang\\js\\gamePlay\\GamePlay.js"],"names":["cc","Class","extends","Component","properties","onLoad","statics","lasthands_event","data","context","find","getComponent","userid","weijifen","user","id","exchange_state","exchange_searchlight","sys","localStorage","getItem","setItem","inx","playersarray","length","temp","tablepos","takecard_event","gameStartInit","require","gameStartInitNode","gamePlay","removeItem","qujuju","kongcard","playerss","player","ting","active","tingting","setTimeout","tingnoaction","father","selectfather","children","splice","initcardwidth","notSend","allow","playercards","i","handcards","reinit","card","value","zIndex","parent","cardpool","put","desk_card","instantiate","takecards_one","init","deskcards","push","deskcards_current_panel","selectcolor","cardpanel","cardprefab","deskcardpanel","right_panel","right_temp","takecards_right","deskcards_right_panel","desk_script","left_panel","left_temp","takecards_left","deskcards_left_panel","top_panel","top_temp","deskcards_top_panel","destroy","dealcard_event","dealcards","closeloadding","playerNum","peoNum","select_action_searchlight","bu","buhua","decode","buhuaModle","initDealHandCards","action123","shouOperationMune","initPlayerHandCards","desk_cards","string","power","powerCard","baopai","laiziZM","ZM","godcard","LZH","laiziFM","FM","get","temp_script","lastone","cards_panel","opParent","jujufei","e","console","log"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,UAASF,GAAGG,SADP;;AAGLC,aAAY,EAHP;;AAOL;AACAC,SAAQ,kBAAY,CAEnB,CAVI;AAWLC,UAAS;AACRC,mBAAgB,yBAASC,IAAT,EAAeC,OAAf,EAAuB;AACnCA,aAAUT,GAAGU,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,YAA/B,CAAV;AACA,OAAGH,KAAKI,MAAL,IAAeZ,GAAGa,QAAH,CAAYC,IAAZ,CAAiBC,EAAnC,EAAsC;AAAK;AACvCN,YAAQO,cAAR,CAAuB,WAAvB,EAAqCP,OAArC;AACAA,YAAQQ,oBAAR,CAA6B,SAA7B,EAAuCR,OAAvC;AACA,QAAGT,GAAGkB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,KAAuC,MAA1C,EAAiD;AAC7CpB,QAAGkB,GAAH,CAAOC,YAAP,CAAoBE,OAApB,CAA4B,MAA5B,EAAmC,MAAnC;AACH;AACJ,IAND,MAMK;AACDZ,YAAQO,cAAR,CAAuB,aAAvB,EAAuCP,OAAvC,EADC,CACmD;AACpD,SAAI,IAAIa,MAAM,CAAd,EAAkBA,MAAIb,QAAQc,YAAR,CAAqBC,MAA3C,EAAoDF,KAApD,EAA0D;AACtD,SAAIG,OAAOhB,QAAQc,YAAR,CAAqBD,GAArB,EAA0BX,YAA1B,CAAuC,eAAvC,CAAX;AACA,SAAGc,KAAKjB,IAAL,CAAUO,EAAV,IAAgBP,KAAKI,MAAxB,EAA+B;AAC3BH,cAAQQ,oBAAR,CAA6BQ,KAAKC,QAAlC,EAA2CjB,OAA3C,EAAoD,CAAE;AACzD;AACJ;AACJ;AACJ,GAlBO;;AAoBR;;;;;AAKA;AACAkB,kBAAe,wBAASnB,IAAT,EAAgBC,OAAhB,EAAwB;;AAEnCA,aAAUT,GAAGU,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,YAA/B,CAAV;AACA,OAAIiB,gBAAgBC,QAAQ,eAAR,CAApB;AACA,OAAIC,oBAAoB9B,GAAGU,IAAH,CAAQ,yBAAR,EAAmCC,YAAnC,CAAgD,eAAhD,CAAxB;AACA,OAAIoB,WAAWF,QAAQ,UAAR,CAAf;AACA7B,MAAGkB,GAAH,CAAOC,YAAP,CAAoBa,UAApB,CAA+B,IAA/B;AACAD,YAASE,MAAT,CAAgBzB,IAAhB;AACA,OAAI0B,iBAAJ;AACA;AACA,OAAIC,WAAWP,cAAcQ,MAAd,CAAqB5B,KAAKI,MAA1B,EAAmCH,OAAnC,CAAf;AACA,OAAGD,KAAK6B,IAAR,EAAa;AACT,QAAG5B,QAAQ0B,SAAST,QAAT,GAAkB,MAA1B,EAAkCY,MAAlC,IAA2C,KAA9C,EAAoD;AAChD7B,aAAQ8B,QAAR,CAAiBD,MAAjB,GAA0B,IAA1B;AACAE,gBAAW,YAAU;AAAC/B,cAAQ8B,QAAR,CAAiBD,MAAjB,GAA0B,KAA1B;AAAkC,MAAxD,EAAyD,IAAzD;AACA7B,aAAQ0B,SAAST,QAAT,GAAkB,MAA1B,EAAkCY,MAAlC,GAA2C,IAA3C;AACH;AACJ;AACD,OAAG9B,KAAKI,MAAL,IAAeZ,GAAGa,QAAH,CAAYC,IAAZ,CAAiBC,EAAnC,EAAuC;AACnC,QAAG,CAACP,KAAK6B,IAAT,EAAc;AACXT,mBAAca,YAAd;AACN;;AAED,QAAIC,SAAS1C,GAAGU,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,YAA/B,EAA6CgC,YAA1D;AACA,QAAGD,OAAOJ,MAAP,IAAiB,IAApB,EAAyB;AACrBI,YAAOJ,MAAP,GAAe,KAAf;AACAI,YAAOE,QAAP,CAAgB,CAAhB,EAAmBA,QAAnB,CAA4B,CAA5B,EAA+BA,QAA/B,CAAwCC,MAAxC,CAA+C,CAA/C,EAAiDH,OAAOE,QAAP,CAAgB,CAAhB,EAAmBA,QAAnB,CAA4B,CAA5B,EAA+BA,QAA/B,CAAwCpB,MAAzF;AACH;;AAGGI,kBAAckB,aAAd;;AAEA,QAAGtC,KAAK6B,IAAR,EAAa;AACTrC,QAAGkB,GAAH,CAAOC,YAAP,CAAoBE,OAApB,CAA4B,QAA5B,EAAqC,MAArC;AACArB,QAAGkB,GAAH,CAAOC,YAAP,CAAoBE,OAApB,CAA4B,SAA5B,EAAsC,MAAtC;AACArB,QAAGkB,GAAH,CAAOC,YAAP,CAAoBE,OAApB,CAA4B,MAA5B,EAAmC,MAAnC;AAEH,KALD,MAKK;AACDrB,QAAGkB,GAAH,CAAOC,YAAP,CAAoBa,UAApB,CAA+B,QAA/B;AACH;AACD,QAAGxB,KAAKuC,OAAL,IAAe/C,GAAGkB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,KAAuC,MAAvC,IAA+C,CAACZ,KAAKwC,KAAvE,EAA8E;AAC1E;AACH;AACDhD,OAAGkB,GAAH,CAAOC,YAAP,CAAoBa,UAApB,CAA+B,QAA/B;AACAhC,OAAGkB,GAAH,CAAOC,YAAP,CAAoBa,UAApB,CAA+B,MAA/B;AACA,SAAK,IAAIV,MAAM,CAAf,EAAkBA,MAAMb,QAAQwC,WAAR,CAAoBzB,MAA5C,EAAmD0B,GAAnD,EAAyD;AACrD,SAAIC,YAAY1C,QAAQwC,WAAR,CAAoB3B,GAApB,EAAyBX,YAAzB,CAAsC,WAAtC,CAAhB;AACAwC,eAAUC,MAAV;AACA,SAAI5C,KAAK6C,IAAL,IAAaF,UAAUG,KAA3B,EAAkC;AAC9B7C,cAAQwC,WAAR,CAAoB3B,GAApB,EAAyBiC,MAAzB,GAAkC,CAAlC;AACA;;;AAGA9C,cAAQwC,WAAR,CAAoB3B,GAApB,EAAyBkC,MAAzB,GAAkC,IAAlC;;AAEAL,gBAAUC,MAAV;AACA;;;AAGA3C,cAAQgD,QAAR,CAAiBC,GAAjB,CAAqBjD,QAAQwC,WAAR,CAAoB3B,GAApB,CAArB;AACA;;;AAGAb,cAAQwC,WAAR,CAAoBJ,MAApB,CAA2BvB,GAA3B,EAAgC,CAAhC;AACA;;;AAGA,UAAIqC,YAAY3D,GAAG4D,WAAH,CAAe9B,kBAAkB+B,aAAjC,CAAhB;AACA,UAAIpC,OAAOkC,UAAUhD,YAAV,CAAuB,WAAvB,CAAX;AACAc,WAAKqC,IAAL,CAAUX,UAAUG,KAApB,EAA0B,GAA1B;;AAEA7C,cAAQsD,SAAR,CAAkBC,IAAlB,CAAuBL,SAAvB;AACAA,gBAAUH,MAAV,GAAmB/C,QAAQwD,uBAA3B;AAEH,MA1BD,MA0BK;AACDd,gBAAUC,MAAV;AACA,UAAGD,UAAUe,WAAV,IAAyB,IAA5B,EAAiC;AAC7BzD,eAAQwC,WAAR,CAAoB3B,GAApB,EAAyBiC,MAAzB,GAAkC,OAAOJ,UAAUG,KAAnD;AACH,OAFD,MAEK;AACD,WAAGH,UAAUG,KAAV,IAAmB,CAAtB,EAAwB;AACpB7C,gBAAQwC,WAAR,CAAoB3B,GAApB,EAAyBiC,MAAzB,GAAkCJ,UAAUG,KAA5C;AACH,QAFD,MAEK;AACD7C,gBAAQwC,WAAR,CAAoB3B,GAApB,EAAyBiC,MAAzB,GAAkC,MAAMJ,UAAUG,KAAlD;AACH;;AAED,WAAG7C,QAAQwC,WAAR,CAAoB3B,GAApB,EAAyBsB,QAAzB,CAAkC,CAAlC,EAAqCN,MAAxC,EAA+C;AAC3C7B,gBAAQwC,WAAR,CAAoB3B,GAApB,EAAyBiC,MAAzB,GAAkC,CAAC,CAAnC;AACH;AACJ;AACDjC,YAAMA,MAAM,CAAZ,CAfC,CAemB;AACvB;AACJ;AACDb,YAAQO,cAAR,CAAuB,UAAvB,EAAoCP,OAApC,EA1EmC,CA0EY;AAClD,IA3ED,MA2EK;AACD;AACA,QAAIgB,QAAOG,cAAcQ,MAAd,CAAqB5B,KAAKI,MAA1B,EAAmCH,OAAnC,CAAX;AACA,QAAI0D,kBAAJ;AAAA,QAAiBC,mBAAjB;AAAA,QAA8BC,sBAA9B;AACA,QAAG,CAAC7D,KAAKuC,OAAT,EAAiB;AACjB,SAAGtB,MAAKC,QAAL,IAAiB,OAApB,EAA4B;AACxB,WAAI,IAAIJ,MAAM,CAAd,EAAkBA,MAAMQ,kBAAkBwC,WAAlB,CAA8B1B,QAA9B,CAAuCpB,MAA/D,EAAwEF,KAAxE,EAA8E;AAC1E,WAAIiD,aAAazC,kBAAkBwC,WAAlB,CAA8B1B,QAA9B,CAAuCtB,GAAvC,EAA4CX,YAA5C,CAAyD,WAAzD,CAAjB;AACA4D,kBAAWnB,MAAX;AACH;AACDe,kBAAYrC,kBAAkBwC,WAA9B;AACAF,mBAAatC,kBAAkB0C,eAA/B;AACAH,sBAAgB5D,QAAQgE,qBAAxB;;AAEA,UAAId,aAAY3D,GAAG4D,WAAH,CAAeQ,UAAf,CAAhB;AACA,UAAIM,cAAcf,WAAUhD,YAAV,CAAuB,WAAvB,CAAlB;AACA+D,kBAAYZ,IAAZ,CAAiBtD,KAAK6C,IAAtB,EAA2B,GAA3B;AACAM,iBAAUH,MAAV,GAAmBa,aAAnB;AAEH,MAdD,MAcM,IAAG5C,MAAKC,QAAL,IAAiB,MAApB,EAA2B;AAC7B,WAAI,IAAIJ,MAAM,CAAd,EAAkBA,MAAMQ,kBAAkB6C,UAAlB,CAA6B/B,QAA7B,CAAsCpB,MAA9D,EAAuEF,KAAvE,EAA6E;AACzE,WAAIsD,YAAY9C,kBAAkB6C,UAAlB,CAA6B/B,QAA7B,CAAsCtB,GAAtC,EAA2CX,YAA3C,CAAwD,WAAxD,CAAhB;AACAiE,iBAAUxB,MAAV;AACH;AACDe,kBAAYrC,kBAAkB6C,UAA9B;AACAP,mBAAatC,kBAAkB+C,cAA/B;AACAR,sBAAgB5D,QAAQqE,oBAAxB;;AAEA,UAAInB,cAAY3D,GAAG4D,WAAH,CAAeQ,UAAf,CAAhB;AACA,UAAIM,eAAcf,YAAUhD,YAAV,CAAuB,WAAvB,CAAlB;AACA+D,mBAAYZ,IAAZ,CAAiBtD,KAAK6C,IAAtB,EAA2B,GAA3B;AACAM,kBAAUH,MAAV,GAAmBa,aAAnB;AACH,MAbK,MAaA,IAAG5C,MAAKC,QAAL,IAAiB,KAApB,EAA0B;AAC5B,WAAI,IAAIJ,MAAM,CAAd,EAAkBA,MAAMQ,kBAAkBiD,SAAlB,CAA4BnC,QAA5B,CAAqCpB,MAA7D,EAAsEF,KAAtE,EAA4E;AACxE,WAAI0D,WAAWlD,kBAAkBiD,SAAlB,CAA4BnC,QAA5B,CAAqCtB,GAArC,EAA0CX,YAA1C,CAAuD,WAAvD,CAAf;AACAqE,gBAAS5B,MAAT;AACH;AACDe,kBAAYrC,kBAAkBiD,SAA9B;AACAX,mBAAatC,kBAAkB+B,aAA/B;AACAQ,sBAAgB5D,QAAQwE,mBAAxB;;AAEA,UAAItB,cAAY3D,GAAG4D,WAAH,CAAeQ,UAAf,CAAhB;AACA,UAAIM,gBAAcf,YAAUhD,YAAV,CAAuB,WAAvB,CAAlB;AACA+D,oBAAYZ,IAAZ,CAAiBtD,KAAK6C,IAAtB,EAA2B,GAA3B;AACAM,kBAAUH,MAAV,GAAmBa,aAAnB;AACH;AACD;;;;AAIIF,eAAUvB,QAAV,CAAmBuB,UAAUvB,QAAV,CAAmBpB,MAAnB,GAA4B,CAA/C,EAAkD0D,OAAlD;AACH;AACJ;AACJ,GA5KO;AA6KR;;;;;AAKAC,kBAAe,wBAAS3E,IAAT,EAAgBC,OAAhB,EAAwB;AACpC,OAAIsB,WAAWF,QAAQ,UAAR,CAAf;AACC,OAAG7B,GAAGkB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,IAA5B,KAAqC,MAArC,IAA6CpB,GAAGkB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,SAA5B,KAA0C,MAA1F,EAAiG;AAC7FoB,eAAW,YAAU;AAACT,cAASqD,SAAT,CAAmB5E,IAAnB,EAAwBC,OAAxB;AAAiC,KAAvD,EAAwD,IAAxD;AAKH,IAND,MAMK;AACDsB,aAASqD,SAAT,CAAmB5E,IAAnB,EAAwBC,OAAxB;AACH;AACJ,GA7LO;AA8LR2E,aAAW,mBAAS5E,IAAT,EAAcC,OAAd,EAAsB;AAC7BT,MAAGkB,GAAH,CAAOC,YAAP,CAAoBa,UAApB,CAA+B,IAA/B;AACA,OAAID,WAAWF,QAAQ,UAAR,CAAf;AACA,OAAID,gBAAgBC,QAAQ,eAAR,CAApB;AACA,OAAIC,oBAAoB9B,GAAGU,IAAH,CAAQ,yBAAR,EAAmCC,YAAnC,CAAgD,eAAhD,CAAxB;AACAF,aAAQT,GAAGU,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,YAA/B,CAAR;AACAF,WAAQ4E,aAAR;AACA,OAAGrF,GAAGa,QAAH,CAAYyE,SAAf,EAAyB;AACrB,QAAIC,SAASvF,GAAGa,QAAH,CAAYyE,SAAzB;AACH;AACD,OAAIlD,SAASR,cAAcQ,MAAd,CAAqB5B,KAAKI,MAA1B,EAAmCH,OAAnC,CAAb;AACAsB,YAASyD,yBAAT,CAAmChF,IAAnC,EAAyCC,OAAzC,EAAmD2B,MAAnD;;AAEA;AACA,OAAG5B,KAAKiF,EAAR,EAAW;AACP,QAAIC,QAAQjF,QAAQkF,MAAR,CAAenF,KAAKiF,EAApB,CAAZ,CADO,CAC6B;AACpC,SAAI,IAAIvC,IAAI,CAAZ,EAAcA,IAAEwC,MAAMlE,MAAtB,EAA6B0B,GAA7B,EAAiC;AAC7BtB,mBAAcgE,UAAd,CAAyBF,MAAMxC,CAAN,CAAzB,EAAkCd,OAAOV,QAAzC,EAAkD,EAAlD,EAAqDU,OAAOV,QAA5D,EAAqEjB,OAArE,EAA6E,EAA7E;AACH;AACJ;;AAED,OAAGD,KAAKI,MAAL,IAAeZ,GAAGa,QAAH,CAAYC,IAAZ,CAAiBC,EAAnC,EAAsC;AAClC,QAAGf,GAAGkB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,SAA5B,KAA0C,MAA7C,EAAoD;AAChDQ,mBAAca,YAAd;AACH;AACD,QAAGzC,GAAGkB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,KAAuC,MAA1C,EAAiD;AAC7CpB,QAAGkB,GAAH,CAAOC,YAAP,CAAoBE,OAApB,CAA4B,MAA5B,EAAmC,MAAnC;AACH,KAFD,MAEK;AACDrB,QAAGkB,GAAH,CAAOC,YAAP,CAAoBa,UAApB,CAA+B,QAA/B;AACH;AACDD,aAAS8D,iBAAT,CAA2BpF,OAA3B,EAAqCD,IAArC;AACA,QAAGC,QAAQqF,SAAR,IAAoB,MAAvB,EAA8B;AAC1BrF,aAAQsF,iBAAR;AACH;AACJ,IAbD,MAaK;AACDtF,YAAQsF,iBAAR;AACA,QAAIzE,MAAM,CAAV;AACA,QAAGc,OAAOV,QAAP,IAAmB,KAAtB,EAA4B;AACxB;AACAJ,WAAM,CAAN;AACH,KAHD,MAGM,IAAGc,OAAOV,QAAP,IAAmB,MAAtB,EAA6B;AAC/BJ,WAAM,CAAN;AACH;AACDM,kBAAcoE,mBAAd,CAAkC,CAAlC,EAAsC,CAAtC,EAA0C1E,GAA1C,EAAgDb,OAAhD,EAA0D,IAA1D,EAA+D8E,MAA/D;AACH;AACDzD,qBAAkBmE,UAAlB,CAA6BC,MAA7B,GAAsC1F,KAAKuD,SAA3C;AACA,OAAGvD,KAAK2F,KAAR,EAAc;AACV,QAAG3F,KAAK4F,SAAL,IAAgB5F,KAAK4F,SAAL,CAAe5E,MAAf,GAAsB,CAAzC,EAA2C;AACvC,UAAI,IAAI0B,KAAE,CAAV,EAAcA,KAAElD,GAAGU,IAAH,CAAQ,sCAAR,EAAgDkC,QAAhD,CAAyDpB,MAAzE,EAAgF0B,IAAhF,EAAoF;AAChFlD,SAAGU,IAAH,CAAQ,sCAAR,EAAgDkC,QAAhD,CAAyDM,EAAzD,EAA4DgC,OAA5D;AACH;AACDlF,QAAGa,QAAH,CAAYwF,MAAZ,GAAqB7F,KAAK4F,SAA1B;AACA,UAAI,IAAIlD,MAAG,CAAX,EAAeA,MAAE1C,KAAK4F,SAAL,CAAe5E,MAAhC,EAAuC0B,KAAvC,EAA2C;AACvC,UAAIoD,UAAUtG,GAAG4D,WAAH,CAAe9B,kBAAkByE,EAAjC,CAAd;AACAD,cAAQ9C,MAAR,GAAiB1B,kBAAkB0E,OAAlB,CAA0B5D,QAA1B,CAAmC,CAAnC,CAAjB;AACA,UAAI6D,MAAOH,QAAQ3F,YAAR,CAAqB,WAArB,CAAX;AACA8F,UAAI3C,IAAJ,CAAStD,KAAK4F,SAAL,CAAelD,GAAf,CAAT,EAA2B,GAA3B,EAA+B,IAA/B;AACA;AACH;AACJ,KAZD,MAYK;AACD,SAAIwD,UAAU1G,GAAG4D,WAAH,CAAe9B,kBAAkB6E,EAAjC,CAAd;AACA,SAAIF,MAAMC,QAAQ/F,YAAR,CAAqB,WAArB,CAAV;AACA;AACA+F,aAAQlD,MAAR,GAAiB1B,kBAAkB0E,OAAlB,CAA0B5D,QAA1B,CAAmC,CAAnC,CAAjB;AACH;AACJ;AACJ,GAhQO;AAiQR4C,6BAA0B,mCAAShF,IAAT,EAAgBC,OAAhB,EAA0B2B,MAA1B,EAAiC;AAC1D3B,aAAQT,GAAGU,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,YAA/B,CAAR;AACGF,WAAQQ,oBAAR,CAA6BmB,OAAOV,QAApC,EAA+CjB,OAA/C;AACAA,WAAQO,cAAR,CAAuB,YAAvB,EAAsCP,OAAtC;AACH,GArQO;AAsQRoF,qBAAkB,2BAASpF,OAAT,EAAmBD,IAAnB,EAAwB;AACzC,OAAIoB,gBAAgBC,QAAQ,eAAR,CAApB;AACApB,aAAQT,GAAGU,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+B,YAA/B,CAAR;AACGiB,iBAAckB,aAAd;AACA,OAAG,IAAH,EAAQ;AACJ,QAAIrB,OAAOhB,QAAQgD,QAAR,CAAiBmD,GAAjB,EAAX;AACA,QAAIC,cAAcpF,KAAKd,YAAL,CAAkB,WAAlB,CAAlB;AACAF,YAAQwC,WAAR,CAAoBe,IAApB,CAAyBvC,IAAzB;AACAoF,gBAAY/C,IAAZ,CAAiBtD,KAAK6C,IAAtB;AACAwD,gBAAYC,OAAZ;AACArF,SAAK8B,MAAL,GAAc,IAAd,CANI,CAMgB;AACpB9B,SAAK+B,MAAL,GAAc/C,QAAQsG,WAAtB,CAPI,CAOiC;AACxC;AACJ,GAnRO;AAoRR9E,UAAQ,gBAASzB,IAAT,EAAc;AACrB,OAAIoB,gBAAgBC,QAAQ,eAAR,CAApB;AACG,OAAIO,SAASR,cAAcQ,MAAd,CAAqB5B,KAAKI,MAA1B,EAAmC,IAAnC,CAAb;AACA,OAAIoG,iBAAJ;AACA,OAAG5E,OAAOV,QAAP,IAAmB,SAAtB,EAAgC;AAC5BsF,eAAWhH,GAAGU,IAAH,CAAQ,0CAAR,CAAX;AACH,IAFD,MAEK;AACDsG,eAAWhH,GAAGU,IAAH,CAAQ,4BAA0B0B,OAAOV,QAAjC,GAA0C,YAAlD,CAAX;AACH;AACD,OAAGsF,SAASpE,QAAT,CAAkBpB,MAAlB,GAAyB,CAA5B,EAA8B;AAC1B,QAAG;AACCwF,cAASpE,QAAT,CAAkBoE,SAASpE,QAAT,CAAkBpB,MAAlB,GAAyB,CAA3C,EAA8CoB,QAA9C,CAAuD,CAAvD,EAA0DjC,YAA1D,CAAuE,WAAvE,EAAoFsG,OAApF;AACH,KAFD,CAEC,OAAMC,CAAN,EAAQ;AACLC,aAAQC,GAAR,CAAY,MAAZ;AACH;AACJ;AACJ;AAEF;;;AAIA;AA1SS,EAXJ,EAAT","file":"GamePlay.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js\\gamePlay","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n    },\r\n    statics: {\r\n    \tlasthands_event:function(data, context){\r\n\t        context = cc.find('Canvas').getComponent('MJDataBind');        \r\n\t        if(data.userid == cc.weijifen.user.id){    //该我出牌 , 庄家出牌，可以不用判断是否庄家了 ，不过，庄家数据已经传过来了\r\n\t            context.exchange_state(\"lasthands\" , context);\r\n\t            context.exchange_searchlight(\"current\",context);\r\n\t            if(cc.sys.localStorage.getItem('altake')!='true'){\r\n\t                cc.sys.localStorage.setItem('take','true');            \r\n\t            }\r\n\t        }else{\r\n\t            context.exchange_state(\"otherplayer\" , context);    //当前玩家出牌，计时器开始计时，探照灯照向该玩家\r\n\t            for(var inx = 0 ; inx<context.playersarray.length ; inx++){\r\n\t                let temp = context.playersarray[inx].getComponent(\"MaJiangPlayer\") ;\r\n\t                if(temp.data.id == data.userid){\r\n\t                    context.exchange_searchlight(temp.tablepos,context);; break ;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    },\r\n\r\n\t    /**\r\n\t     * 新创建牌局，首个玩家加入，进入等待状态，等待其他玩家加入，服务端会推送 players数据\r\n\t     * @param data\r\n\t     * @param context\r\n\t     */\r\n\t    //掉线 和上线\r\n\t    takecard_event:function(data , context){\r\n\r\n\t        context = cc.find('Canvas').getComponent('MJDataBind');\r\n\t        var gameStartInit = require('GameStartInit');\r\n\t        var gameStartInitNode = cc.find('Canvas/js/GameStartInit').getComponent('GameStartInit');\r\n\t        var gamePlay = require('GamePlay');\r\n\t        cc.sys.localStorage.removeItem('cb');          \r\n\t        gamePlay.qujuju(data);\r\n\t        let kongcard ; \r\n\t        // cc.weijifen.audio.playSFX('give.mp3');\r\n\t        let playerss = gameStartInit.player(data.userid , context);\r\n\t        if(data.ting){\r\n\t            if(context[playerss.tablepos+'ting'].active ==false){\r\n\t                context.tingting.active = true ;\r\n\t                setTimeout(function(){context.tingting.active = false ;},2000);\r\n\t                context[playerss.tablepos+'ting'].active = true ; \r\n\t            }\r\n\t        }\r\n\t        if(data.userid == cc.weijifen.user.id) {\r\n\t            if(!data.ting){\r\n\t               gameStartInit.tingnoaction();\r\n\t        }\r\n\t        \r\n\t        let father = cc.find('Canvas').getComponent('MJDataBind').selectfather;\r\n\t        if(father.active == true){\r\n\t            father.active= false;\r\n\t            father.children[0].children[1].children.splice(0,father.children[0].children[1].children.length);\r\n\t        }\r\n\t        \r\n\r\n\t            gameStartInit.initcardwidth();\r\n\t        \r\n\t            if(data.ting){\r\n\t                cc.sys.localStorage.setItem('alting','true'); \r\n\t                cc.sys.localStorage.setItem('altings','true');  \r\n\t                cc.sys.localStorage.setItem('take','true');   \r\n\r\n\t            }else{\r\n\t                cc.sys.localStorage.removeItem('alting');\r\n\t            }\r\n\t            if(data.notSend||(cc.sys.localStorage.getItem('take') != 'true'&&!data.allow)){\r\n\t                return;\r\n\t            }\r\n\t            cc.sys.localStorage.removeItem('altake');\r\n\t            cc.sys.localStorage.removeItem('take');\r\n\t            for (var inx = 0; inx < context.playercards.length;i++ ) {\r\n\t                let handcards = context.playercards[inx].getComponent(\"HandCards\");\r\n\t                handcards.reinit();\r\n\t                if (data.card == handcards.value) {\r\n\t                    context.playercards[inx].zIndex = 0 ;\r\n\t                    /**\r\n\t                     * 从数组中移除\r\n\t                     */\r\n\t                    context.playercards[inx].parent = null;\r\n\r\n\t                    handcards.reinit();\r\n\t                    /**\r\n\t                     * 还回 对象池\r\n\t                     */\r\n\t                    context.cardpool.put(context.playercards[inx]);\r\n\t                    /**\r\n\t                     * 从数组中移除\r\n\t                     */\r\n\t                    context.playercards.splice(inx, 1);\r\n\t                    /**\r\n\t                     * 放到桌面 ， 需要重构\r\n\t                     */\r\n\t                    let desk_card = cc.instantiate(gameStartInitNode.takecards_one);\r\n\t                    let temp = desk_card.getComponent(\"DeskCards\");\r\n\t                    temp.init(handcards.value,'B');\r\n\r\n\t                    context.deskcards.push(desk_card);\r\n\t                    desk_card.parent = context.deskcards_current_panel;\r\n\t                    \r\n\t                }else{\r\n\t                    handcards.reinit();\r\n\t                    if(handcards.selectcolor == true){\r\n\t                        context.playercards[inx].zIndex = 1000 + handcards.value ;\r\n\t                    }else{\r\n\t                        if(handcards.value >= 0){\r\n\t                            context.playercards[inx].zIndex = handcards.value ;\r\n\t                        }else{\r\n\t                            context.playercards[inx].zIndex = 200 + handcards.value ;\r\n\t                        }\r\n\r\n\t                        if(context.playercards[inx].children[1].active){\r\n\t                            context.playercards[inx].zIndex = -1;\r\n\t                        }\r\n\t                    }\r\n\t                    inx = inx + 1 ;     //遍历 ++,不处理移除的 牌\r\n\t                }\r\n\t            }\r\n\t            context.exchange_state(\"takecard\" , context);  //隐藏 提示状态\r\n\t        }else{\r\n\t            //其他玩家出牌   \r\n\t            let temp = gameStartInit.player(data.userid , context) ;\r\n\t            let cardpanel  , cardprefab , deskcardpanel;\r\n\t            if(!data.notSend){\r\n\t            if(temp.tablepos == \"right\"){\r\n\t                for(var inx = 0 ; inx < gameStartInitNode.right_panel.children.length ; inx++){\r\n\t                    let right_temp = gameStartInitNode.right_panel.children[inx].getComponent(\"SpecCards\");\r\n\t                    right_temp.reinit();\r\n\t                }\r\n\t                cardpanel = gameStartInitNode.right_panel ;\r\n\t                cardprefab = gameStartInitNode.takecards_right ;\r\n\t                deskcardpanel = context.deskcards_right_panel ;\r\n\r\n\t                let desk_card = cc.instantiate(cardprefab);\r\n\t                let desk_script = desk_card.getComponent(\"DeskCards\");\r\n\t                desk_script.init(data.card,'R');\r\n\t                desk_card.parent = deskcardpanel ;\r\n\r\n\t            }else if(temp.tablepos == \"left\"){\r\n\t                for(var inx = 0 ; inx < gameStartInitNode.left_panel.children.length ; inx++){\r\n\t                    let left_temp = gameStartInitNode.left_panel.children[inx].getComponent(\"SpecCards\");\r\n\t                    left_temp.reinit();\r\n\t                }\r\n\t                cardpanel = gameStartInitNode.left_panel ;\r\n\t                cardprefab = gameStartInitNode.takecards_left ;\r\n\t                deskcardpanel = context.deskcards_left_panel ;\r\n\r\n\t                let desk_card = cc.instantiate(cardprefab);\r\n\t                let desk_script = desk_card.getComponent(\"DeskCards\");\r\n\t                desk_script.init(data.card,'L');\r\n\t                desk_card.parent = deskcardpanel ;\r\n\t            }else if(temp.tablepos == \"top\"){\r\n\t                for(var inx = 0 ; inx < gameStartInitNode.top_panel.children.length ; inx++){\r\n\t                    let top_temp = gameStartInitNode.top_panel.children[inx].getComponent(\"SpecCards\");\r\n\t                    top_temp.reinit();\r\n\t                }\r\n\t                cardpanel = gameStartInitNode.top_panel ;\r\n\t                cardprefab = gameStartInitNode.takecards_one ;\r\n\t                deskcardpanel = context.deskcards_top_panel ;\r\n\r\n\t                let desk_card = cc.instantiate(cardprefab);\r\n\t                let desk_script = desk_card.getComponent(\"DeskCards\");\r\n\t                desk_script.init(data.card,'B');\r\n\t                desk_card.parent = deskcardpanel ;\r\n\t            }\r\n\t            /**\r\n\t             * 销毁其中一个对象\r\n\t             */\r\n\t            \r\n\t                cardpanel.children[cardpanel.children.length - 1].destroy();                \r\n\t            }\r\n\t        }\r\n\t    },\r\n\t    /**\r\n\t     * 下一个玩家抓牌的事件， 如果上一个玩家出牌后，没有其他玩家杠、碰、吃、胡等动作，则会同时有一个抓牌的事件，否则，会等待玩家 杠、碰、吃、胡完成\r\n\t     * @param data\r\n\t     * @param context\r\n\t     */\r\n\t    dealcard_event:function(data , context){\r\n\t      \tvar gamePlay = require('GamePlay');\r\n\t        if(cc.sys.localStorage.getItem('cb') == 'true'&&cc.sys.localStorage.getItem('altings') != 'true'){\r\n\t            setTimeout(function(){gamePlay.dealcards(data,context)},2100);\r\n\t                  \r\n\r\n\t            \r\n\t            \r\n\t        }else{\r\n\t            gamePlay.dealcards(data,context);\r\n\t        }\r\n\t    },\r\n\t    dealcards: function(data,context){\r\n\t        cc.sys.localStorage.removeItem('cb');  \r\n\t        var gamePlay = require('GamePlay');\r\n\t        var gameStartInit = require('GameStartInit');\r\n\t        var gameStartInitNode = cc.find('Canvas/js/GameStartInit').getComponent('GameStartInit');\r\n\t        context=cc.find('Canvas').getComponent('MJDataBind');\r\n\t        context.closeloadding();\r\n\t        if(cc.weijifen.playerNum){\r\n\t            var peoNum = cc.weijifen.playerNum;\r\n\t        }\r\n\t        let player = gameStartInit.player(data.userid , context);\r\n\t        gamePlay.select_action_searchlight(data, context , player);\r\n\r\n\t        //摸牌补花\r\n\t        if(data.bu){\r\n\t            var buhua = context.decode(data.bu);//补花\r\n\t            for(var i = 0;i<buhua.length;i++){\r\n\t                gameStartInit.buhuaModle(buhua[i],player.tablepos,'',player.tablepos,context,\"\");\r\n\t            }\r\n\t        }\r\n\r\n\t        if(data.userid == cc.weijifen.user.id){\r\n\t            if(cc.sys.localStorage.getItem('altings') != 'true'){\r\n\t                gameStartInit.tingnoaction();\r\n\t            }\r\n\t            if(cc.sys.localStorage.getItem('altake')!='true'){\r\n\t                cc.sys.localStorage.setItem('take','true');\r\n\t            }else{\r\n\t                cc.sys.localStorage.removeItem('altake');                \r\n\t            }\r\n\t            gamePlay.initDealHandCards(context , data);   \r\n\t            if(context.action123 !='deal'){\r\n\t                context.shouOperationMune();                                    \r\n\t            }\r\n\t        }else{\r\n\t            context.shouOperationMune();                    \r\n\t            let inx = 0 ;\r\n\t            if(player.tablepos == \"top\"){\r\n\t                //context.right_panel ;\r\n\t                inx = 1 ;\r\n\t            }else if(player.tablepos == \"left\"){\r\n\t                inx = 2 ;\r\n\t            }\r\n\t            gameStartInit.initPlayerHandCards(0 , 1 , inx , context , true,peoNum);\r\n\t        }\r\n\t        gameStartInitNode.desk_cards.string = data.deskcards ;\r\n\t        if(data.power){\r\n\t            if(data.powerCard&&data.powerCard.length>0){\r\n\t                for(let i=0 ; i<cc.find('Canvas/cards/tesucards/baocard/child').children.length;i++){\r\n\t                    cc.find('Canvas/cards/tesucards/baocard/child').children[i].destroy();\r\n\t                }\r\n\t                cc.weijifen.baopai = data.powerCard;\r\n\t                for(let i= 0 ; i<data.powerCard.length;i++){\r\n\t                    var laiziZM = cc.instantiate(gameStartInitNode.ZM);\r\n\t                    laiziZM.parent = gameStartInitNode.godcard.children[1];\r\n\t                    var LZH  = laiziZM.getComponent('DeskCards');\r\n\t                    LZH.init(data.powerCard[i],'B',true);\r\n\t                    // cc.weijifen.baopai = data.powerCard[i];\r\n\t                }\r\n\t            }else{\r\n\t                var laiziFM = cc.instantiate(gameStartInitNode.FM);\r\n\t                var LZH = laiziFM.getComponent('DeskCards');\r\n\t                //LZH.init(-4);\r\n\t                laiziFM.parent = gameStartInitNode.godcard.children[1];\r\n\t            }\r\n\t        }\r\n\t    },\r\n\t    select_action_searchlight:function(data , context , player){\r\n\t    \tcontext=cc.find('Canvas').getComponent('MJDataBind');\r\n\t        context.exchange_searchlight(player.tablepos , context);\r\n\t        context.exchange_state(\"nextplayer\" , context);\r\n\t    },\r\n\t    initDealHandCards:function(context , data){\r\n\t    \tvar gameStartInit = require('GameStartInit');\r\n\t    \tcontext=cc.find('Canvas').getComponent('MJDataBind');\r\n\t        gameStartInit.initcardwidth();\r\n\t        if(true){\r\n\t            let temp = context.cardpool.get();\r\n\t            let temp_script = temp.getComponent(\"HandCards\") ;\r\n\t            context.playercards.push(temp);\r\n\t            temp_script.init(data.card);\r\n\t            temp_script.lastone();\r\n\t            temp.zIndex = 2000; //直接放到最后了，出牌后，恢复 zIndex\r\n\t            temp.parent = context.cards_panel ;  //庄家的最后一张牌\r\n\t        }   \r\n    \t},\r\n    \tqujuju: function(data){\r\n    \t\tvar gameStartInit = require('GameStartInit');\r\n\t        let player = gameStartInit.player(data.userid , this);\r\n\t        let opParent;\r\n\t        if(player.tablepos == 'current'){\r\n\t            opParent = cc.find(\"Canvas/cards/handcards/current/kongcards\") ;\r\n\t        }else{\r\n\t            opParent = cc.find(\"Canvas/cards/handcards/\"+player.tablepos+\"/kongcards\") ;\r\n\t        }\r\n\t        if(opParent.children.length>1){\r\n\t            try{\r\n\t                opParent.children[opParent.children.length-1].children[1].getComponent('DanAction').jujufei();                  \r\n\t            }catch(e){\r\n\t                console.log('ohuo');\r\n\t            }\r\n\t        }\r\n\t    },\r\n    }\r\n    //出牌\r\n\r\n\r\n\r\n    //摸牌\r\n});\r\n"]}