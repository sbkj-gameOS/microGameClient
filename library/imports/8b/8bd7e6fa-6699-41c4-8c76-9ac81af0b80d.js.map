{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js/assets\\module\\majiang\\js\\MJDataBind.js"],"names":["WJFCommon","require","cc","Class","extends","properties","right_player","Node","left_player","top_player","current_player","playerprefab","default","type","Prefab","cards_current","statebtn","deskcards_current_panel","deskcards_right_panel","deskcards_top_panel","deskcards_left_panel","desk_tip","actionnode_deal","searchlight","setting_coin","right_ready","left_ready","top_ready","current_ready","starttime","Label","roomInfo","mjtimer","selectfather","actionnode_two","dan_childrend","mjUnit","card4","cards_panel","tingSelect","tingSelectch","tingting","currentting","topting","rightting","leftting","onLoad","socket","playerIsReady","init_pool","self","roomInit","gameStartInit","map","joinroom_event","banker_event","players_event","play_event","gamePlay","lasthands_event","takecard_event","dealcard_event","gameEvent","action_event","selectaction_event","settingClick","gameOver","allcards_event","isOver_event","gameOver_event","over_event","unOver_event","on","result","data","getSelf","parse","console","log","command","route","talk_event","node","event","getUserData","emit","JSON","stringify","REFUSE","context","find","getComponent","active","sys","localStorage","getItem","card","target","cardValue","userid","weijifen","user","id","value","card_script","setTimeout","removeItem","action","actionCard","tingAction","stopPropagation","father","children","splice","length","params","sendEvent","name","shouOperationMune","dans","mjOperation","danParam","gangs","gangParam","chis","sortNumber","a","b","sortNum","array","array2","i","sort","push","setItem","initcardwidth","tings","j","cv","cards","button","handCards","parseInt","mjtype","cardvalue","color","Color","Button","interactable","moveTo","x","GameBase","gameModel","playType","sprite","spriteFrame","bkLogoImgLG","bkLogoImgTP","jxLogoImgLG","playersss","browserType","wxButton","room","match","WXorBlow","shareRoom","ggButton","joinRoom","playerNum","width","y","roomNum","getChildByName","_components","string","getCompoCanent","room_num","parent","ready2","readybth","quanNum","maxRound","routes","playersarray","Array","playercards","leftcards","rightcards","topcards","deskcards","right","left","top","wanfa","centertimer","playerspool","NodePool","cardpool","alert","setting","leave","put","instantiate","cardNum","exchange_state","param","token","authorization","playway","orgi","state","object","readybtn","waitting","selectbtn","banker","exchange_searchlight","readyNoActive","canceltimer","bankers","timer","ani","actionnode_three","Animation","play","setAction","init","direction","inx","unscheduleAllCallbacks","times","callback","text","schedule","dd"],"mappings":"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","file":"MJDataBind.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js","sourcesContent":["var WJFCommon = require(\"WJFCommon\");\r\ncc.Class({\r\n    extends: WJFCommon,\r\n    properties: {\r\n        right_player: cc.Node,\r\n        left_player: cc.Node,\r\n        top_player: cc.Node,\r\n        current_player:cc.Node,\r\n        playerprefab:{\r\n            default : null ,\r\n            type : cc.Prefab\r\n        },\r\n        cards_current:{\r\n            default:null ,\r\n            type : cc.Prefab\r\n        },\r\n        statebtn:{\r\n            default : null ,\r\n            type : cc.Node\r\n        },\r\n        deskcards_current_panel:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        deskcards_right_panel:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        deskcards_top_panel:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        deskcards_left_panel:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        desk_tip:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        actionnode_deal:{      //动作节点\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        searchlight:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        setting_coin: cc.Node, \r\n        right_ready: cc.Node,\r\n        left_ready: cc.Node,\r\n        top_ready:cc.Node,\r\n        current_ready:cc.Node,\r\n        starttime: cc.Label,\r\n        roomInfo: cc.Node,\r\n        mjtimer:{\r\n            default:null ,\r\n            type:cc.Label\r\n        },\r\n        selectfather:cc.Node,\r\n        actionnode_two:{        //动作节点\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        dan_childrend: cc.Node,\r\n        mjUnit:cc.Prefab,\r\n        card4:cc.Node,\r\n        cards_panel:{\r\n            default:null ,\r\n            type : cc.Node\r\n        },\r\n        tingSelect:cc.Node,\r\n        tingSelectch:cc.Prefab,\r\n        tingting: cc.Node,\r\n        currentting: cc.Node,\r\n        topting: cc.Node,\r\n        rightting: cc.Node,\r\n        leftting: cc.Node,\r\n    },\r\n    onLoad: function () {\r\n        let socket = this.socket();\r\n        //初始化房间信息\r\n        this.playerIsReady();\r\n\r\n        // //初始化对象池\r\n        this.init_pool();\r\n\r\n        let self = this ;\r\n        // if(this.ready()){\r\n        //     let socket = this.socket();\r\n        //     *\r\n        //      * 接受指令\r\n            \r\n            var roomInit = require('RoomInit');\r\n            var gameStartInit = require('GameStartInit');\r\n            this.map(\"joinroom\" , roomInit.joinroom_event);//加入房间\r\n            this.map(\"banker\" , gameStartInit.banker_event);//庄家\r\n            this.map(\"players\" , gameStartInit.players_event);//接受玩家列表\r\n            this.map(\"play\" , gameStartInit.play_event);//人齐了，接收发牌信息\r\n            var gamePlay = require('GamePlay');\r\n            this.map(\"lasthands\" , gamePlay.lasthands_event);//庄家开始打牌了，允许出牌\r\n            this.map(\"takecards\" , gamePlay.takecard_event);//我出的牌  \r\n            this.map(\"dealcard\" , gamePlay.dealcard_event) ;                //我出的牌\r\n            var gameEvent = require('GameEvent');\r\n            this.map(\"action\" , gameEvent.action_event);//服务端发送的 动作事件，有杠碰吃胡过可以选择\r\n            this.map(\"selectaction\" , gameEvent.selectaction_event) ;        //我选择的动作， 杠碰吃胡 \r\n            var settingClick = require('settingClick');\r\n            var settingClick = new settingClick();\r\n            // var settingClick = cc.find('Canvas/js/settingClick');\r\n            var gameOver = require('GameOver');\r\n            this.map(\"allcards\" , gameOver.allcards_event) ;\r\n            this.map(\"isOver\" , settingClick.isOver_event);\r\n            this.map(\"gameOver\",settingClick.gameOver_event);\r\n            this.map(\"over\" , settingClick.over_event);\r\n            this.map(\"unOver\" , settingClick.unOver_event);\r\n        // }\r\n\r\n        socket.on(\"command\" , function(result){\r\n            var data = self.getSelf().parse(result);\r\n            console.log(data.command);\r\n            console.log(data);\r\n            self.getSelf().route(data.command)(data , self);\r\n        });\r\n\r\n        /**\r\n         * 接受传送的 玩家列表（含AI）\r\n         */\r\n        socket.on(\"players\" , function(result){\r\n            var data = self.getSelf().parse(result) ;\r\n            console.log('players');\r\n            console.log(data);\r\n            self.getSelf().route(\"players\")(data, self);\r\n        });\r\n\r\n        socket.on(\"talkOnSay\" , function(result){\r\n            self.talk_event(result,null) ;\r\n        });\r\n\r\n        this.node.on('overGame',function(event){\r\n            let socket = self.getSelf().socket();\r\n            if(event.getUserData()){\r\n                socket.emit('overGame',JSON.stringify({\r\n                    REFUSE : event.getUserData()\r\n                }))\r\n            }else{\r\n                socket.emit('overGame',JSON.stringify({\r\n                }))\r\n            }\r\n        });\r\n\r\n        this.node.on('readyGM',function(event){ \r\n            //alert();\r\n            var context = cc.find('Canvas').getComponent('MJDataBind'); \r\n            context.current_ready.active = true ;    \r\n            let socket = self.getSelf().socket();\r\n            socket.emit('readyGame',JSON.stringify({\r\n            }))\r\n        });\r\n\r\n        this.node.on('takecard', function (event) {\r\n            var context = cc.find('Canvas').getComponent('MJDataBind');             \r\n            // cc.weijifen.audio.playSFX('select.mp3');                            \r\n            if(cc.sys.localStorage.getItem('take') == 'true'){\r\n                let card = event.target.getComponent(\"TakeMJCard\");\r\n                if(card != null){\r\n                    let cardValue = card.target.getComponent('HandCards');\r\n                    gamePlay.takecard_event({userid:cc.weijifen.user.id,card:cardValue.value},self);\r\n                    let card_script = card.target.getComponent(\"HandCards\") ;\r\n                    /**\r\n                     * 提交数据，等待服务器返回\r\n                     */\r\n    \r\n                        //开始匹配\r\n                    let socket = self.getSelf().socket();\r\n                    \r\n                    if (cc.sys.localStorage.getItem('ting') == 'true') {  \r\n                        context.tingting.active = true ;\r\n                        setTimeout(function(){context.tingting.active = false},2000);\r\n                        // cc.weijifen.audio.playSFX('nv/ting.mp3');                                \r\n                        let socket = self.getSelf().socket();\r\n                        cc.sys.localStorage.removeItem('ting') ;\r\n                        socket.emit(\"selectaction\" , JSON.stringify({\r\n                            action:\"ting\",\r\n                            actionCard:[card_script.value]\r\n                        }));\r\n                        self.getSelf().tingAction();    \r\n                    } else {\r\n                        socket.emit(\"doplaycards\" , card_script.value) ;\r\n                    }\r\n                    //cc.find(\"\");\r\n                    // self.getSelf().shouOperationMune();\r\n                }\r\n                event.stopPropagation();\r\n            }\r\n        });\r\n\r\n\r\n        this.node.on('mjSelection',function(event){\r\n            let father = cc.find('Canvas').getComponent('MJDataBind').selectfather;\r\n            father.active= false;\r\n            father.children[0].children[1].children.splice(0,father.children[0].children[1].children.length);\r\n            let socket = self.getSelf().socket();\r\n            let params = [];\r\n            let sendEvent ;\r\n            console.log(event);\r\n            if ( event.getUserData() ) {\r\n                sendEvent = event.getUserData().name ;\r\n                params = event.getUserData().params ;\r\n            }\r\n            socket.emit(\"selectaction\" , JSON.stringify({\r\n                action:sendEvent,\r\n                actionCard:params\r\n            }));\r\n            //cc.find(\"\");\r\n            self.getSelf().shouOperationMune();\r\n            event.stopPropagation();\r\n        });\r\n        /**\r\n         * ActionEvent发射的事件 ， 点击 碰\r\n         */\r\n        this.node.on(\"peng\",function(event){\r\n            cc.sys.localStorage.removeItem('guo');            \r\n            let socket = self.getSelf().socket();\r\n            socket.emit(\"selectaction\" , JSON.stringify({\r\n                action:\"peng\",\r\n                actionCard:[]\r\n            }));\r\n            //cc.find(\"\");\r\n            self.getSelf().shouOperationMune();\r\n            event.stopPropagation();\r\n        });\r\n        this.node.on(\"dan\",function(event){\r\n            cc.sys.localStorage.removeItem('guo');            \r\n            var context = cc.find('Canvas').getComponent('MJDataBind'); \r\n            if ( context.dans && context.dans.length > 1 ) {\r\n                cc.sys.localStorage.removeItem('take');\r\n                context.mjOperation('dan', context.dans,context);\r\n            } else {\r\n                let socket = self.getSelf().socket();\r\n                let danParam = [];\r\n                if ( context.dans ) {\r\n                    danParam = context.dans[0] ;\r\n                }\r\n                socket.emit(\"selectaction\" , JSON.stringify({\r\n                    action:'dan',\r\n                    actionCard:danParam\r\n                }));\r\n            }\r\n            //cc.find(\"\");\r\n            self.getSelf().shouOperationMune();\r\n            event.stopPropagation();\r\n        });\r\n        this.node.on(\"gang\",function(event){\r\n            cc.sys.localStorage.removeItem('guo');            \r\n            var context = cc.find('Canvas').getComponent('MJDataBind'); \r\n            if ( context.gangs && context.gangs.length > 1 ) {\r\n                cc.sys.localStorage.removeItem('take');                \r\n                context.mjOperation('gang', context.gangs,context);\r\n            } else {\r\n                let socket = self.getSelf().socket();\r\n                let gangParam = [];\r\n                if ( context.gangs ) {\r\n                    gangParam = context.gangs[0] ;\r\n                }\r\n                socket.emit(\"selectaction\" , JSON.stringify({\r\n                    action:'gang',\r\n                    actionCard:gangParam\r\n                }));\r\n            }\r\n            //cc.find(\"\");\r\n            self.getSelf().shouOperationMune();\r\n            event.stopPropagation();\r\n        });\r\n\r\n        /**\r\n         * ActionEvent发射的事件 ， 点击 吃\r\n         */\r\n        this.node.on(\"chi\",function(event){\r\n            cc.sys.localStorage.removeItem('guo');            \r\n            var context = cc.find('Canvas').getComponent('MJDataBind'); \r\n            if ( context.chis && context.chis.length > 1 ) {\r\n                cc.sys.localStorage.removeItem('take');\r\n                let array = [];\r\n                let array2 = [];\r\n                function sortNumber(a,b){return a - b}   \r\n                function sortNum(a,b){return b.id - a.id}              \r\n                for(let i = 0 ;i<context.chis.length;i++){\r\n                    let b = {};\r\n                    context.chis[i].sort(sortNumber);\r\n                    b.id = context.chis[i][0];\r\n                    b.value = context.chis[i];\r\n                    array.push(b);\r\n                }\r\n                array.sort(sortNum);\r\n                for(let i = 0 ; i<array.length;i++){\r\n                    array2.push(array[i].value);\r\n                }\r\n                \r\n\r\n                context.mjOperation('chi',array2,context);\r\n            } else {\r\n                let socket = self.getSelf().socket();\r\n                socket.emit(\"selectaction\" , JSON.stringify({\r\n                    action:'chi',\r\n                    actionCard:context.chis[0]\r\n                }));\r\n            }\r\n            //cc.find(\"\");\r\n            self.getSelf().shouOperationMune();\r\n            event.stopPropagation();\r\n        });\r\n        /**\r\n         * ActionEvent发射的事件 ， 点击 听\r\n         */\r\n        this.node.on(\"ting\",function(event){\r\n            cc.sys.localStorage.removeItem('guo');            \r\n            /*let socket = self.getSelf().socket();\r\n            socket.emit(\"selectaction\" , JSON.stringify({\r\n                action:\"ting\",\r\n                actionCard:[]\r\n            }));*/\r\n            //记录听得状态后，在出牌阶段判断状态并发送听牌事件。\r\n            var context = cc.find('Canvas').getComponent('MJDataBind'); \r\n            var gameStartInit = require('GameStartInit');\r\n            cc.sys.localStorage.setItem('ting','true') ;\r\n            cc.sys.localStorage.setItem('alting','true') ;\r\n            gameStartInit.initcardwidth(true);\r\n            self.getSelf().tingAction();                 \r\n            if (context.tings){\r\n                let length =cc.find('Canvas/cards/handcards/current/currenthandcards').children.length;\r\n                for(let j = 0 ; j< context.tings.length;j++){\r\n                    let cv = context.tings[j].card;                                    \r\n                    for(let i =0; i<length;i++){\r\n                        let cards =cc.find('Canvas/cards/handcards/current/currenthandcards').children[i];\r\n                        let button = cc.find('Canvas/cards/handcards/current/currenthandcards').children[i].children[0];\r\n                        let handCards = cards.getComponent(\"HandCards\");\r\n                        if((cv<0&&parseInt(cv/4 )== parseInt(handCards.value/4 ))||(cv>=0&&handCards.mjtype==parseInt(cv/36)&&parseInt((handCards.value%36)/4)==parseInt((cv%36)/4))){\r\n                             handCards.cardvalue.color = new cc.Color(255, 255, 255);\r\n                             button.getComponent(cc.Button).interactable= true;   \r\n                        }   \r\n                    }\r\n                }\r\n            }\r\n            event.stopPropagation();\r\n            self.getSelf().shouOperationMune();            \r\n        });\r\n        /**\r\n         * ActionEvent发射的事件 ， 点击 胡\r\n         */\r\n        this.node.on(\"hu\",function(event){\r\n            //cc.beimi.audio.playSFX('nv/hu.mp3');            \r\n            cc.sys.localStorage.removeItem('guo');            \r\n            let socket = self.getSelf().socket();\r\n            socket.emit(\"selectaction\" , JSON.stringify({\r\n                action:\"hu\",\r\n                actionCard:[]\r\n            }));\r\n            //cc.find(\"\");\r\n            self.getSelf().shouOperationMune();\r\n            event.stopPropagation();\r\n        });\r\n        /**\r\n         * ActionEvent发射的事件 ， 点击 过\r\n         */\r\n        this.node.on(\"guo\",function(event){\r\n            //当自己收到的事件是guo时  为true  别人\r\n            if(cc.sys.localStorage.getItem('guo')!='true'||cc.sys.localStorage.getItem('alting')=='true'){\r\n                cc.sys.localStorage.removeItem('altake');\r\n                let socket = self.getSelf().socket();\r\n                socket.emit(\"selectaction\" , JSON.stringify({\r\n                    action:\"guo\",\r\n                    actionCard:[]\r\n                }));\r\n            }else{\r\n                cc.sys.localStorage.setItem('take','true');                \r\n            }\r\n            cc.sys.localStorage.removeItem('guo');\r\n            self.getSelf().shouOperationMune();\r\n            event.stopPropagation();\r\n        });\r\n        // gameStartInit.players_event();\r\n\r\n        cc.sys.localStorage.setItem('count','0');\r\n        cc.sys.localStorage.removeItem('current');\r\n        cc.sys.localStorage.removeItem('right');\r\n        cc.sys.localStorage.removeItem('left');\r\n        cc.sys.localStorage.removeItem('top');\r\n        cc.sys.localStorage.removeItem('altake');      \r\n        cc.sys.localStorage.removeItem('alting');\r\n        cc.sys.localStorage.removeItem('guo');  \r\n        cc.sys.localStorage.removeItem('unOver');      \r\n        cc.sys.localStorage.removeItem('clear');   \r\n        cc.sys.localStorage.removeItem('cb');   \r\n    },\r\n    getSelf: function(){\r\n        var self =cc.find(\"Canvas\").getComponent(\"MJDataBind\");\r\n        return self;\r\n    },\r\n    shouOperationMune: function(){\r\n        var action = cc.moveTo(0.5,1122,-100);\r\n        this.actionnode_two.x=1122;\r\n        cc.sys.localStorage.removeItem('altake');\r\n        //this.actionnode_two.runAction(action);\r\n        //this.actionnode_two.active = false;\r\n        \r\n    },\r\n    // 初始化房间信息\r\n    playerIsReady:function () {\r\n        // // 游戏logo\r\n        if(cc.weijifen.GameBase.gameModel =='wz'){\r\n            if(cc.weijifen.playType == \"LG\"){\r\n                sprite.spriteFrame = this.bkLogoImgLG;//龙港游戏logo\r\n            }else{\r\n                sprite.spriteFrame = this.bkLogoImgTP;//台炮游戏logo\r\n            }\r\n        }else if(cc.weijifen.GameBase.gameModel =='jx'){\r\n            sprite.spriteFrame = this.jxLogoImgLG;\r\n        }\r\n\r\n\r\n        cc.weijifen.playersss = 0;  \r\n        if(cc.weijifen.browserType==\"wechat\"){\r\n            this.wxButton.node.active = true ;\r\n            let room ='';//房间号\r\n            if(cc.weijifen.match != 'true'){\r\n                room = cc.weijifen.room\r\n            }\r\n            cc.weijifen.WXorBlow.shareRoom(room);                    \r\n        }else if(cc.weijifen.browserType != null){\r\n            this.ggButton.node.active = true ;\r\n        }\r\n         \r\n        this.joinRoom();\r\n        //设置游戏玩家数量\r\n        if(cc.weijifen.playerNum == 2){\r\n            this.left_player.active = false;\r\n            this.right_player.active = false;\r\n            this.deskcards_current_panel.width = 650;\r\n            this.deskcards_top_panel.width = 650;\r\n            this.deskcards_top_panel.y =10;\r\n        }else if(cc.weijifen.playerNum == 3){\r\n            this.left_player.active = false;      \r\n            this.deskcards_current_panel.width = 600;\r\n            this.deskcards_top_panel.width = 600;  \r\n            this.deskcards_current_panel.x = -154;\r\n            this.deskcards_top_panel.x = -144;     \r\n            this.deskcards_right_panel.x = -83;  \r\n            this.deskcards_top_panel.y =10;   \r\n        }\r\n\r\n\r\n        //房间号显示\r\n        if(cc.weijifen.match =='false'){\r\n            let roomNum = cc.find('Canvas/roomNum').getChildByName('room')._components[0];// roomNum节点\r\n            roomNum.string = cc.weijifen.room;\r\n            cc.log(roomNum)\r\n        }else if(cc.weijifen.match == 'true'){\r\n            this.setting_coin.children[0].children[0].children[0].getCompoCanent(cc.Label).string = '退出';\r\n            this.setting_coin.children[1].active = false;\r\n            this.room_num.parent.children[2].active =false;\r\n            this.room_num.parent.children[1].getComponent(cc.Label).string = '比赛模式';\r\n            this.room_num.parent.children[1].x = this.room_num.parent.children[1].x +20;\r\n            this.ready2.active = false;\r\n            this.readybth.x = -4;\r\n        };\r\n\r\n        /*设置圈数，圈数条显示*/\r\n        let quanNum = cc.find('Canvas/roomNum').getChildByName('quan')._components[0];// quan节点\r\n        this.maxRound = 0;\r\n        if(cc.weijifen.maxRound){\r\n            this.maxRound = cc.weijifen.maxRound;\r\n        }\r\n        // this.totaljs.string = '圈数  '+ this.maxRound;\r\n        this.routes = {};\r\n        quanNum.string = '0/' + this.maxRound;\r\n    },\r\n    /*\r\n    * 初始化对象池\r\n    */\r\n    init_pool: function (context) {\r\n        /**\r\n         * 已初始的玩家对象池 ， 牌局结束 或者 有新玩家加入， 老玩家离开 等事件的时候，需要做对象池回收\r\n         * @type {Array}\r\n         */\r\n        this.playersarray = new Array();        //玩家列表\r\n\r\n        this.playercards = new Array();         //手牌对象\r\n\r\n        this.leftcards = new Array();           //左侧玩家手牌\r\n        this.rightcards = new Array();          //右侧玩家手牌\r\n        this.topcards = new Array() ;           //对家手牌\r\n\r\n        this.deskcards = new Array();           //当前玩家和 对家 已出牌\r\n\r\n        this.chis = [];\r\n        this.gangs = [];\r\n        this.dans = [];\r\n\r\n        this.right ='';// 用户信息\r\n        this.left = '';\r\n        this.top = '';\r\n        cc.weijifen.wanfa = null;//玩法\r\n\r\n        this.centertimer = null ;//中间时间\r\n         \r\n        /**\r\n         * 预制的 对象池\r\n         * @type {cc.NodePool}\r\n         */\r\n        this.playerspool = new cc.NodePool();\r\n        /**\r\n         * 当前玩家的 麻将牌的 对象池\r\n         * @type {cc.NodePool}\r\n         */\r\n        this.cardpool = new cc.NodePool();\r\n        this.alert = new cc.NodePool();\r\n        this.setting = new cc.NodePool();\r\n        this.leave = new cc.NodePool();\r\n        \r\n        // 操作按钮\r\n       /* this.alert.put(cc.instantiate(this.isOver));\r\n        this.setting.put(cc.instantiate(this.gameSettingClick));\r\n        this.leave.put(cc.instantiate(this.leave_alert));*/\r\n        /**\r\n         *\r\n         * 初始化玩家 的 对象池\r\n         */\r\n        for(var i=0 ; i<4 ; i++){\r\n            this.playerspool.put(cc.instantiate(this.playerprefab));\r\n        }\r\n        /**\r\n         * 初始化当前玩家的麻将牌 对象池\r\n         * 将麻将放到对象池\r\n         */\r\n        if(cc.weijifen.cardNum){\r\n            for(var i=0;i<cc.weijifen.cardNum+1;i++){\r\n                this.cardpool.put(cc.instantiate(this.cards_current));\r\n            }\r\n        }else{\r\n            for(var i=0 ; i<14 ; i++){\r\n                this.cardpool.put(cc.instantiate(this.cards_current));\r\n            }\r\n        }\r\n        this.exchange_state(\"init\" , this);\r\n        // let self = this ;\r\n    },\r\n    joinRoom:function(){\r\n        //开始匹配\r\n        console.log('--------------');\r\n        let socket = this.socket();\r\n        var param = {\r\n            token:cc.weijifen.authorization,\r\n            playway:cc.weijifen.playway,\r\n            orgi:cc.weijifen.user.orgi\r\n        } ;\r\n        if ( cc.weijifen.room ) {\r\n            param.room = cc.weijifen.room ;\r\n        }else{\r\n            param.playway = '402888815e6f0177015e71529f3a0001',\r\n            param.match = 1 ; \r\n        }\r\n        socket.emit(\"joinroom\" ,JSON.stringify(param)) ;\r\n    },\r\n    /**\r\n     * 状态切换，使用状态参数 切换，避免直接修改 对象状态，避免混乱\r\n     */\r\n    exchange_state:function(state , object){\r\n        cc.weijifen.state = state;\r\n        object = cc.find('Canvas').getComponent('MJDataBind');\r\n        let readybtn = null , waitting = null , selectbtn = null , banker = null ,ready2 = null ;\r\n\r\n        for(var i=0 ; i<object.statebtn.children.length ; i++){\r\n            let target = object.statebtn.children[i] ;\r\n            if(target.name == \"readybtn\"){\r\n                readybtn = target ;\r\n            }else if(target.name == \"waitting\"){\r\n                waitting = target ;\r\n            }else if(target.name == \"select\"){\r\n                selectbtn = target ;\r\n            }else if(target.name == \"banker\"){\r\n                banker = target ;\r\n            }else if(target.name == 'friendButton'){\r\n                ready2 = target;\r\n            }\r\n            target.active = false ;\r\n           \r\n        };\r\n        switch(state){\r\n            case \"init\" :\r\n                object.desk_tip.active = false;\r\n                readybtn.active = true ;\r\n                if(cc.weijifen.room.length ==6){\r\n                    ready2.active = true ;\r\n                }\r\n                // object.actionnode_deal.active =false ;\r\n\r\n                /**\r\n                 * 探照灯 熄灭\r\n                 */\r\n                object.exchange_searchlight(\"none\",object);\r\n\r\n                break;\r\n            case \"ready\" :\r\n                waitting.active = true ;\r\n                //ljh改 开局60s\r\n                //object.timer(object , 60) ;\r\n                break;\r\n            case \"begin\" :\r\n                object.readyNoActive(object); \r\n                //waitting.active = false ;\r\n                /**\r\n                 * 显示 当前还有多少张底牌\r\n                 * @type {boolean}\r\n                 */\r\n                object.desk_tip.active = true;\r\n                /**\r\n                 * 开始发牌动画，取消所有进行中的计时器\r\n                 */\r\n                object.canceltimer(object);\r\n                break;\r\n            case \"play\" :\r\n                /**\r\n                 * 一个短暂的状态，等待下一步指令是 定缺 还是直接开始打牌 ， 持续时间的计时器是 2秒\r\n                 */\r\n                if(cc.weijifen.bankers){\r\n                    banker.active = true ;\r\n                }\r\n                object.readyNoActive(object); \r\n                object.timer(object , 0) ;\r\n                break   ;\r\n            case \"selectcolor\" :\r\n                /**\r\n                 * 定缺 ，由服务端确定是否有此个节点，下个版本将会实现流程引擎控制 游戏 节点，一切都在服务端 进行配置工作\r\n                 * @type {boolean}\r\n                 */\r\n                object.exchange_searchlight(\"current\",object);\r\n                selectbtn.active = true ;\r\n                object.timer(object , 0) ;\r\n                break   ;\r\n            case \"selectresult\" :\r\n                /**\r\n                 * 选择了定缺结果，关闭选择按钮\r\n                 * @type {boolean}\r\n                 */\r\n                selectbtn.active = false ;\r\n                object.canceltimer(object) ;\r\n                break   ;\r\n            case \"lasthands\" :\r\n                /**\r\n                 * 选择了定缺结果，关闭选择按钮\r\n                 * @type {boolean}\r\n                 */\r\n                banker.active = true ;\r\n                /**\r\n                 * 计时器方向\r\n                 */\r\n               \r\n                object.timer(object , 8) ; \r\n                \r\n                break   ;\r\n            case \"otherplayer\" :\r\n            \r\n                /**\r\n                 * 计时器方向\r\n                 */\r\n                if(cc.weijifen.match){\r\n                    object.timer(object , 15) ;             \r\n                }else{\r\n                    object.timer(object , 8) ; \r\n                }\r\n                break   ;\r\n            case \"takecard\" :\r\n                /**\r\n                 * 选择了定缺结果，关闭选择按钮\r\n                 * @type {boolean}\r\n                 */\r\n                banker.active = false;\r\n                //object.canceltimer(object) ;\r\n                break   ;\r\n            case \"nextplayer\" :\r\n                if(object.action ){\r\n                    if(object.action == \"two\"){\r\n                        // let ani = object.actionnode_two.getComponent(cc.Animation);\r\n                        // ani.play(\"majiang_action_end\") ;\r\n                    }else if(object.action == \"three\") {\r\n                        let ani = object.actionnode_three.getComponent(cc.Animation);\r\n                        ani.play(\"majiang_three_action_end\") ;\r\n                    }else if(object.action == \"deal\") {\r\n                        object.actionnode_deal.active = false ;\r\n                    }\r\n                }\r\n                object.action = null ;\r\n                /**\r\n                 * 选择了定缺结果，关闭选择按钮\r\n                 * @type {boolean}\r\n                 */\r\n                if(cc.weijifen.match){\r\n                    object.timer(object , 15) ;             \r\n                }else{\r\n                    object.timer(object , 8) ; \r\n                }\r\n                break   ;\r\n        }\r\n    },\r\n    mjOperation : function(event,params,context){\r\n            this.selectfather.active = true;\r\n            //context.card4.getComponent('operation').setAction(event);\r\n            for(var i = 0 ; i < params.length;i++ ){\r\n                var b = cc.instantiate(context.card4);\r\n                b.getComponent('operation').setAction({'name':event,'params':params[i]});\r\n                b.parent = context.dan_childrend;\r\n                for(var j = 0 ; j< params[i].length; j++){\r\n                    var a = cc.instantiate(context.mjUnit);\r\n                    a.getComponent('HandCards').init(params[i][j],true);\r\n                    a.parent = b;\r\n                }\r\n            }\r\n    },\r\n    exchange_searchlight:function(direction , context){\r\n        cc.sys.localStorage.removeItem('cl');      \r\n        context = cc.find('Canvas').getComponent('MJDataBind');\r\n        for(var inx = 0 ; inx<context.searchlight.children.length ; inx++){\r\n            if(direction == context.searchlight.children[inx].name){\r\n                context.searchlight.children[inx].active = true ;\r\n            }else{\r\n                context.searchlight.children[inx].active = false ;\r\n            }\r\n        }\r\n    },\r\n    readyNoActive: function(context){\r\n        context.right_ready.active = false;\r\n        context.left_ready.active = false;\r\n        context.top_ready.active = false;\r\n        context.current_ready.active =false;  \r\n    },\r\n    canceltimer:function(object){\r\n        object.unscheduleAllCallbacks();\r\n        object.mjtimer.string = \"00\" ;\r\n    },\r\n    timer:function(object , times){\r\n        if(times > 9){\r\n            object.mjtimer.string = times ;\r\n        }else{\r\n            object.mjtimer.string = \"0\"+times ;\r\n        }\r\n\r\n        object.callback = function(){\r\n            times = times - 1 ;\r\n            if(times >= 0){\r\n                let text = times ;\r\n                if(times < 10){\r\n                    text = \"0\"+times ;\r\n                }\r\n                object.mjtimer.string = text ;\r\n                // if(times< 5){\r\n                //     cc.weijifen.audio.playSFX('timeup_alarm.mp3');                    \r\n                // }\r\n            }\r\n        }\r\n        object.unscheduleAllCallbacks();\r\n        /**\r\n         * 启动计时器，应该从后台传入 配置数据，控制 等待玩家 的等待时长\r\n         */\r\n        object.schedule(object.callback, 1, times, 0);\r\n    },\r\n    exchange_searchlight:function(direction , context){\r\n        cc.sys.localStorage.removeItem('cl');      \r\n        context = cc.find('Canvas').getComponent('MJDataBind');\r\n        for(var inx = 0 ; inx<context.searchlight.children.length ; inx++){\r\n            if(direction == context.searchlight.children[inx].name){\r\n                context.searchlight.children[inx].active = true ;\r\n            }else{\r\n                context.searchlight.children[inx].active = false ;\r\n            }\r\n        }\r\n    },\r\n    tingAction: function(dd){\r\n        let length =cc.find('Canvas/cards/handcards/current/currenthandcards').children.length;\r\n        for(let i =0; i<length;i++){\r\n            let cards =cc.find('Canvas/cards/handcards/current/currenthandcards').children[i];\r\n            let button = cc.find('Canvas/cards/handcards/current/currenthandcards').children[i].children[0];\r\n            let handCards = cards.getComponent(\"HandCards\");\r\n            if(dd){\r\n                handCards.cardvalue.color = new cc.Color(255, 255, 255); \r\n            }else{\r\n                handCards.cardvalue.color = new cc.Color(118, 118, 118);                \r\n            }\r\n            button.getComponent(cc.Button).interactable= false;\r\n        }\r\n    },\r\n});\r\n\r\n\r\n\r\n\r\n"]}