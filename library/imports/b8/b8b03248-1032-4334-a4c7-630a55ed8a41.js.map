{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js\\setting/assets\\module\\majiang\\js\\setting\\settingClick.js"],"names":["MJDataBind","require","cc","Class","extends","properties","alert2","Prefab","summary","default","type","onLoad","console","log","find","getComponent","settingBtnClick","event","settting_box","weijifen","settingflag","active","action","moveTo","p","runAction","leaveClick","openAlert","btn","getChildByName","overClick","str","close","alert","instantiate","children","Label","string","Button","clickEvents","customEventData","parent","isOver_event","mj","sys","localStorage","setItem","size","get","node","waiting","button","button2","labei","labei2","time","t","setInterval","daojishi","gameOver_event","data","context","self","endGameOver","getItem","removeItem","setTimeout","temp","root","setDataEnd","over_event","maxRound","op","playerNum","room","cardNum","GameBase","gameModel","director","loadScene","clearTimeout","unOver_event","dialog","put"],"mappings":"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","file":"settingClick.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\module\\majiang\\js\\setting","sourcesContent":["var MJDataBind = require(\"MJDataBind\");\r\ncc.Class({\r\n    extends: MJDataBind,\r\n\r\n    properties: {\r\n        alert2 : cc.Prefab,\r\n        summary:{\r\n            default:null ,\r\n            type : cc.Prefab\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n        console.log('th*/**/*/*/*/*/*/*/',cc.find('Canvas/js/settingClick').getComponent('settingClick'))\r\n    },\r\n\r\n    //设置\r\n    // statics: {\r\n\r\n        settingBtnClick: function (event) {\r\n            // var action = cc.moveTo(0.5,cc.p(390,265));\r\n            let settting_box = cc.find('Canvas/other/setting');\r\n            cc.weijifen.settingflag = !cc.weijifen.settingflag;\r\n            if(cc.weijifen.settingflag){\r\n                settting_box.active = true;\r\n                var action = cc.moveTo(0.5,cc.p(408,306));\r\n                settting_box.runAction(action);\r\n            }else{\r\n                var action = cc.moveTo(0.5,cc.p(850,306));\r\n                settting_box.runAction(action);\r\n            }\r\n            // this.node.dispatchEvent( new cc.Event.EventCustom('settingclick', true) );\r\n            // cc.log(settting_box)\r\n        },\r\n        //离开房间\r\n        leaveClick:function(){\r\n            this.openAlert('是否退出房间','hall');\r\n            let btn = cc.find('Canvas').getChildByName('alert').getChildByName('button');\r\n            \r\n            btn.active = false;\r\n        },\r\n        // 点击解散房间按钮\r\n        overClick:function(){\r\n            \r\n            cc.log('解散按钮')\r\n            this.openAlert('是否解散房间','over');\r\n            let btn = cc.find('Canvas').getChildByName('alert').getChildByName('button');\r\n            btn.active = true;\r\n            \r\n        },\r\n\r\n        // 弹框弹出\r\n        openAlert:function(str,close){\r\n\r\n            let alert = cc.instantiate(this.alert2);\r\n            alert.children[2].getComponent(cc.Label).string= str;\r\n            // alert.children[3].getComponent(cc.Button).clickEvents[0].customEventData = close;\r\n            alert.children[4].getComponent(cc.Button).clickEvents[0].customEventData = close;\r\n            alert.parent = cc.find('Canvas');\r\n        },\r\n\r\n        /**\r\n         * 一方要求解散时，向其他玩家发送请求信息\r\n         */\r\n        isOver_event:function(){\r\n            debugger\r\n            cc.log('isOver_event')\r\n            var mj = cc.find('Canvas').getComponent('MJDataBind');\r\n            cc.sys.localStorage.setItem('unOver','true');\r\n            if(mj.alert.size()>0){\r\n                var alert = mj.alert.get();\r\n                alert.parent = cc.find(\"Canvas\");\r\n                console.log(this)\r\n                // let node = alert.getComponent('overGameClick') ;\r\n                let node = alert.getComponent('settingClick') ;\r\n                node.waiting.string = '你的好友请求解散房间' ;\r\n                node.button.active = false;\r\n                node.button2.active = true;\r\n                node.labei.active =false;\r\n                node.labei2.active = true;\r\n                node.time =30;\r\n                mj.t = setInterval(function(){node.daojishi()},1000)  ;  \r\n            }\r\n            \r\n        },\r\n\r\n        gameOver_event: function(data,context){\r\n            console.log('this****************',this);\r\n            let self = cc.find('Canvas/js/settingClick').getComponent('settingClick');\r\n            \r\n            console.log('进入Game_over_event',self.endGameOver)\r\n            let time;\r\n            if(cc.sys.localStorage.getItem('unOver')=='true'){\r\n                time = 0;\r\n                cc.sys.localStorage.removeItem('unOver');\r\n            }else{\r\n                time = 3000;\r\n            }\r\n            setTimeout(function(){self.endGameOver(data,context)},time)\r\n            \r\n        },\r\n        endGameOver: function(data,context){\r\n            \r\n            console.log('进入endGameOver')\r\n\r\n            let temp = cc.instantiate(this.summary) ;\r\n            temp.parent = context.root() ;\r\n            temp.getComponent('SummaryClick').setDataEnd(data); \r\n            \r\n        },\r\n        /**\r\n        */\r\n        over_event: function(){\r\n                  \r\n            cc.weijifen.maxRound =null;\r\n            cc.weijifen.op =null;\r\n            cc.weijifen.playerNum = null;\r\n            cc.weijifen.room=null;\r\n            cc.weijifen.cardNum = null;\r\n            cc.sys.localStorage.setItem('dis','true');        \r\n            if(cc.weijifen.GameBase.gameModel=='wz'){\r\n                cc.director.loadScene('温州');\r\n            }else{\r\n                cc.director.loadScene('gameMain');                    \r\n            }\r\n            let mj = cc.find('Canvas').getComponent('MJDataBind');\r\n            clearTimeout(mj.t);  \r\n            // var desk = require(\"DeskCards\");\r\n            // var jiantou = new desk();\r\n            // jiantou.xiaochu();\r\n        },\r\n        unOver_event: function(){\r\n            let mj = cc.find('Canvas').getComponent('MJDataBind')\r\n            cc.sys.localStorage.removeItem('unOver');\r\n            let dialog = cc.find(\"Canvas/isover\") ;\r\n            clearTimeout(mj.t);\r\n            mj.alert.put(dialog);\r\n        },\r\n    // }\r\n});\r\n"]}