{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\resources\\script\\components/assets\\resources\\script\\components\\ShareWx.js"],"names":["WJFCommon","require","cc","Class","extends","properties","tape","Button","tape2","onLoad","init","selfs","talk","recordTimer","weijifen","http","httpPost","url","window","location","href","sucess","error","result","object","data","JSON","parse","wx","config","appId","timestamp","nonceStr","signature","jsApiList","ready","browserTyp","WXorBlow","browserType","onVoicePlayEnd","success","res","stopWave","shareRoom","room","descNametitle","urlType","txt","GameBase","gameModel","console","log","onMenuShareAppMessage","title","desc","user","nickname","link","imgUrl","headimgurl","trigger","cancel","fail","stringify","onMenuShareTimeline","touchendClick","event","share","find","active","END","Date","getTime","time","end","start","getSeconds","stopRecord","uploadVoice","localId","isShowProgressTips","socket","emit","userid","id","serverId","START","setTimeout","talkClick","wxButton","node","children","startRecord","localStorage","rainAllowRecord","alert","settime","clearTimeout","t","getComponent","Label","string","talkPlay","datas","downloadVoice","playVoice"],"mappings":"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","file":"ShareWx.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\resources\\script\\components","sourcesContent":["var WJFCommon = require(\"WJFCommon\");\r\ncc.Class({\r\n    extends: WJFCommon,\r\n\r\n    properties: {\r\n        tape:cc.Button,\r\n        tape2: cc.Button\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.init();\r\n    },\r\n    //整个游戏初始化 为优先设置为微信环境，当不是微信环境时设置为其他设备的环境。\r\n    init: function(){\r\n        let selfs = this;\r\n        selfs.talk =false;\r\n        selfs.recordTimer = 0;\r\n        cc.weijifen.http.httpPost(\"/wxController/getWxConfig\",{url:window.location.href}, selfs.sucess , selfs.error , selfs);\r\n    },\r\n    sucess:function(result,object){\r\n        let data = JSON.parse(result) ;\r\n        wx.config({\r\n            appId: data.appId,\r\n            timestamp: data.timestamp,\r\n            nonceStr: data.nonceStr,\r\n            signature: data.signature,\r\n            jsApiList: [\r\n                'checkJsApi',\r\n                'onMenuShareTimeline',\r\n                'onMenuShareAppMessage',\r\n                'startRecord', \r\n                'stopRecord',\r\n                'translateVoice',\r\n                'onVoicePlayEnd',\r\n                'playVoice',\r\n                'uploadVoice','downloadVoice'\r\n            ]\r\n        });  \r\n        wx.ready(function(){\r\n            //只有当时微信环境下才会调用这个方法  所以不管此时是微信 和时其他设备  都重新加载为微信环境\r\n            if(cc.weijifen.browserTyp !=\"wechat\"){\r\n                let WXorBlow = require('ShareWx');  \r\n                cc.weijifen.WXorBlow = new WXorBlow()\r\n            }\r\n            cc.weijifen.browserType=\"wechat\";                \r\n            //注册微信播放录音结束事件【一定要放在wx.ready函数内】\r\n            wx.onVoicePlayEnd({\r\n                success: function (res) {\r\n                    stopWave();\r\n                }\r\n            });\r\n        object.shareRoom();\r\n        });\r\n        //如果设备类型不等于微信浏览器的话 就执行普通浏览器的\r\n        if(cc.weijifen.browserTyp !=\"wechat\" ){\r\n            let WXorBlow = require('LYAudio');\r\n            cc.weijifen.WXorBlow = new WXorBlow();\r\n            cc.weijifen.WXorBlow.init(); \r\n            cc.weijifen.browserType ='brow';\r\n        }\r\n    },\r\n    shareRoom: function(room){\r\n            let descNametitle;\r\n            let urlType;\r\n            let txt = '';\r\n            if(cc.weijifen.GameBase.gameModel == 'wz'){\r\n                descNametitle = \"首游宝-温州棋牌\";\r\n                urlType = \"toWZAuth\";\r\n            }else if(cc.weijifen.GameBase.gameModel == 'ch'){\r\n                descNametitle = \"巡天游-心缘长春\";\r\n                urlType = \"toCHAuth\";\r\n            }     \r\n            if(cc.weijifen.room){\r\n                txt = '房间号：' + cc.weijifen.room;\r\n            }\r\n            console.log('game.bizpartner.cn/wxController/'+urlType+'?roomNum='+room);\r\n            // 2.1 监听“分享给朋友”，按钮点击、自定义分享内容及分享结果接口\r\n            wx.onMenuShareAppMessage({\r\n                title: descNametitle,\r\n                desc: \"您的好友\"+cc.weijifen.user.nickname+\"邀请您一起游戏\"+txt,\r\n                link: 'http://game.bizpartner.cn/wxController/'+urlType+'?roomNum='+room,\r\n                imgUrl: cc.weijifen.user.headimgurl,\r\n                trigger: function (res) {\r\n                    // 不要尝试在trigger中使用ajax异步请求修改本次分享的内容，因为客户端分享操作是一个同步操作，这时候使用ajax的回包会还没有返回\r\n                    console.log('用户点击发送给朋友');\r\n                },\r\n                success: function (res) {\r\n                    console.log('已分享');\r\n                },\r\n                cancel: function (res) {\r\n                    console.log('已取消');\r\n                },\r\n                fail: function (res) {\r\n                    console.log(JSON.stringify(res));\r\n                }\r\n            });\r\n            // 2.2 监听“分享到朋友圈”按钮点击、自定义分享内容及分享结果接口\r\n            wx.onMenuShareTimeline({\r\n                title: descNametitle,\r\n                link: 'http://game.bizpartner.cn/wxController/'+urlType+'?roomNum='+room,\r\n                imgUrl: cc.weijifen.user.headimgurl,\r\n                trigger: function (res) {\r\n                    // 不要尝试在trigger中使用ajax异步请求修改本次分享的内容，因为客户端分享操作是一个同步操作，这时候使用ajax的回包会还没有返回\r\n                    console.log('用户点击分享到朋友圈');\r\n                },\r\n                success: function (res) {\r\n                    console.log('已分享');\r\n                },\r\n                cancel: function (res) {\r\n                    console.log('已取消');\r\n                },\r\n                fail: function (res) {\r\n                    console.log(JSON.stringify(res));\r\n                }\r\n            });\r\n    },\r\n    error:function(object){\r\n        let WXorBlow = require('LYAudio');\r\n        cc.weijifen.WXorBlow = new WXorBlow();\r\n        cc.weijifen.WXorBlow.init(); \r\n        cc.weijifen.browserType ='brow';\r\n   },\r\n    //停止录音\r\n    touchendClick: function (event) {\r\n        var share = this ;\r\n        cc.find('Canvas/录音/发送语音2').active =false;\r\n        share.END = new Date().getTime();\r\n        let time = new Date(share.end - share.start).getSeconds();\r\n        if(time > 3){\r\n            wx.stopRecord({\r\n                success: function (res) {\r\n                  //录音上传到微信服务器\r\n                wx.uploadVoice({\r\n                    localId: res.localId, // 需要上传的音频的本地ID，由stopRecord接口获得\r\n                    isShowProgressTips: 1, // 默认为1，显示进度提示\r\n                    success: function (res) {\r\n                        //复制微信服务器返回录音id\r\n                        let socket = share.socket();\r\n                        socket.emit('sayOnSound',JSON.stringify({\r\n                            userid : cc.weijifen.user.id,\r\n                            serverId : res.serverId,\r\n                            start : share.START,\r\n                            end : share.END\r\n                        })) ;\r\n                    }\r\n                });\r\n            },\r\n                fail: function (res) {\r\n                    cc.find('Canvas/录音/发送语音1').active =true;\r\n                    setTimeout(function(){\r\n                      cc.find('Canvas/录音/发送语音1').active =false;                \r\n                    },1000);\r\n                }\r\n            });\r\n        }else{\r\n            cc.find('Canvas/录音/发送语音1').active =true;\r\n            setTimeout(function(){\r\n              cc.find('Canvas/录音/发送语音1').active =false;                \r\n            },1000);\r\n        }\r\n    },\r\n    talkClick: function(wxButton){\r\n        var share = this;\r\n        this.wxButton = wxButton;\r\n        var wxButton = wxButton;\r\n        if(share.talk == true){\r\n            share.talk = false;\r\n            wxButton.node.children[1].active = false ;\r\n            wxButton.node.children[0].active = true ;         \r\n            //cc.find('Canvas/录音/发送语音2').active =false;\r\n            share.END = new Date().getTime();\r\n            wx.stopRecord({\r\n                success: function (res) {\r\n                    console.log(res);\r\n                    console.log('-------')\r\n                    //录音上传到微信服务器\r\n                    wx.uploadVoice({\r\n                        localId: res.localId, // 需要上传的音频的本地ID，由stopRecord接口获得\r\n                        isShowProgressTips: 1, // 默认为1，显示进度提示\r\n                        success: function (res) {\r\n                           \r\n                            //复制微信服务器返回录音id\r\n                            let socket = share.socket();\r\n                            socket.emit('sayOnSound',JSON.stringify({\r\n                                userid : cc.weijifen.user.id,\r\n                                serverId : res.serverId,\r\n                                start : share.START,\r\n                                end : share.END\r\n                            })) ;\r\n                            //cc.weijifen.serverId = res.serverId;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }else{\r\n            share.talk = true;\r\n            wxButton.node.children[1].active = true ;\r\n            wxButton.node.children[0].active = false ;     \r\n            share.START = new Date().getTime();\r\n            share.recordTimer = setTimeout(function(){\r\n                wx.startRecord({\r\n                    success: function(){\r\n                        localStorage.rainAllowRecord = 'true';\r\n                    },\r\n                    cancel: function () {\r\n                        alert('用户拒绝授权录音');\r\n                    }\r\n                });\r\n            },300);\r\n        }\r\n    },\r\n    settime: function(){\r\n        this.time = this.time -1 ; \r\n        if(this.time == 0 ){\r\n            this.talkClick(this.wxButton);\r\n            clearTimeout(this.t);              \r\n        }else{\r\n            this.wxButton.node.children[1].children[0].children[1].getComponent(cc.Label).string = this.time;\r\n        }\r\n    },\r\n    talkPlay: function(datas){\r\n        wx.downloadVoice({\r\n            serverId: datas.serverId, // 需要下载的音频的服务器端ID，由uploadVoice接口获得\r\n            isShowProgressTips: 1, // 默认为1，显示进度提示\r\n            success: function (res) {\r\n                //dz.active = false;\r\n                wx.playVoice({\r\n                    localId: res.localId // 需要播放的音频的本地ID，由stopRecord接口获得\r\n                });\r\n            }\r\n        });\r\n    }\r\n});\r\n"]}